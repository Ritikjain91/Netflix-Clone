/*! For license information please see main.915b3fb6.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function ke(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Ie)&&(Ne(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Dt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Kt){var i=Jt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Jt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Jn(e){if(H(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Jn(Hn)){var t=[];Wn(t,Hn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Hn)}function sr(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function Tr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),c(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(Cr,"onAnimationIteration"),Dr(xr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=yn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yn;else if(Kn(a))if($n)g=or;else{g=ir;var y=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=De(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=De(n,s))&&o.unshift(Wr(n,c,a)):i||null!=(c=De(n,s))&&o.push(Wr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function Ti(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function ki(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ci={},xi=Ii(Ci),Ni=Ii(!1),Ai=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ni),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Wi=null,Gi=0,Hi=[],Qi=0,Ji=null,Yi=1,$i="";function Xi(e,t){qi[Ki++]=Gi,qi[Ki++]=Wi,Wi=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Yi,Hi[Qi++]=$i,Hi[Qi++]=Ji,Ji=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Yi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null;for(;e===Ji;)Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null,Yi=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Dl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Ss(e){var t=ys.current;Ti(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ds(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var js=(new r.Component).refs;function Vs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ps(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Ps(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Ps(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Di(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=js,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Di(t)?Ai:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Vs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Js(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case S:return(t=jl(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Gs(r,s,o),c.return=r,r=c)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=jl(o,r.mode,c)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var Ys=Js(!0),$s=Js(!1),Xs={},Zs=Ii(Xs),eo=Ii(Xs),to=Ii(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ii(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=jo(t,n,s,r))}mo.flags|=e,i.memoizedState=jo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Wo(e,t){return Bo(4,2,e,t)}function Go(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Jo(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=xs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Jo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ac.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:$o,useReducer:No,useRef:Vo,useState:function(){return No(xo)},useDebugValue:Jo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Go,useMemo:$o,useReducer:Ao,useRef:Vo,useState:function(){return Ao(xo)},useDebugValue:Jo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wc||(Wc=!0,Gc=r),da(0,t)},n}function ma(e,t,n){(n=Ps(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ps(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?$s(t,null,n,r):Ys(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Ol(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Oc,Pc),Pc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Oc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Oc,Pc),Pc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Oc,Pc),Pc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Di(n)?Ai:xi.current;return s=Ri(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Ri(t,l=Di(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ks(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||As?("function"===typeof u&&(Vs(t,n,u,r),c=t.memoizedState),(a=As||Bs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ds(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ts(c):c=Ri(t,c=Di(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ks(t,o,r,c),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(Vs(t,n,f,r),p=t.memoizedState),(l=As||Bs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Da,Pa,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):ja(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rl(r,e,i,-1))}return gl(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=Yi,Hi[Qi++]=$i,Hi[Qi++]=Ji,Yi=e.id,$i=e.overflow,Ji=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ol(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Ol(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Di(t.type)&&Pi(),Ha(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Pa(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var c in ve(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Pa(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Ss(t.type._context),Ha(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Ga(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Ga(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qc&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ha(t),null}else 2*$e()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ja(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,$a=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!$a&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fc(e,t,n),$a=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),vc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&$(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),vc(e);break;case 13:gc(t,e),vc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=$e())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,gc(t,e),$a=u):gc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Sc(d);continue}}null!==p?(p.return=f,Za=p):Sc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),vc(e),4&r&&mc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||$a;a=Ya;var l=$a;if(Ya=o,($a=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Ec(i):null!==c?(c.return=o,Za=c):Ec(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,Ya=a,$a=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&sc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Ic,Tc=Math.ceil,kc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,xc=b.ReactCurrentBatchConfig,Nc=0,Ac=null,Rc=null,Dc=0,Pc=0,Oc=Ii(0),Lc=0,Mc=null,Fc=0,Uc=0,jc=0,Vc=null,zc=null,Bc=0,qc=1/0,Kc=null,Wc=!1,Gc=null,Hc=null,Qc=!1,Jc=null,Yc=0,$c=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Nc)?$e():-1!==Zc?Zc:Zc=$e()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==Dc?Dc&-Dc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rl(e,t,n,r){if(50<$c)throw $c=0,Xc=null,Error(s(185));yt(e,n,r),0!==(2&Nc)&&e===Ac||(e===Ac&&(0===(2&Nc)&&(Uc|=n),4===Lc&&cl(e,Dc)),il(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(qc=$e()+500,ji&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ac?Dc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Nc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Nc))throw Error(s(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Dc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Nc;Nc|=2;var o=ml();for(Ac===e&&Dc===t||(Kc=null,qc=$e()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Nc=i,null!==Rc?t=0:(Ac=null,Dc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,$e()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sl(e,zc,Kc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=Bc+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sl.bind(null,e,zc,Kc),t);break}Sl(e,zc,Kc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(Sl.bind(null,e,zc,Kc),r);break}Sl(e,zc,Kc);break;default:throw Error(s(329))}}}return il(e,$e()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=zc,zc=n,null!==t&&al(t)),e}function al(e){null===zc?zc=e:zc.push.apply(zc,e)}function cl(e,t){for(t&=~jc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(s(327));El();var t=dt(e,0);if(0===(1&t))return il(e,$e()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sl(e,zc,Kc),il(e,$e()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(qc=$e()+500,ji&&Bi())}}function hl(e){null!==Jc&&0===Jc.tag&&0===(6&Nc)&&El();var t=Nc;Nc|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Nc=t))&&Bi()}}function dl(){Pc=Oc.current,Ti(Oc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rc)for(n=Rc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ti(Ni),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,Rc=e=Ol(e.current,null),Dc=Pc=t,Lc=0,Mc=null,jc=Uc=Fc=0,zc=Vc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Rc;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Rc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Dc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===Vc?Vc=[o]:Vc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Fc)&&0===(268435455&Uc)||cl(Ac,Dc)}function yl(e,t){var n=Nc;Nc|=2;var r=ml();for(Ac===e&&Dc===t||(Kc=null,fl(e,t));;)try{vl();break}catch(i){pl(e,i)}if(_s(),Nc=n,kc.current=r,null!==Rc)throw Error(s(261));return Ac=null,Dc=0,Lc}function vl(){for(;null!==Rc;)bl(Rc)}function wl(){for(;null!==Rc&&!Je();)bl(Rc)}function bl(e){var t=Ic(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?_l(e):Rc=t,Cc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Pc)))return void(Rc=n)}else{if(null!==(n=Ja(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Lc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Sl(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{El()}while(null!==Jc);if(0!==(6&Nc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(Rc=Ac=null,Dc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Al(tt,(function(){return El(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Nc;Nc|=4,Cc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),yc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),Ye(),Nc=c,wt=a,xc.transition=o}else e.current=n;if(Qc&&(Qc=!1,Jc=e,Yc=i),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,e=Gc,Gc=null,e;0!==(1&Yc)&&0!==e.tag&&El(),o=e.pendingLanes,0!==(1&o)?e===Xc?$c++:($c=0,Xc=e):$c=0,Bi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function El(){if(null!==Jc){var e=bt(Yc),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===Jc)var r=!1;else{if(e=Jc,Jc=null,Yc=0,0!==(6&Nc))throw Error(s(331));var i=Nc;for(Nc|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){Tl(c,c.return,S)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Nc=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function Il(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Dc&n)===n&&(4===Lc||3===Lc&&(130023424&Dc)===Dc&&500>$e()-Bc?fl(e,0):jc|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ns(e,t))&&(yt(e,t,n),il(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cl(e,n)}function Al(e,t){return He(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dl(e,t,n,r){return new Rl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Dl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Pl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Ml(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Dl(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Dl(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Dl(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dl(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Dl(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Dl(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Dl(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=Dl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,s,o,a,c){return e=new Vl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=zl(n,r,!0,e,0,s,0,a,c)).context=Bl(null),n=e.current,(s=Ps(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),il(e,r),e}function Kl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Wl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Ri(t,xi.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ds(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=$s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Ps(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Is(t,n),qs(t,r,i),Ws(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Jl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wl(o);a.call(e)}}Kl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wl(c);a.call(e)}}var c=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),hl((function(){Kl(t,c,n,r)})),c}(n,t,e,i,r);return Wl(o)}Yl.prototype.render=Jl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kl(e,t,null,null)},Yl.prototype.unmount=Jl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Kl(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),il(t,$e()),0===(6&Nc)&&(qc=$e()+500,Bi()))}break;case 13:hl((function(){var t=Ns(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Hl(e,1)}},St=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rl(t,e,134217728,tl());Hl(e,134217728)}},Et=function(e){if(13===e.tag){var t=nl(e),n=Ns(e,t);if(null!==n)rl(n,e,t,tl());Hl(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ul,Ne=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ul]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Jl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,P(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?E():(I=!1,T=null)}}else I=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,E=function(){D.postMessage(null)}}else E=function(){y(A,0)};function P(e){T=e,I||(I=!0,E())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(v(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)},895:(e,t,n)=>{var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),l(f),f}},237:(e,t,n)=>{e.exports=n(895)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>Qe,SDK_VERSION:()=>kn,_DEFAULT_ENTRY_NAME:()=>un,_addComponent:()=>mn,_addOrOverwriteComponent:()=>gn,_apps:()=>dn,_clearComponents:()=>Sn,_components:()=>pn,_getProvider:()=>vn,_isFirebaseApp:()=>bn,_isFirebaseServerApp:()=>_n,_registerComponent:()=>yn,_removeServiceInstance:()=>wn,_serverApps:()=>fn,deleteApp:()=>Rn,getApp:()=>Nn,getApps:()=>An,initializeApp:()=>Cn,initializeServerApp:()=>xn,onLog:()=>Pn,registerVersion:()=>Dn,setLogLevel:()=>On});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>ax,hasStandardBrowserEnv:()=>cx,hasStandardBrowserWebWorkerEnv:()=>ux});var r,i=n(43),s=n.t(i,2),o=n(391),a=n(950),c=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,c=r.Pop,d=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){c=r.Pop;let e=y(),t=null==e?null:e-g;g=e,d&&d({action:c,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return c},get location(){return e(s,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(u,v),d=e,()=>{s.removeEventListener(u,v),d=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=r.Push;let i=p(b.location,e,t);n&&n(i,e),g=y()+1;let l=f(i,g),u=b.createHref(i);try{a.pushState(l,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;s.location.assign(u)}o&&d&&d({action:c,location:b.location,delta:1})},replace:function(e,t){c=r.Replace;let i=p(b.location,e,t);n&&n(i,e),g=y();let s=f(i,g),l=b.createHref(i);a.replaceState(s,"",l),o&&d&&d({action:c,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let i=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=D(r);s=A(i[o],e)}return s}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=U([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),b(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of _(e.path))i(e,t,r);else i(e,t)})),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=_(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const S=/^:[\w-]+$/,E=3,I=2,T=1,k=10,C=-2,x=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=C),t&&(r+=I),n.filter((e=>!x(e))).reduce(((e,t)=>e+(S.test(t)?E:""===t?T:k)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:U([i,l.pathname]),pathnameBase:j(U([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=U([i,l.pathnameBase]))}return s}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e,t){let n=L(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),h(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),h(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),h(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:z(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}const U=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],K=(new Set(q),["get",...q]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const G=i.createContext(null);const H=i.createContext(null);const Q=i.createContext(null);const J=i.createContext(null);const Y=i.createContext({outlet:null,matches:[],isDataRoute:!1});const $=i.createContext(null);function X(){return null!=i.useContext(J)}function Z(){return X()||h(!1),i.useContext(J).location}function ee(e){i.useContext(Q).static||i.useLayoutEffect(e)}function te(){let{isDataRoute:e}=i.useContext(Y);return e?function(){let{router:e}=he(le.UseNavigateStable),t=fe(ue.UseNavigateStable),n=i.useRef(!1);ee((()=>{n.current=!0}));let r=i.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return r}():function(){X()||h(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(Q),{matches:s}=i.useContext(Y),{pathname:o}=Z(),a=JSON.stringify(M(s,n.v7_relativeSplatPath)),c=i.useRef(!1);return ee((()=>{c.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!c.current)return;if("number"===typeof n)return void r.go(n);let s=F(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}function ne(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(Q),{matches:s}=i.useContext(Y),{pathname:o}=Z(),a=JSON.stringify(M(s,r.v7_relativeSplatPath));return i.useMemo((()=>F(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function re(e,t,n,s){X()||h(!1);let{navigator:o}=i.useContext(Q),{matches:a}=i.useContext(Y),c=a[a.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,f=Z();if(t){var p;let e="string"===typeof t?g(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||h(!1),d=e}else d=f;let m=d.pathname||"/",y=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=w(e,{pathname:y});let b=ce(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:U([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,s);return t&&b?i.createElement(J.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},b):b}function ie(){let e=function(){var e;let t=i.useContext($),n=de(ue.UseRouteError),r=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const se=i.createElement(ie,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Y.Provider,{value:this.props.routeContext},i.createElement($.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Y.Provider,{value:t},r)}function ce(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=a.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||se,l&&(u<0&&0===s?(p="route-fallback",!1||pe[p]||(pe[p]=!0),h=!0,f=null):u===s&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ae,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=i.useContext(G);return t||h(!1),t}function de(e){let t=i.useContext(H);return t||h(!1),t}function fe(e){let t=function(e){let t=i.useContext(Y);return t||h(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const pe={};s.startTransition;function me(e){h(!1)}function ge(e){let{basename:t="/",children:n=null,location:s,navigationType:o=r.Pop,navigator:a,static:c=!1,future:l}=e;X()&&h(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:u,navigator:a,static:c,future:W({v7_relativeSplatPath:!1},l)})),[u,l,a,c]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=s,w=i.useMemo((()=>{let e=P(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:o}}),[u,f,p,m,y,v,o]);return null==w?null:i.createElement(Q.Provider,{value:d},i.createElement(J.Provider,{children:n,value:w}))}function ye(e){let{children:t,location:n}=e;return re(ve(t),n)}new Promise((()=>{}));i.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==me&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(iN){}new Map;const Se=s.startTransition;c.flushSync,s.useId;function Ee(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),y((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return p("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,a)));let c=o.current,[l,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},d=i.useCallback((e=>{h&&Se?Se((()=>u(e))):u(e)}),[u,h]);return i.useLayoutEffect((()=>c.listen(d)),[c,d]),i.createElement(ge,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:r})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=i.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:l,to:u,preventScrollReset:d,unstable_viewTransition:f}=e,p=be(e,_e),{basename:g}=i.useContext(Q),y=!1;if("string"===typeof u&&Te.test(u)&&(n=u,Ie))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=P(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(iN){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;X()||h(!1);let{basename:r,navigator:s}=i.useContext(Q),{hash:o,pathname:a,search:c}=ne(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:U([r,a])),s.createHref({pathname:l,search:c,hash:o})}(u,{relative:s}),w=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c}=void 0===t?{}:t,l=te(),u=Z(),h=ne(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:m(u)===m(h);l(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:c})}}),[u,l,h,r,s,n,e,o,a,c])}(u,{replace:a,state:c,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:f});return i.createElement("a",we({},p,{href:n||v,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:l}))}));var Ce,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));const Ne=n.p+"static/media/logo.6521ee8dd0b9223ba3b5.png",Ae=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ae(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new De;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pe=function(e){return function(e){const t=Ae(e);return Re.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Oe=function(e){try{return Re.decodeString(e,!0)}catch(iN){console.error("base64Decode failed: ",iN)}return null};function Le(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Le(e[n],t[n]));return e}const Me=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Fe=()=>{try{return Me()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(iN){return}const t=e&&Oe(e[1]);return t&&JSON.parse(t)})()}catch(iN){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(iN))}},Ue=()=>{var e;return null===(e=Fe())||void 0===e?void 0:e.config};class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ze(){var e;const t=null===(e=Fe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(iN){return!1}}function Be(){return"object"===typeof self&&self.self===self}function qe(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ke(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function We(){const e=Ve();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ge(){return!ze()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"===typeof indexedDB}catch(iN){return!1}}class Qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Ye,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Qe(n,s,t)}}const Ye=/\{\$([^}]+)}/g;function $e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xe(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ze(n)&&Ze(s)){if(!Xe(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ze(e){return null!==e&&"object"===typeof e}function et(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function tt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function nt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function rt(e,t){const n=new it(e,t);return n.subscribe.bind(n)}class it{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=st),void 0===r.error&&(r.error=st),void 0===r.complete&&(r.complete=st);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(iN){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(iN){"undefined"!==typeof console&&console.error&&console.error(iN)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function st(){}function ot(e){return e&&e._delegate?e._delegate:e}class at{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ct="[DEFAULT]";class lt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new je;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(iN){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(iN){if(r)return null;throw iN}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ct})}catch(iN){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(iN){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ct?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.component?this.component.multipleInstances?e:ct:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ht=[];var dt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dt||(dt={}));const ft={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},pt=dt.INFO,mt={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},gt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=mt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class yt{constructor(e){this.name=e,this._logLevel=pt,this._logHandler=gt,this._userLogHandler=null,ht.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const vt=(e,t)=>t.some((t=>e instanceof t));let wt,bt;const _t=new WeakMap,St=new WeakMap,Et=new WeakMap,It=new WeakMap,Tt=new WeakMap;let kt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return St.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Et.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bt||(bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(At(this),n),Nt(_t.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nt(e.apply(At(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(At(this),t,...r);return Et.set(s,t.sort?t.sort():[t]),Nt(s)}}function xt(e){return"function"===typeof e?Ct(e):(e instanceof IDBTransaction&&function(e){if(St.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));St.set(e,t)}(e),vt(e,wt||(wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,kt):e)}function Nt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Nt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&_t.set(t,e)})).catch((()=>{})),Tt.set(t,e),t}(e);if(It.has(e))return It.get(e);const t=xt(e);return t!==e&&(It.set(e,t),Tt.set(t,e)),t}const At=e=>Tt.get(e);const Rt=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],Pt=new Map;function Ot(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Pt.get(t))return Pt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Rt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Pt.set(t,s),s}kt=(e=>({...e,get:(t,n,r)=>Ot(t,n)||e.get(t,n,r),has:(t,n)=>!!Ot(t,n)||e.has(t,n)}))(kt);class Lt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Mt="@firebase/app",Ft="0.10.2",Ut=new yt("@firebase/app"),jt="@firebase/app-compat",Vt="@firebase/analytics-compat",zt="@firebase/analytics",Bt="@firebase/app-check-compat",qt="@firebase/app-check",Kt="@firebase/auth",Wt="@firebase/auth-compat",Gt="@firebase/database",Ht="@firebase/database-compat",Qt="@firebase/functions",Jt="@firebase/functions-compat",Yt="@firebase/installations",$t="@firebase/installations-compat",Xt="@firebase/messaging",Zt="@firebase/messaging-compat",en="@firebase/performance",tn="@firebase/performance-compat",nn="@firebase/remote-config",rn="@firebase/remote-config-compat",sn="@firebase/storage",on="@firebase/storage-compat",an="@firebase/firestore",cn="@firebase/firestore-compat",ln="firebase",un="[DEFAULT]",hn={[Mt]:"fire-core",[jt]:"fire-core-compat",[zt]:"fire-analytics",[Vt]:"fire-analytics-compat",[qt]:"fire-app-check",[Bt]:"fire-app-check-compat",[Kt]:"fire-auth",[Wt]:"fire-auth-compat",[Gt]:"fire-rtdb",[Ht]:"fire-rtdb-compat",[Qt]:"fire-fn",[Jt]:"fire-fn-compat",[Yt]:"fire-iid",[$t]:"fire-iid-compat",[Xt]:"fire-fcm",[Zt]:"fire-fcm-compat",[en]:"fire-perf",[tn]:"fire-perf-compat",[nn]:"fire-rc",[rn]:"fire-rc-compat",[sn]:"fire-gcs",[on]:"fire-gcs-compat",[an]:"fire-fst",[cn]:"fire-fst-compat","fire-js":"fire-js",[ln]:"fire-js-all"},dn=new Map,fn=new Map,pn=new Map;function mn(e,t){try{e.container.addComponent(t)}catch(iN){Ut.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),iN)}}function gn(e,t){e.container.addOrOverwriteComponent(t)}function yn(e){const t=e.name;if(pn.has(t))return Ut.debug("There were multiple attempts to register component ".concat(t,".")),!1;pn.set(t,e);for(const n of dn.values())mn(n,e);for(const n of fn.values())mn(n,e);return!0}function vn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function wn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:un;vn(e,t).clearInstance(n)}function bn(e){return void 0!==e.options}function _n(e){return void 0!==e.settings}function Sn(){pn.clear()}const En=new Je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class In{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new at("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}class Tn extends In{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Dn(Mt,Ft,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Rn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw En.create("server-app-deleted")}}const kn="10.11.1";function Cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:un,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw En.create("bad-app-name",{appName:String(i)});if(n||(n=Ue()),!n)throw En.create("no-options");const s=dn.get(i);if(s){if(Xe(n,s.options)&&Xe(r,s.config))return s;throw En.create("duplicate-app",{appName:i})}const o=new ut(i);for(const c of pn.values())o.addComponent(c);const a=new In(n,r,o);return dn.set(i,a),a}function xn(e,t){if(Be())throw En.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=bn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw En.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=fn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new ut(i);for(const l of pn.values())a.addComponent(l);const c=new Tn(n,t,i,a);return fn.set(i,c),c}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un;const t=dn.get(e);if(!t&&e===un&&Ue())return Cn();if(!t)throw En.create("no-app",{appName:e});return t}function An(){return Array.from(dn.values())}async function Rn(e){let t=!1;const n=e.name;if(dn.has(n))t=!0,dn.delete(n);else if(fn.has(n)){e.decRefCount()<=0&&(fn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Dn(e,t,n){var r;let i=null!==(r=hn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ut.warn(e.join(" "))}yn(new at("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Pn(e,t){if(null!==e&&"function"!==typeof e)throw En.create("invalid-log-argument");!function(e,t){for(const n of ht){let r=null;t&&t.level&&(r=ft[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:dt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function On(e){var t;t=e,ht.forEach((e=>{e.setLogLevel(t)}))}const Ln="firebase-heartbeat-database",Mn=1,Fn="firebase-heartbeat-store";let Un=null;function jn(){return Un||(Un=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Nt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Nt(o.result),e.oldVersion,e.newVersion,Nt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ln,Mn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Fn)}catch(iN){console.warn(iN)}}}).catch((e=>{throw En.create("idb-open",{originalErrorMessage:e.message})}))),Un}async function Vn(e,t){try{const n=(await jn()).transaction(Fn,"readwrite"),r=n.objectStore(Fn);await r.put(t,zn(e)),await n.done}catch(iN){if(iN instanceof Qe)Ut.warn(iN.message);else{const t=En.create("idb-set",{originalErrorMessage:null===iN||void 0===iN?void 0:iN.message});Ut.warn(t.message)}}}function zn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Bn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Kn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=qn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Wn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Pe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function qn(){return(new Date).toISOString().substring(0,10)}class Kn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!He()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await jn()).transaction(Fn),n=await t.objectStore(Fn).get(zn(e));return await t.done,n}catch(iN){if(iN instanceof Qe)Ut.warn(iN.message);else{const t=En.create("idb-get",{originalErrorMessage:null===iN||void 0===iN?void 0:iN.message});Ut.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wn(e){return Pe(JSON.stringify({version:2,heartbeats:e})).length}var Gn;Gn="",yn(new at("platform-logger",(e=>new Lt(e)),"PRIVATE")),yn(new at("heartbeat",(e=>new Bn(e)),"PRIVATE")),Dn(Mt,Ft,Gn),Dn(Mt,Ft,"esm2017"),Dn("fire-js","");class Hn{constructor(e,t){this._delegate=e,this.firebase=t,mn(e,new at("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Rn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){mn(this._delegate,e)}_addOrOverwriteComponent(e){gn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qn=new Je("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Jn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Cn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($e(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Dn,setLogLevel:On,onLog:Pn,apps:null,SDK_VERSION:kn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(yn(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Qn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Le(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$e(n,e=e||un))throw Qn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Hn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Le(n,e)},createSubscribe:rt,ErrorFactory:Je,deepExtend:Le}),n}(),Yn=new yt("@firebase/app-compat");if(Be()&&void 0!==self.firebase){Yn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Yn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $n=Jn;!function(e){Dn("@firebase/app-compat","0.2.32",e)}();$n.registerVersion("firebase","10.11.1","app-compat");var Xn,Zn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},er={},tr=tr||{},nr=Zn||self;function rr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ir(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var sr="closure_uid_"+(1e9*Math.random()>>>0),or=0;function ar(e,t,n){return e.call.apply(e.bind,arguments)}function cr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function lr(e,t,n){return(lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ar:cr).apply(null,arguments)}function ur(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function hr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function dr(){this.s=this.s,this.o=this.o}dr.prototype.s=!1,dr.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,sr)&&e[sr]||(e[sr]=++or))},dr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function pr(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function mr(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(rr(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function gr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}gr.prototype.h=function(){this.defaultPrevented=!0};var yr=function(){if(!nr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};nr.addEventListener("test",e,t),nr.removeEventListener("test",e,t)}catch(n){}return e}();function vr(e){return/^[\s\xa0]*$/.test(e)}function wr(){var e=nr.navigator;return e&&(e=e.userAgent)?e:""}function br(e){return-1!=wr().indexOf(e)}function _r(e){return _r[" "](e),e}_r[" "]=function(){};var Sr,Er,Ir=br("Opera"),Tr=br("Trident")||br("MSIE"),kr=br("Edge"),Cr=kr||Tr,xr=br("Gecko")&&!(-1!=wr().toLowerCase().indexOf("webkit")&&!br("Edge"))&&!(br("Trident")||br("MSIE"))&&!br("Edge"),Nr=-1!=wr().toLowerCase().indexOf("webkit")&&!br("Edge");function Ar(){var e=nr.document;return e?e.documentMode:void 0}e:{var Rr="",Dr=function(){var e=wr();return xr?/rv:([^\);]+)(\)|;)/.exec(e):kr?/Edge\/([\d\.]+)/.exec(e):Tr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Nr?/WebKit\/(\S+)/.exec(e):Ir?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Dr&&(Rr=Dr?Dr[1]:""),Tr){var Pr=Ar();if(null!=Pr&&Pr>parseFloat(Rr)){Sr=String(Pr);break e}}Sr=Rr}if(nr.document&&Tr){var Or=Ar();Er=Or||(parseInt(Sr,10)||void 0)}else Er=void 0;var Lr=Er;function Mr(e,t){if(gr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(xr){e:{try{_r(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Mr.$.h.call(this)}}hr(Mr,gr);var Fr={2:"touch",3:"pen",4:"mouse"};Mr.prototype.h=function(){Mr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ur="closure_listenable_"+(1e6*Math.random()|0),jr=0;function Vr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++jr,this.fa=this.ia=!1}function zr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Br(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function qr(e){const t={};for(const n in e)t[n]=e[n];return t}const Kr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Kr.length;t++)n=Kr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Gr(e){this.src=e,this.g={},this.h=0}function Hr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=fr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(zr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Qr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Gr.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Qr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Vr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Jr="closure_lm_"+(1e6*Math.random()|0),Yr={};function $r(e,t,n,r,i){if(r&&r.once)return Zr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)$r(e,t[s],n,r,i);return null}return n=oi(n),e&&e[Ur]?e.O(t,n,ir(r)?!!r.capture:!!r,i):Xr(e,t,n,!1,r,i)}function Xr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ir(i)?!!i.capture:!!i,a=ii(e);if(a||(e[Jr]=a=new Gr(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ri;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)yr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ni(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Zr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Zr(e,t[s],n,r,i);return null}return n=oi(n),e&&e[Ur]?e.P(t,n,ir(r)?!!r.capture:!!r,i):Xr(e,t,n,!0,r,i)}function ei(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ei(e,t[s],n,r,i);else r=ir(r)?!!r.capture:!!r,n=oi(n),e&&e[Ur]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Qr(s=e.g[t],n,r,i))&&(zr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ii(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Qr(t,n,r,i)),(n=-1<e?t[e]:null)&&ti(n))}function ti(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ur])Hr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ni(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ii(t))?(Hr(n,e),0==n.h&&(n.src=null,t[Jr]=null)):zr(e)}}}function ni(e){return e in Yr?Yr[e]:Yr[e]="on"+e}function ri(e,t){if(e.fa)e=!0;else{t=new Mr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ti(e),e=n.call(r,t)}return e}function ii(e){return(e=e[Jr])instanceof Gr?e:null}var si="__closure_events_fn_"+(1e9*Math.random()>>>0);function oi(e){return"function"===typeof e?e:(e[si]||(e[si]=function(t){return e.handleEvent(t)}),e[si])}function ai(){dr.call(this),this.i=new Gr(this),this.S=this,this.J=null}function ci(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new gr(t,e);else if(t instanceof gr)t.target=t.target||e;else{var i=t;Wr(t=new gr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=li(o,r,!0,t)&&i}if(i=li(o=t.g=e,r,!0,t)&&i,i=li(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=li(o=t.g=n[s],r,!1,t)&&i}function li(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Hr(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}hr(ai,dr),ai.prototype[Ur]=!0,ai.prototype.removeEventListener=function(e,t,n,r){ei(this,e,t,n,r)},ai.prototype.N=function(){if(ai.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zr(n[r]);delete t.g[e],t.h--}}this.J=null},ai.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ai.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ui=nr.JSON.stringify;function hi(){var e=vi;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var di=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new fi),(e=>e.reset()));class fi{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function mi(e){nr.setTimeout((()=>{throw e}),0)}let gi,yi=!1,vi=new class{constructor(){this.h=this.g=null}add(e,t){const n=di.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},wi=()=>{const e=nr.Promise.resolve(void 0);gi=()=>{e.then(bi)}};var bi=()=>{for(var e;e=hi();){try{e.h.call(e.g)}catch(n){mi(n)}var t=di;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}yi=!1};function _i(e,t){ai.call(this),this.h=e||1,this.g=t||nr,this.j=lr(this.qb,this),this.l=Date.now()}function Si(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ei(e,t,n){if("function"===typeof e)n&&(e=lr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=lr(e.handleEvent,e)}return 2147483647<Number(t)?-1:nr.setTimeout(e,t||0)}function Ii(e){e.g=Ei((()=>{e.g=null,e.i&&(e.i=!1,Ii(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}hr(_i,ai),(Xn=_i.prototype).ga=!1,Xn.T=null,Xn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ci(this,"tick"),this.ga&&(Si(this),this.start()))}},Xn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xn.N=function(){_i.$.N.call(this),Si(this),delete this.g};class Ti extends dr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ii(this)}N(){super.N(),this.g&&(nr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(e){dr.call(this),this.h=e,this.g={}}hr(ki,dr);var Ci=[];function xi(e,t,n,r){Array.isArray(n)||(n&&(Ci[0]=n.toString()),n=Ci);for(var i=0;i<n.length;i++){var s=$r(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ni(e){Br(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ti(e)}),e),e.g={}}function Ai(){this.g=!0}function Ri(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ui(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}ki.prototype.N=function(){ki.$.N.call(this),Ni(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ai.prototype.Ea=function(){this.g=!1},Ai.prototype.info=function(){};var Di={},Pi=null;function Oi(){return Pi=Pi||new ai}function Li(e){gr.call(this,Di.Ta,e)}function Mi(e){const t=Oi();ci(t,new Li(t))}function Fi(e,t){gr.call(this,Di.STAT_EVENT,e),this.stat=t}function Ui(e){const t=Oi();ci(t,new Fi(t,e))}function ji(e,t){gr.call(this,Di.Ua,e),this.size=t}function Vi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return nr.setTimeout((function(){e()}),t)}Di.Ta="serverreachability",hr(Li,gr),Di.STAT_EVENT="statevent",hr(Fi,gr),Di.Ua="timingevent",hr(ji,gr);var zi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Bi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qi(){}function Ki(e){return e.h||(e.h=e.i())}function Wi(){}qi.prototype.h=null;var Gi,Hi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qi(){gr.call(this,"d")}function Ji(){gr.call(this,"c")}function Yi(){}function $i(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ki(this),this.P=Zi,e=Cr?125:void 0,this.V=new _i(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xi}function Xi(){this.i=null,this.g="",this.h=!1}hr(Qi,gr),hr(Ji,gr),hr(Yi,qi),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},Gi=new Yi;var Zi=45e3,es={},ts={};function ns(e,t,n){e.L=1,e.A=_s(gs(t)),e.u=n,e.S=!0,rs(e,null)}function rs(e,t){e.G=Date.now(),as(e),e.B=gs(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Os(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Xi,e.g=Mo(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Ti(lr(e.Pa,e,e.g),e.O)),xi(e.U,e.g,"readystatechange",e.nb),t=e.I?qr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Mi(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function is(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ss(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=os(e,n),r==ts){4==t&&(e.s=4,Ui(14),i=!1),Ri(e.j,e.m,null,"[Incomplete Response]");break}if(r==es){e.s=4,Ui(15),Ri(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ri(e.j,e.m,r,null),ds(e,r)}is(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ui(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xo(t),t.M=!0,Ui(11))):(Ri(e.j,e.m,n,"[Invalid Chunked Response]"),hs(e),us(e))}function os(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ts:(n=Number(t.substring(n,r)),isNaN(n)?es:(r+=1)+n>t.length?ts:(t=t.slice(r,r+n),e.o=r+n,t))}function as(e){e.Y=Date.now()+e.P,cs(e,e.P)}function cs(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Vi(lr(e.lb,e),t)}function ls(e){e.C&&(nr.clearTimeout(e.C),e.C=null)}function us(e){0==e.l.H||e.J||Ro(e.l,e)}function hs(e){ls(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Si(e.V),Ni(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ds(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||zs(n.i,e)))if(!e.K&&zs(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ao(n),bo(n)}Co(n),Ui(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Vi(lr(n.ib,n),6e3));if(1>=Vs(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else Po(n,11)}else if((e.K||n.g==e)&&Ao(n),!vr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Bs(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,bs(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Lo(r,r.J?r.pa:null,r.Y),o.K){qs(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(ls(a),as(a)),r.g=o}else ko(r);0<n.j.length&&So(n)}else"stop"!=l[0]&&"close"!=l[0]||Po(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Po(n,7):wo(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}Mi()}catch(l){}}function fs(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(rr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(rr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(rr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Xn=$i.prototype).setTimeout=function(e){this.P=e},Xn.nb=function(e){e=e.target;const t=this.M;t&&3==fo(e)?t.l():this.Pa(e)},Xn.Pa=function(e){try{if(e==this.g)e:{const u=fo(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Cr||this.g&&(this.h.h||this.g.ja()||po(this.g)))){this.J||4!=u||7==t||Mi(),ls(this);var n=this.g.da();this.ca=n;t:if(is(this)){var r=po(this.g);e="";var i=r.length,s=4==fo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hs(this),us(this);var o="";break t}this.h.i=new nr.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vr(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,Ui(12),hs(this),us(this);break e}Ri(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ds(this,n)}this.S?(ss(this,u,o),Cr&&this.i&&3==u&&(xi(this.U,this.V,"tick",this.mb),this.V.start())):(Ri(this.j,this.m,o,null),ds(this,o)),4==u&&hs(this),this.i&&!this.J&&(4==u?Ro(this.l,this):(this.i=!1,as(this)))}else(function(e){const t={};e=(e.g&&2<=fo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(vr(e[r]))continue;var n=pi(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ui(12)):(this.s=0,Ui(13)),hs(this),us(this)}}}catch(u){}},Xn.mb=function(){if(this.g){var e=fo(this.g),t=this.g.ja();this.o<t.length&&(ls(this),ss(this,e,t),this.i&&4!=e&&as(this))}},Xn.cancel=function(){this.J=!0,hs(this)},Xn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Mi(),Ui(17)),hs(this),this.s=2,us(this)):cs(this,this.Y-e)};var ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ms(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ms){this.h=e.h,ys(this,e.j),this.s=e.s,this.g=e.g,vs(this,e.m),this.l=e.l;var t=e.i,n=new As;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ws(this,n),this.o=e.o}else e&&(t=String(e).match(ps))?(this.h=!1,ys(this,t[1]||"",!0),this.s=Ss(t[2]||""),this.g=Ss(t[3]||"",!0),vs(this,t[4]),this.l=Ss(t[5]||"",!0),ws(this,t[6]||"",!0),this.o=Ss(t[7]||"")):(this.h=!1,this.i=new As(null,this.h))}function gs(e){return new ms(e)}function ys(e,t,n){e.j=n?Ss(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ws(e,t,n){t instanceof As?(e.i=t,function(e,t){t&&!e.j&&(Rs(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ds(this,t),Os(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Es(t,xs)),e.i=new As(t,e.h))}function bs(e,t,n){e.i.set(t,n)}function _s(e){return bs(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ss(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Es(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Is),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Is(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ms.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Es(t,Ts,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Es(t,Ts,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Es(n,"/"==n.charAt(0)?Cs:ks,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Es(n,Ns)),e.join("")};var Ts=/[#\/\?@]/g,ks=/[#\?:]/g,Cs=/[#\?]/g,xs=/[#\?@]/g,Ns=/#/g;function As(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rs(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ds(e,t){Rs(e),t=Ls(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ps(e,t){return Rs(e),t=Ls(e,t),e.g.has(t)}function Os(e,t,n){Ds(e,t),0<n.length&&(e.i=null,e.g.set(Ls(e,t),pr(n)),e.h+=n.length)}function Ls(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xn=As.prototype).add=function(e,t){Rs(this),this.i=null,e=Ls(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xn.forEach=function(e,t){Rs(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Xn.ta=function(){Rs(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Xn.Z=function(e){Rs(this);let t=[];if("string"===typeof e)Ps(this,e)&&(t=t.concat(this.g.get(Ls(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Xn.set=function(e,t){return Rs(this),this.i=null,Ps(this,e=Ls(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Xn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ms=class{constructor(e,t){this.g=e,this.map=t}};function Fs(e){this.l=e||Us,nr.PerformanceNavigationTiming?e=0<(e=nr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(nr.g&&nr.g.Ka&&nr.g.Ka()&&nr.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Us=10;function js(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vs(e){return e.h?1:e.g?e.g.size:0}function zs(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Bs(e,t){e.g?e.g.add(t):e.h=t}function qs(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ks(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return pr(e.i)}Fs.prototype.cancel=function(){if(this.i=Ks(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ws,Gs=class{stringify(e){return nr.JSON.stringify(e,void 0)}parse(e){return nr.JSON.parse(e,void 0)}};function Hs(){this.g=new Gs}function Qs(e,t,n){const r=n||"";try{fs(e,(function(e,n){let i=e;ir(e)&&(i=ui(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(iN){throw t.push(r+"type="+encodeURIComponent("_badmap")),iN}}function Js(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Ys(e){this.l=e.ec||null,this.j=e.ob||!1}function $s(e,t){ai.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hr(Ys,qi),Ys.prototype.g=function(){return new $s(this.l,this.j)},Ys.prototype.i=(Ws={},function(){return Ws}),hr($s,ai);var Xs=0;function Zs(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function eo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,to(e)}function to(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xn=$s.prototype).open=function(e,t){if(this.readyState!=Xs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,to(this)},Xn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||nr).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Xn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,eo(this)),this.readyState=Xs},Xn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof nr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zs(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Xn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?eo(this):to(this),3==this.readyState&&Zs(this)}},Xn.Za=function(e){this.g&&(this.response=this.responseText=e,eo(this))},Xn.Ya=function(e){this.g&&(this.response=e,eo(this))},Xn.ka=function(){this.g&&eo(this)},Xn.setRequestHeader=function(e,t){this.v.append(e,t)},Xn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($s.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var no=nr.JSON.parse;function ro(e){ai.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=io,this.L=this.M=!1}hr(ro,ai);var io="",so=/^https?$/i,oo=["POST","PUT"];function ao(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,co(e),uo(e)}function co(e){e.F||(e.F=!0,ci(e,"complete"),ci(e,"error"))}function lo(e){if(e.h&&"undefined"!=typeof tr&&(!e.C[1]||4!=fo(e)||2!=e.da()))if(e.v&&4==fo(e))Ei(e.La,0,e);else if(ci(e,"readystatechange"),4==fo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(ps)[1]||null;!i&&nr.self&&nr.self.location&&(i=nr.self.location.protocol.slice(0,-1)),r=!so.test(i?i.toLowerCase():"")}n=r}if(n)ci(e,"complete"),ci(e,"success");else{e.m=6;try{var s=2<fo(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",co(e)}}finally{uo(e)}}}function uo(e,t){if(e.g){ho(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ci(e,"ready");try{n.onreadystatechange=r}catch(iN){}}}function ho(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(nr.clearTimeout(e.A),e.A=null)}function fo(e){return e.g?e.g.readyState:0}function po(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case io:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(_a){return null}}function mo(e){let t="";return Br(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function go(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=mo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bs(e,t,n))}function yo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vo(e){this.Ga=0,this.j=[],this.l=new Ai,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yo("baseRetryDelayMs",5e3,e),this.hb=yo("retryDelaySeedMs",1e4,e),this.eb=yo("forwardChannelMaxRetries",2,e),this.xa=yo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Fs(e&&e.concurrentRequestLimit),this.Ja=new Hs,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wo(e){if(_o(e),3==e.H){var t=e.W++,n=gs(e.I);if(bs(n,"SID",e.K),bs(n,"RID",t),bs(n,"TYPE","terminate"),Io(e,n),(t=new $i(e,e.l,t)).L=2,t.A=_s(gs(n)),n=!1,nr.navigator&&nr.navigator.sendBeacon)try{n=nr.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&nr.Image&&((new Image).src=t.A,n=!0),n||(t.g=Mo(t.l,null),t.g.ha(t.A)),t.G=Date.now(),as(t)}Oo(e)}function bo(e){e.g&&(xo(e),e.g.cancel(),e.g=null)}function _o(e){bo(e),e.u&&(nr.clearTimeout(e.u),e.u=null),Ao(e),e.i.cancel(),e.m&&("number"===typeof e.m&&nr.clearTimeout(e.m),e.m=null)}function So(e){if(!js(e.i)&&!e.m){e.m=!0;var t=e.Na;gi||wi(),yi||(gi(),yi=!0),vi.add(t,e),e.C=0}}function Eo(e,t){var n;n=t?t.m:e.W++;const r=gs(e.I);bs(r,"SID",e.K),bs(r,"RID",n),bs(r,"AID",e.V),Io(e,r),e.o&&e.s&&go(r,e.o,e.s),n=new $i(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=To(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Bs(e.i,n),ns(n,r,t)}function Io(e,t){e.na&&Br(e.na,(function(e,n){bs(t,n,e)})),e.h&&fs({},(function(e,n){bs(t,n,e)}))}function To(e,t,n){n=Math.min(e.j.length,n);var r=e.h?lr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Qs(a,e,"req"+n+"_")}catch(Uc){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function ko(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;gi||wi(),yi||(gi(),yi=!0),vi.add(t,e),e.A=0}}function Co(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Vi(lr(e.Ma,e),Do(e,e.A)),e.A++,!0)}function xo(e){null!=e.B&&(nr.clearTimeout(e.B),e.B=null)}function No(e){e.g=new $i(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=gs(e.wa);bs(t,"RID","rpc"),bs(t,"SID",e.K),bs(t,"AID",e.V),bs(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&bs(t,"TO",e.qa),bs(t,"TYPE","xmlhttp"),Io(e,t),e.o&&e.s&&go(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=_s(gs(t)),n.u=null,n.S=!0,rs(n,e)}function Ao(e){null!=e.v&&(nr.clearTimeout(e.v),e.v=null)}function Ro(e,t){var n=null;if(e.g==t){Ao(e),xo(e),e.g=null;var r=2}else{if(!zs(e.i,t))return;n=t.F,qs(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ci(r=Oi(),new ji(r,n)),So(e)}else ko(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Vs(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Vi(lr(e.Na,e,t),Do(e,e.C)),e.C++,!0))}(e,t)||2==r&&Co(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Po(e,5);break;case 4:Po(e,10);break;case 3:Po(e,6);break;default:Po(e,2)}}function Do(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Po(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=lr(e.pb,e);n||(n=new ms("//www.google.com/images/cleardot.gif"),nr.location&&"http"==nr.location.protocol||ys(n,"https"),_s(n)),function(e,t){const n=new Ai;if(nr.Image){const r=new Image;r.onload=ur(Js,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ur(Js,n,r,"TestLoadImage: error",!1,t),r.onabort=ur(Js,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ur(Js,n,r,"TestLoadImage: timeout",!1,t),nr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ui(2);e.H=0,e.h&&e.h.za(t),Oo(e),_o(e)}function Oo(e){if(e.H=0,e.ma=[],e.h){const t=Ks(e.i);0==t.length&&0==e.j.length||(mr(e.ma,t),mr(e.ma,e.j),e.i.i.length=0,pr(e.j),e.j.length=0),e.h.ya()}}function Lo(e,t,n){var r=n instanceof ms?gs(n):new ms(n);if(""!=r.g)t&&(r.g=t+"."+r.g),vs(r,r.m);else{var i=nr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ms(null);r&&ys(s,r),t&&(s.g=t),i&&vs(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&bs(r,n,t),bs(r,"VER",e.ra),Io(e,r),r}function Mo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ro(new Ys({ob:n})):new ro(e.va)).Oa(e.J),t}function Fo(){}function Uo(){if(Tr&&!(10<=Number(Lr)))throw Error("Environmental error: no available transport.")}function jo(e,t){ai.call(this),this.g=new vo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!vr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Bo(this)}function Vo(e){Qi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zo(){Ji.call(this),this.status=1}function Bo(e){this.g=e}function qo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ko(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Wo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Xn=ro.prototype).Oa=function(e){this.M=e},Xn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gi.g(),this.C=this.u?Ki(this.u):Ki(Gi),this.g.onreadystatechange=lr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ao(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=nr.FormData&&e instanceof nr.FormData,!(0<=fr(oo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{ho(this),0<this.B&&((this.L=function(e){return Tr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lr(this.ua,this)):this.A=Ei(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ao(this,s)}},Xn.ua=function(){"undefined"!=typeof tr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},Xn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ci(this,"complete"),ci(this,"abort"),uo(this))},Xn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uo(this,!0)),ro.$.N.call(this)},Xn.La=function(){this.s||(this.G||this.v||this.l?lo(this):this.kb())},Xn.kb=function(){lo(this)},Xn.isActive=function(){return!!this.g},Xn.da=function(){try{return 2<fo(this)?this.g.status:-1}catch(Ws){return-1}},Xn.ja=function(){try{return this.g?this.g.responseText:""}catch(Ws){return""}},Xn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),no(t)}},Xn.Ia=function(){return this.m},Xn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Xn=vo.prototype).ra=8,Xn.H=1,Xn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new $i(this,this.l,e);let s=this.s;if(this.U&&(s?(s=qr(s),Wr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=To(this,i,t),bs(n=gs(this.I),"RID",e),bs(n,"CVER",22),this.F&&bs(n,"X-HTTP-Session-Id",this.F),Io(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(mo(s)))+"&"+t:this.o&&go(n,this.o,s)),Bs(this.i,i),this.bb&&bs(n,"TYPE","init"),this.P?(bs(n,"$req",t),bs(n,"SID","null"),i.aa=!0,ns(i,n,null)):ns(i,n,t),this.H=2}}else 3==this.H&&(e?Eo(this,e):0==this.j.length||js(this.i)||Eo(this))},Xn.Ma=function(){if(this.u=null,No(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Vi(lr(this.jb,this),e)}},Xn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ui(10),bo(this),No(this))},Xn.ib=function(){null!=this.v&&(this.v=null,bo(this),Co(this),Ui(19))},Xn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ui(2)):(this.l.info("Failed to ping google.com"),Ui(1))},Xn.isActive=function(){return!!this.h&&this.h.isActive(this)},(Xn=Fo.prototype).Ba=function(){},Xn.Aa=function(){},Xn.za=function(){},Xn.ya=function(){},Xn.isActive=function(){return!0},Xn.Va=function(){},Uo.prototype.g=function(e,t){return new jo(e,t)},hr(jo,ai),jo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ui(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Lo(e,null,e.Y),So(e)},jo.prototype.close=function(){wo(this.g)},jo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ui(e),e=n);t.j.push(new Ms(t.fb++,e)),3==t.H&&So(t)},jo.prototype.N=function(){this.g.h=null,delete this.j,wo(this.g),delete this.g,jo.$.N.call(this)},hr(Vo,Qi),hr(zo,Ji),hr(Bo,Fo),Bo.prototype.Ba=function(){ci(this.g,"a")},Bo.prototype.Aa=function(e){ci(this.g,new Vo(e))},Bo.prototype.za=function(e){ci(this.g,new zo)},Bo.prototype.ya=function(){ci(this.g,"b")},hr(qo,(function(){this.blockSize=-1})),qo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},qo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ko(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ko(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ko(this,r),i=0;break}}this.h=i,this.i+=t},qo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Go={};function Ho(e){return-128<=e&&128>e?function(e,t){var n=Go;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Wo([0|e],0>e?-1:0)})):new Wo([0|e],0>e?-1:0)}function Qo(e){if(isNaN(e)||!isFinite(e))return Yo;if(0>e)return ta(Qo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Jo;return new Wo(t,0)}var Jo=4294967296,Yo=Ho(0),$o=Ho(1),Xo=Ho(16777216);function Zo(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ea(e){return-1==e.h}function ta(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Wo(n,~e.h).add($o)}function na(e,t){return e.add(ta(t))}function ra(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ia(e,t){this.g=e,this.h=t}function sa(e,t){if(Zo(t))throw Error("division by zero");if(Zo(e))return new ia(Yo,Yo);if(ea(e))return t=sa(ta(e),t),new ia(ta(t.g),ta(t.h));if(ea(t))return t=sa(e,ta(t)),new ia(ta(t.g),t.h);if(30<e.g.length){if(ea(e)||ea(t))throw Error("slowDivide_ only works with positive integers.");for(var n=$o,r=t;0>=r.X(e);)n=oa(n),r=oa(r);var i=aa(n,1),s=aa(r,1);for(r=aa(r,2),n=aa(n,2);!Zo(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=aa(r,1),n=aa(n,1)}return t=na(e,i.R(t)),new ia(i,t)}for(i=Yo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Qo(n)).R(t);ea(o)||0<o.X(e);)o=(s=Qo(n-=r)).R(t);Zo(s)&&(s=$o),i=i.add(s),e=na(e,o)}return new ia(i,e)}function oa(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Wo(n,e.h)}function aa(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Wo(i,e.h)}(Xn=Wo.prototype).ea=function(){if(ea(this))return-ta(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Jo+r)*t,t*=Jo}return e},Xn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Zo(this))return"0";if(ea(this))return"-"+ta(this).toString(e);for(var t=Qo(Math.pow(e,6)),n=this,r="";;){var i=sa(n,t).g,s=((0<(n=na(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Zo(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Xn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Xn.X=function(e){return ea(e=na(this,e))?-1:Zo(e)?0:1},Xn.abs=function(){return ea(this)?ta(this):this},Xn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Wo(n,-2147483648&n[n.length-1]?-1:0)},Xn.R=function(e){if(Zo(this)||Zo(e))return Yo;if(ea(this))return ea(e)?ta(this).R(ta(e)):ta(ta(this).R(e));if(ea(e))return ta(this.R(ta(e)));if(0>this.X(Xo)&&0>e.X(Xo))return Qo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,ra(n,2*r+2*i),n[2*r+2*i+1]+=s*c,ra(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ra(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ra(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Wo(n,0)},Xn.gb=function(e){return sa(this,e).h},Xn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Wo(n,this.h&e.h)},Xn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Wo(n,this.h|e.h)},Xn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Wo(n,this.h^e.h)},Uo.prototype.createWebChannel=Uo.prototype.g,jo.prototype.send=jo.prototype.u,jo.prototype.open=jo.prototype.m,jo.prototype.close=jo.prototype.close,zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,Bi.COMPLETE="complete",Wi.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",ai.prototype.listen=ai.prototype.O,ro.prototype.listenOnce=ro.prototype.P,ro.prototype.getLastError=ro.prototype.Sa,ro.prototype.getLastErrorCode=ro.prototype.Ia,ro.prototype.getStatus=ro.prototype.da,ro.prototype.getResponseJson=ro.prototype.Wa,ro.prototype.getResponseText=ro.prototype.ja,ro.prototype.send=ro.prototype.ha,ro.prototype.setWithCredentials=ro.prototype.Oa,qo.prototype.digest=qo.prototype.l,qo.prototype.reset=qo.prototype.reset,qo.prototype.update=qo.prototype.j,Wo.prototype.add=Wo.prototype.add,Wo.prototype.multiply=Wo.prototype.R,Wo.prototype.modulo=Wo.prototype.gb,Wo.prototype.compare=Wo.prototype.X,Wo.prototype.toNumber=Wo.prototype.ea,Wo.prototype.toString=Wo.prototype.toString,Wo.prototype.getBits=Wo.prototype.D,Wo.fromNumber=Qo,Wo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return ta(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Qo(Math.pow(n,8)),i=Yo,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Qo(Math.pow(n,o)),i=i.R(o).add(Qo(a))):i=(i=i.R(r)).add(Qo(a))}return i};var ca=er.createWebChannelTransport=function(){return new Uo},la=er.getStatEventTarget=function(){return Oi()},ua=er.ErrorCode=zi,ha=er.EventType=Bi,da=er.Event=Di,fa=er.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pa=er.FetchXmlHttpFactory=Ys,ma=er.WebChannel=Wi,ga=er.XhrIo=ro,ya=er.Md5=qo,va=er.Integer=Wo;const wa="@firebase/firestore";class ba{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ba.UNAUTHENTICATED=new ba(null),ba.GOOGLE_CREDENTIALS=new ba("google-credentials-uid"),ba.FIRST_PARTY=new ba("first-party-uid"),ba.MOCK_USER=new ba("mock-user");let _a="10.11.1";const Sa=new yt("@firebase/firestore");function Ea(){return Sa.logLevel}function Ia(e){if(Sa.logLevel<=dt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ca);Sa.debug("Firestore (".concat(_a,"): ").concat(e),...i)}}function Ta(e){if(Sa.logLevel<=dt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ca);Sa.error("Firestore (".concat(_a,"): ").concat(e),...i)}}function ka(e){if(Sa.logLevel<=dt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ca);Sa.warn("Firestore (".concat(_a,"): ").concat(e),...i)}}function Ca(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(_a,") INTERNAL ASSERTION FAILED: ")+e;throw Ta(t),new Error(t)}function Na(e,t){e||xa()}function Aa(e,t){return e}const Ra={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Da extends Qe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Pa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Oa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class La{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ba.UNAUTHENTICATED)))}shutdown(){}}class Ma{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Fa{constructor(e){this.t=e,this.currentUser=ba.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Pa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ia("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ia("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ia("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Na("string"==typeof t.accessToken),new Oa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Na(null===e||"string"==typeof e),new ba(e)}}class Ua{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ba.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ja{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Ua(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ba.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Va{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class za{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ia("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ia("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ia("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ia("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Na("string"==typeof e.token),this.R=e.token,new Va(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ba(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class qa{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ba(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ka(e,t){return e<t?-1:e>t?1:0}function Wa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Ga(e){return e+"\0"}class Ha{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Da(Ra.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ha.fromMillis(Date.now())}static fromDate(e){return Ha.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ha(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ka(this.nanoseconds,e.nanoseconds):Ka(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Qa{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qa(e)}static min(){return new Qa(new Ha(0,0))}static max(){return new Qa(new Ha(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ja{constructor(e,t,n){void 0===t?t=0:t>e.length&&xa(),void 0===n?n=e.length-t:n>e.length-t&&xa(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ja.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ja?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ya extends Ja{construct(e,t,n){return new Ya(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Da(Ra.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ya(e)}static emptyPath(){return new Ya([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xa extends Ja{construct(e,t,n){return new Xa(e,t,n)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xa.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xa(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Da(Ra.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Da(Ra.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Da(Ra.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Da(Ra.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xa(t)}static emptyPath(){return new Xa([])}}class Za{constructor(e){this.path=e}static fromPath(e){return new Za(Ya.fromString(e))}static fromName(e){return new Za(Ya.fromString(e).popFirst(5))}static empty(){return new Za(Ya.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ya.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ya.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Za(new Ya(e.slice()))}}class ec{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function tc(e){return e.fields.find((e=>2===e.kind))}function nc(e){return e.fields.filter((e=>2!==e.kind))}ec.UNKNOWN_ID=-1;class rc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ic{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ic(0,ac.min())}}function sc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Qa.fromTimestamp(1e9===r?new Ha(n+1,0):new Ha(n,r));return new ac(i,Za.empty(),t)}function oc(e){return new ac(e.readTime,e.key,-1)}class ac{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ac(Qa.min(),Za.empty(),-1)}static max(){return new ac(Qa.max(),Za.empty(),-1)}}function cc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Za.comparator(e.documentKey,t.documentKey),0!==n?n:Ka(e.largestBatchId,t.largestBatchId))}const lc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function hc(e){if(e.code!==Ra.FAILED_PRECONDITION||e.message!==lc)throw e;Ia("LocalStore","Unexpectedly lost primary lease")}class dc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xa(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof dc?t:dc.resolve(t)}catch(e){return dc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):dc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):dc.reject(t)}static resolve(e){return new dc(((t,n)=>{t(e)}))}static reject(e){return new dc(((t,n)=>{n(e)}))}static waitFor(e){return new dc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=dc.resolve(!1);for(const n of e)t=t.next((e=>e?dc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new dc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new dc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class fc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Pa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Sc(t.target.error);this.V.reject(new yc(e,n))}}static open(e,t,n,r){try{return new fc(t,e.transaction(r,n))}catch(e){throw new yc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ia("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wc(t)}}class pc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===pc.S(Ve())&&Ta("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ia("SimpleDb","Removing database:",e),bc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!He())return!1;if(pc.C())return!0;const e=Ve(),t=pc.S(e),n=0<t&&t<10,r=mc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ia("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Da(Ra.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Da(Ra.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new yc(e,r))},r.onupgradeneeded=e=>{Ia("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Ia("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=fc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),dc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ia("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class gc{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return bc(this.B.delete())}}class yc extends Da{constructor(e,t){super(Ra.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function vc(e){return"IndexedDbTransactionError"===e.name}class wc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ia("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ia("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),bc(n)}add(e){return Ia("SimpleDb","ADD",this.store.name,e,e),bc(this.store.add(e))}get(e){return bc(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ia("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ia("SimpleDb","DELETE",this.store.name,e),bc(this.store.delete(e))}count(){return Ia("SimpleDb","COUNT",this.store.name),bc(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new dc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new dc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Ia("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new dc(((n,r)=>{t.onerror=e=>{const t=Sc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new dc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new gc(i),o=t(i.primaryKey,i.value,s);if(o instanceof dc){const e=o.catch((e=>(s.done(),dc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>dc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bc(e){return new dc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Sc(e.target.error);n(t)}}))}let _c=!1;function Sc(e){const t=pc.S(Ve());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Da("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return _c||(_c=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ec{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Ia("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ia("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){vc(e)?Ia("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await hc(e)}await this.X(6e4)}))}}class Ic{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return dc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ia("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Ia("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=oc(t);cc(r,n)>0&&(n=r)})),new ac(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Tc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function kc(e){return null==e}function Cc(e){return 0===e&&1/e==-1/0}function xc(e){return"number"==typeof e&&Number.isInteger(e)&&!Cc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Nc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Rc(t)),t=Ac(e.get(n),t);return Rc(t)}function Ac(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Rc(e){return e+"\x01\x01"}function Dc(e){const t=e.length;if(Na(t>=2),2===t)return Na("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ya.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&xa(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:xa()}s=t+2}return new Ya(r)}Tc.oe=-1;const Pc=["userId","batchId"];function Oc(e,t){return[e,Nc(t)]}function Lc(e,t,n){return[e,Nc(t),n]}const Mc={},Fc=["prefixPath","collectionGroup","readTime","documentId"],Uc=["prefixPath","collectionGroup","documentId"],jc=["collectionGroup","readTime","prefixPath","documentId"],Vc=["canonicalId","targetId"],zc=["targetId","path"],Bc=["path","targetId"],qc=["collectionId","parent"],Kc=["indexId","uid"],Wc=["uid","sequenceNumber"],Gc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hc=["indexId","uid","orderedDocumentKey"],Qc=["userId","collectionPath","documentId"],Jc=["userId","collectionPath","largestBatchId"],Yc=["userId","collectionGroup","largestBatchId"],$c=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xc=[...$c,"documentOverlays"],Zc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],el=Zc,tl=[...el,"indexConfiguration","indexState","indexEntries"],nl=tl;class rl extends uc{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function il(e,t){const n=Aa(e);return pc.F(n._e,t)}function sl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ol(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function al(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cl{constructor(e,t){this.comparator=e,this.root=t||ul.EMPTY}insert(e,t){return new cl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ul.BLACK,null,null))}remove(e){return new cl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ul.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ll(this.root,e,this.comparator,!0)}}class ll{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ul{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ul.RED,this.left=null!=r?r:ul.EMPTY,this.right=null!=i?i:ul.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ul(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ul.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ul.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ul.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ul.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xa();if(this.right.isRed())throw xa();const e=this.left.check();if(e!==this.right.check())throw xa();return e+(this.isRed()?0:1)}}ul.EMPTY=null,ul.RED=!0,ul.BLACK=!1,ul.EMPTY=new class{constructor(){this.size=0}get key(){throw xa()}get value(){throw xa()}get color(){throw xa()}get left(){throw xa()}get right(){throw xa()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ul(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hl{constructor(e){this.comparator=e,this.data=new cl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dl(this.data.getIterator())}getIteratorFrom(e){return new dl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof hl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new hl(this.comparator);return t.data=e,t}}class dl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(e){return e.hasNext()?e.getNext():void 0}class pl{constructor(e){this.fields=e,e.sort(Xa.comparator)}static empty(){return new pl([])}unionWith(e){let t=new hl(Xa.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ml extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ml("Invalid base64 string: "+e):e}}(e);return new gl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new gl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ka(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gl.EMPTY_BYTE_STRING=new gl("");const yl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(e){if(Na(!!e),"string"==typeof e){let t=0;const n=yl.exec(e);if(Na(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:wl(e.seconds),nanos:wl(e.nanos)}}function wl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bl(e){return"string"==typeof e?gl.fromBase64String(e):gl.fromUint8Array(e)}function _l(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sl(e){const t=e.mapValue.fields.__previous_value__;return _l(t)?Sl(t):t}function El(e){const t=vl(e.mapValue.fields.__local_write_time__.timestampValue);return new Ha(t.seconds,t.nanos)}class Il{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Tl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Tl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Tl&&e.projectId===this.projectId&&e.database===this.database}}const kl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cl={nullValue:"NULL_VALUE"};function xl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_l(e)?4:Bl(e)?9007199254740991:10:xa()}function Nl(e,t){if(e===t)return!0;const n=xl(e);if(n!==xl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return El(e).isEqual(El(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=vl(e.timestampValue),r=vl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bl(e.bytesValue).isEqual(bl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wl(e.geoPointValue.latitude)===wl(t.geoPointValue.latitude)&&wl(e.geoPointValue.longitude)===wl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wl(e.integerValue)===wl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=wl(e.doubleValue),r=wl(t.doubleValue);return n===r?Cc(n)===Cc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Wa(e.arrayValue.values||[],t.arrayValue.values||[],Nl);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(sl(n)!==sl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Nl(n[i],r[i])))return!1;return!0}(e,t);default:return xa()}}function Al(e,t){return void 0!==(e.values||[]).find((e=>Nl(e,t)))}function Rl(e,t){if(e===t)return 0;const n=xl(e),r=xl(t);if(n!==r)return Ka(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ka(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=wl(e.integerValue||e.doubleValue),r=wl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dl(e.timestampValue,t.timestampValue);case 4:return Dl(El(e),El(t));case 5:return Ka(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bl(e),r=bl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ka(n[i],r[i]);if(0!==e)return e}return Ka(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ka(wl(e.latitude),wl(t.latitude));return 0!==n?n:Ka(wl(e.longitude),wl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Rl(n[i],r[i]);if(e)return e}return Ka(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===kl.mapValue&&t===kl.mapValue)return 0;if(e===kl.mapValue)return 1;if(t===kl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ka(r[o],s[o]);if(0!==e)return e;const t=Rl(n[r[o]],i[s[o]]);if(0!==t)return t}return Ka(r.length,s.length)}(e.mapValue,t.mapValue);default:throw xa()}}function Dl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ka(e,t);const n=vl(e),r=vl(t),i=Ka(n.seconds,r.seconds);return 0!==i?i:Ka(n.nanos,r.nanos)}function Pl(e){return Ol(e)}function Ol(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=vl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return bl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Za.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ol(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ol(e.fields[i]));return n+"}"}(e.mapValue):xa()}function Ll(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ml(e){return!!e&&"integerValue"in e}function Fl(e){return!!e&&"arrayValue"in e}function Ul(e){return!!e&&"nullValue"in e}function jl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vl(e){return!!e&&"mapValue"in e}function zl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ol(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=zl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Bl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ql(e){return"nullValue"in e?Cl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ll(Tl.empty(),Za.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:xa()}function Kl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ll(Tl.empty(),Za.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?kl:xa()}function Wl(e,t){const n=Rl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Gl(e,t){const n=Rl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Hl{constructor(e){this.value=e}static empty(){return new Hl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zl(t)}setAll(e){let t=Xa.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=zl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Vl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Vl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ol(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Hl(zl(this.value))}}function Ql(e){const t=[];return ol(e.fields,((e,n)=>{const r=new Xa([e]);if(Vl(n)){const e=Ql(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new pl(t)}class Jl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Jl(e,0,Qa.min(),Qa.min(),Qa.min(),Hl.empty(),0)}static newFoundDocument(e,t,n,r){return new Jl(e,1,t,Qa.min(),n,r,0)}static newNoDocument(e,t){return new Jl(e,2,t,Qa.min(),Qa.min(),Hl.empty(),0)}static newUnknownDocument(e,t){return new Jl(e,3,t,Qa.min(),Qa.min(),Hl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Yl{constructor(e,t){this.position=e,this.inclusive=t}}function $l(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Za.comparator(Za.fromName(o.referenceValue),n.key):Rl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Xl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nl(e.position[n],t.position[n]))return!1;return!0}class Zl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function eu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class tu{}class nu extends tu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new du(e,t,n):"array-contains"===t?new gu(e,n):"in"===t?new yu(e,n):"not-in"===t?new vu(e,n):"array-contains-any"===t?new wu(e,n):new nu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new fu(e,n):new pu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Rl(t,this.value)):null!==t&&xl(this.value)===xl(t)&&this.matchesComparison(Rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xa()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ru extends tu{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ru(e,t)}matches(e){return iu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iu(e){return"and"===e.op}function su(e){return"or"===e.op}function ou(e){return au(e)&&iu(e)}function au(e){for(const t of e.filters)if(t instanceof ru)return!1;return!0}function cu(e){if(e instanceof nu)return e.field.canonicalString()+e.op.toString()+Pl(e.value);if(ou(e))return e.filters.map((e=>cu(e))).join(",");{const t=e.filters.map((e=>cu(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function lu(e,t){return e instanceof nu?function(e,t){return t instanceof nu&&e.op===t.op&&e.field.isEqual(t.field)&&Nl(e.value,t.value)}(e,t):e instanceof ru?function(e,t){return t instanceof ru&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&lu(n,t.filters[r])),!0)}(e,t):void xa()}function uu(e,t){const n=e.filters.concat(t);return ru.create(n,e.op)}function hu(e){return e instanceof nu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Pl(e.value))}(e):e instanceof ru?function(e){return e.op.toString()+" {"+e.getFilters().map(hu).join(" ,")+"}"}(e):"Filter"}class du extends nu{constructor(e,t,n){super(e,t,n),this.key=Za.fromName(n.referenceValue)}matches(e){const t=Za.comparator(e.key,this.key);return this.matchesComparison(t)}}class fu extends nu{constructor(e,t){super(e,"in",t),this.keys=mu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pu extends nu{constructor(e,t){super(e,"not-in",t),this.keys=mu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Za.fromName(e.referenceValue)))}class gu extends nu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fl(t)&&Al(t.arrayValue,this.value)}}class yu extends nu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Al(this.value.arrayValue,t)}}class vu extends nu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Al(this.value.arrayValue,t)}}class wu extends nu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Al(this.value.arrayValue,e)))}}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function _u(e){return new bu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Su(e){const t=Aa(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>cu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),kc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Pl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Pl(e))).join(",")),t.ue=e}return t.ue}function Eu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!eu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!lu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Xl(e.startAt,t.startAt)&&Xl(e.endAt,t.endAt)}function Iu(e){return Za.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Tu(e,t){return e.filters.filter((e=>e instanceof nu&&e.field.isEqual(t)))}function ku(e,t,n){let r=Cl,i=!0;for(const s of Tu(e,t)){let e=Cl,t=!0;switch(s.op){case"<":case"<=":e=ql(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Cl}Wl({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Wl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Cu(e,t,n){let r=kl,i=!0;for(const s of Tu(e,t)){let e=kl,t=!0;switch(s.op){case">=":case">":e=Kl(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=kl}Gl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Gl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class xu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Nu(e,t,n,r,i,s,o,a){return new xu(e,t,n,r,i,s,o,a)}function Au(e){return new xu(e)}function Ru(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Du(e){return null!==e.collectionGroup}function Pu(e){const t=Aa(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new hl(Xa.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Zl(r,n))})),e.has(Xa.keyField().canonicalString())||t.ce.push(new Zl(Xa.keyField(),n))}return t.ce}function Ou(e){const t=Aa(e);return t.le||(t.le=Lu(t,Pu(e))),t.le}function Lu(e,t){if("F"===e.limitType)return _u(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Zl(e.field,t)}));const n=e.endAt?new Yl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yl(e.startAt.position,e.startAt.inclusive):null;return _u(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Mu(e,t){const n=e.filters.concat([t]);return new xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fu(e,t,n){return new xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Uu(e,t){return Eu(Ou(e),Ou(t))&&e.limitType===t.limitType}function ju(e){return"".concat(Su(Ou(e)),"|lt:").concat(e.limitType)}function Vu(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>hu(e))).join(", "),"]")),kc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Pl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Pl(e))).join(",")),"Target(".concat(t,")")}(Ou(e)),"; limitType=").concat(e.limitType,")")}function zu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Za.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Pu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=$l(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Pu(e),t))&&!(e.endAt&&!function(e,t,n){const r=$l(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Pu(e),t))}(e,t)}function Bu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qu(e){return(t,n)=>{let r=!1;for(const i of Pu(e)){const e=Ku(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ku(e,t,n){const r=e.field.isKeyField()?Za.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Rl(r,i):xa()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xa()}}class Wu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return al(this.inner)}size(){return this.innerSize}}const Gu=new cl(Za.comparator);function Hu(){return Gu}const Qu=new cl(Za.comparator);function Ju(){let e=Qu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Yu(e){let t=Qu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function $u(){return Zu()}function Xu(){return Zu()}function Zu(){return new Wu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const eh=new cl(Za.comparator),th=new hl(Za.comparator);function nh(){let e=th;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const rh=new hl(Ka);function ih(){return rh}function sh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(t)?"-0":t}}function oh(e){return{integerValue:""+e}}function ah(e,t){return xc(t)?oh(t):sh(e,t)}class ch{constructor(){this._=void 0}}function lh(e,t,n){return e instanceof dh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&_l(t)&&(t=Sl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof fh?ph(e,t):e instanceof mh?gh(e,t):function(e,t){const n=hh(e,t),r=vh(n)+vh(e.Pe);return Ml(n)&&Ml(e.Pe)?oh(r):sh(e.serializer,r)}(e,t)}function uh(e,t,n){return e instanceof fh?ph(e,t):e instanceof mh?gh(e,t):n}function hh(e,t){return e instanceof yh?function(e){return Ml(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class dh extends ch{}class fh extends ch{constructor(e){super(),this.elements=e}}function ph(e,t){const n=wh(t);for(const r of e.elements)n.some((e=>Nl(e,r)))||n.push(r);return{arrayValue:{values:n}}}class mh extends ch{constructor(e){super(),this.elements=e}}function gh(e,t){let n=wh(t);for(const r of e.elements)n=n.filter((e=>!Nl(e,r)));return{arrayValue:{values:n}}}class yh extends ch{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function vh(e){return wl(e.integerValue||e.doubleValue)}function wh(e){return Fl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class bh{constructor(e,t){this.field=e,this.transform=t}}class _h{constructor(e,t){this.version=e,this.transformResults=t}}class Sh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sh}static exists(e){return new Sh(void 0,e)}static updateTime(e){return new Sh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Eh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ih{}function Th(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Lh(e.key,Sh.none()):new Ah(e.key,e.data,Sh.none());{const n=e.data,r=Hl.empty();let i=new hl(Xa.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Rh(e.key,r,new pl(i.toArray()),Sh.none())}}function kh(e,t,n){e instanceof Ah?function(e,t,n){const r=e.value.clone(),i=Ph(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rh?function(e,t,n){if(!Eh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ph(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Dh(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ch(e,t,n,r){return e instanceof Ah?function(e,t,n,r){if(!Eh(e.precondition,t))return n;const i=e.value.clone(),s=Oh(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rh?function(e,t,n,r){if(!Eh(e.precondition,t))return n;const i=Oh(e.fieldTransforms,r,t),s=t.data;return s.setAll(Dh(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Eh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function xh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=hh(r.transform,e||null);null!=i&&(null===n&&(n=Hl.empty()),n.set(r.field,i))}return n||null}function Nh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Wa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fh&&t instanceof fh||e instanceof mh&&t instanceof mh?Wa(e.elements,t.elements,Nl):e instanceof yh&&t instanceof yh?Nl(e.Pe,t.Pe):e instanceof dh&&t instanceof dh}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ah extends Ih{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rh extends Ih{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dh(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ph(e,t,n){const r=new Map;Na(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,uh(o,a,n[i]))}return r}function Oh(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,lh(e,s,t))}return r}class Lh extends Ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mh extends Ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Fh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&kh(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ch(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ch(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Xu();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Th(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Qa.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nh())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,((e,t)=>Nh(e,t)))&&Wa(this.baseMutations,e.baseMutations,((e,t)=>Nh(e,t)))}}class Uh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Na(e.mutations.length===n.length);let r=eh;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Uh(e,t,n,r)}}class jh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Vh{constructor(e,t){this.count=e,this.unchangedNames=t}}var zh,Bh;function qh(e){switch(e){default:return xa();case Ra.CANCELLED:case Ra.UNKNOWN:case Ra.DEADLINE_EXCEEDED:case Ra.RESOURCE_EXHAUSTED:case Ra.INTERNAL:case Ra.UNAVAILABLE:case Ra.UNAUTHENTICATED:return!1;case Ra.INVALID_ARGUMENT:case Ra.NOT_FOUND:case Ra.ALREADY_EXISTS:case Ra.PERMISSION_DENIED:case Ra.FAILED_PRECONDITION:case Ra.ABORTED:case Ra.OUT_OF_RANGE:case Ra.UNIMPLEMENTED:case Ra.DATA_LOSS:return!0}}function Kh(e){if(void 0===e)return Ta("GRPC error has no .code"),Ra.UNKNOWN;switch(e){case zh.OK:return Ra.OK;case zh.CANCELLED:return Ra.CANCELLED;case zh.UNKNOWN:return Ra.UNKNOWN;case zh.DEADLINE_EXCEEDED:return Ra.DEADLINE_EXCEEDED;case zh.RESOURCE_EXHAUSTED:return Ra.RESOURCE_EXHAUSTED;case zh.INTERNAL:return Ra.INTERNAL;case zh.UNAVAILABLE:return Ra.UNAVAILABLE;case zh.UNAUTHENTICATED:return Ra.UNAUTHENTICATED;case zh.INVALID_ARGUMENT:return Ra.INVALID_ARGUMENT;case zh.NOT_FOUND:return Ra.NOT_FOUND;case zh.ALREADY_EXISTS:return Ra.ALREADY_EXISTS;case zh.PERMISSION_DENIED:return Ra.PERMISSION_DENIED;case zh.FAILED_PRECONDITION:return Ra.FAILED_PRECONDITION;case zh.ABORTED:return Ra.ABORTED;case zh.OUT_OF_RANGE:return Ra.OUT_OF_RANGE;case zh.UNIMPLEMENTED:return Ra.UNIMPLEMENTED;case zh.DATA_LOSS:return Ra.DATA_LOSS;default:return xa()}}(Bh=zh||(zh={}))[Bh.OK=0]="OK",Bh[Bh.CANCELLED=1]="CANCELLED",Bh[Bh.UNKNOWN=2]="UNKNOWN",Bh[Bh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bh[Bh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bh[Bh.NOT_FOUND=5]="NOT_FOUND",Bh[Bh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bh[Bh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bh[Bh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bh[Bh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bh[Bh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bh[Bh.ABORTED=10]="ABORTED",Bh[Bh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bh[Bh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bh[Bh.INTERNAL=13]="INTERNAL",Bh[Bh.UNAVAILABLE=14]="UNAVAILABLE",Bh[Bh.DATA_LOSS=15]="DATA_LOSS";let Wh=null;function Gh(){return new TextEncoder}const Hh=new va([4294967295,4294967295],0);function Qh(e){const t=Gh().encode(e),n=new ya;return n.update(t),new Uint8Array(n.digest())}function Jh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new va([n,r],0),new va([i,s],0)]}class Yh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $h("Invalid padding: ".concat(t));if(n<0)throw new $h("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new $h("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new $h("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=va.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(va.fromNumber(n)));return 1===r.compare(Hh)&&(r=new va([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Qh(e),[n,r]=Jh(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Yh(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Qh(e),[n,r]=Jh(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Zh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Xh(Qa.min(),r,new cl(Ka),Hu(),nh())}}class Zh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Zh(n,t,nh(),nh(),nh())}}class ed{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class td{constructor(e,t){this.targetId=e,this.me=t}}class nd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class rd{constructor(){this.fe=0,this.ge=od(),this.pe=gl.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=nh(),t=nh(),n=nh();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xa()}})),new Zh(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=od()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Na(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class id{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hu(),this.qe=sd(),this.Qe=new cl(Ka)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:xa()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Iu(i))if(0===n){const e=new Za(i.path);this.Ue(t,e,Jl.newNoDocument(e,Qa.min()))}else Na(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Wh||Wh.et(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=bl(n).toUint8Array()}catch(e){if(e instanceof ml)return ka("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Yh(s,r,i)}catch(e){return ka(e instanceof $h?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Iu(i.target)){const t=new Za(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Jl.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=nh();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Xh(e,t,this.Qe,this.ke,n);return this.ke=Hu(),this.qe=sd(),this.Qe=new cl(Ka),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new rd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new hl(Ka),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ia("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rd),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function sd(){return new cl(Za.comparator)}function od(){return new cl(Za.comparator)}const ad={asc:"ASCENDING",desc:"DESCENDING"},cd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ld={and:"AND",or:"OR"};class ud{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hd(e,t){return e.useProto3Json||kc(t)?t:{value:t}}function dd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pd(e,t){return dd(e,t.toTimestamp())}function md(e){return Na(!!e),Qa.fromTimestamp(function(e){const t=vl(e);return new Ha(t.seconds,t.nanos)}(e))}function gd(e,t){return yd(e,t).canonicalString()}function yd(e,t){const n=function(e){return new Ya(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function vd(e){const t=Ya.fromString(e);return Na(Vd(t)),t}function wd(e,t){return gd(e.databaseId,t.path)}function bd(e,t){const n=vd(t);if(n.get(1)!==e.databaseId.projectId)throw new Da(Ra.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Da(Ra.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Za(Id(n))}function _d(e,t){return gd(e.databaseId,t)}function Sd(e){const t=vd(e);return 4===t.length?Ya.emptyPath():Id(t)}function Ed(e){return new Ya(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Id(e){return Na(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Td(e,t,n){return{name:wd(e,t),fields:n.value.mapValue.fields}}function kd(e,t,n){const r=bd(e,t.name),i=md(t.updateTime),s=t.createTime?md(t.createTime):Qa.min(),o=new Hl({mapValue:{fields:t.fields}}),a=Jl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Cd(e,t){let n;if(t instanceof Ah)n={update:Td(e,t.key,t.value)};else if(t instanceof Lh)n={delete:wd(e,t.key)};else if(t instanceof Rh)n={update:Td(e,t.key,t.data),updateMask:jd(t.fieldMask)};else{if(!(t instanceof Mh))return xa();n={verify:wd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof dh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yh)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw xa()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:pd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xa()}(e,t.precondition)),n}function xd(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Sh.updateTime(md(e.updateTime)):void 0!==e.exists?Sh.exists(e.exists):Sh.none()}(t.currentDocument):Sh.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Na("REQUEST_TIME"===t.setToServerValue),n=new dh;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new fh(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new mh(e)}else"increment"in t?n=new yh(e,t.increment):xa();const r=Xa.fromServerFormat(t.fieldPath);return new bh(r,n)}(e,t))):[];if(t.update){t.update.name;const i=bd(e,t.update.name),s=new Hl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new pl(t.map((e=>Xa.fromServerFormat(e))))}(t.updateMask);return new Rh(i,s,e,n,r)}return new Ah(i,s,n,r)}if(t.delete){const r=bd(e,t.delete);return new Lh(r,n)}if(t.verify){const r=bd(e,t.verify);return new Mh(r,n)}return xa()}function Nd(e,t){return{documents:[_d(e,t.path)]}}function Ad(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_d(e,i);const s=function(e){if(0!==e.length)return Ud(ru.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Md(e.field),direction:Pd(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Rd(e){let t=Sd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Na(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Dd(e);return t instanceof ru&&ou(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Zl(Fd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,kc(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Yl(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new Yl(n,t)}(n.endAt)),Nu(t,i,o,s,a,"F",c,l)}function Dd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fd(e.unaryFilter.field);return nu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fd(e.unaryFilter.field);return nu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fd(e.unaryFilter.field);return nu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fd(e.unaryFilter.field);return nu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xa()}}(e):void 0!==e.fieldFilter?function(e){return nu.create(Fd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xa()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ru.create(e.compositeFilter.filters.map((e=>Dd(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xa()}}(e.compositeFilter.op))}(e):xa()}function Pd(e){return ad[e]}function Od(e){return cd[e]}function Ld(e){return ld[e]}function Md(e){return{fieldPath:e.canonicalString()}}function Fd(e){return Xa.fromServerFormat(e.fieldPath)}function Ud(e){return e instanceof nu?function(e){if("=="===e.op){if(jl(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NAN"}};if(Ul(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jl(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NOT_NAN"}};if(Ul(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Md(e.field),op:Od(e.op),value:e.value}}}(e):e instanceof ru?function(e){const t=e.getFilters().map((e=>Ud(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ld(e.op),filters:t}}}(e):xa()}function jd(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Vd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class zd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qa.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qa.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new zd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Bd{constructor(e){this.ut=e}}function qd(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:wd(e,t.key),fields:t.data.value.mapValue.fields,updateTime:dd(e,t.version.toTimestamp()),createTime:dd(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wd(t.version)};else{if(!t.isUnknownDocument())return xa();r.unknownDocument={path:n.path.toArray(),version:Wd(t.version)}}return r}function Kd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Wd(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Gd(e){const t=new Ha(e.seconds,e.nanoseconds);return Qa.fromTimestamp(t)}function Hd(e,t){const n=(t.baseMutations||[]).map((t=>xd(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>xd(e.ut,t))),i=Ha.fromMillis(t.localWriteTimeMs);return new Fh(t.batchId,i,n,r)}function Qd(e){const t=Gd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Gd(e.lastLimboFreeSnapshotVersion):Qa.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Na(1===e.documents.length),Ou(Au(Sd(e.documents[0])))}(e.query):function(e){return Ou(Rd(e))}(e.query),new zd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,gl.fromBase64String(e.resumeToken))}function Jd(e,t){const n=Wd(t.snapshotVersion),r=Wd(t.lastLimboFreeSnapshotVersion);let i;i=Iu(t.target)?Nd(e.ut,t.target):Ad(e.ut,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Su(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Yd(e){const t=Rd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fu(t,t.limit,"L"):t}function $d(e,t){return new jh(t.largestBatchId,xd(e.ut,t.overlayMutation))}function Xd(e,t){const n=t.path.lastSegment();return[e,Nc(t.path.popLast()),n]}function Zd(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Wd(r.readTime),documentKey:Nc(r.documentKey.path),largestBatchId:r.largestBatchId}}class ef{getBundleMetadata(e,t){return tf(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Gd(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return tf(e).put(function(e){return{bundleId:e.id,createTime:Wd(md(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return nf(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Yd(e.bundledQuery),readTime:Gd(e.readTime)}}(e)}))}saveNamedQuery(e,t){return nf(e).put(function(e){return{name:e.name,readTime:Wd(md(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function tf(e){return il(e,"bundles")}function nf(e){return il(e,"namedQueries")}class rf{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new rf(e,n)}getOverlay(e,t){return sf(e).get(Xd(this.userId,t)).next((e=>e?$d(this.serializer,e):null))}getOverlays(e,t){const n=$u();return dc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new jh(t,i);r.push(this.lt(e,s))})),dc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Nc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(sf(e).j("collectionPathOverlayIndex",r))})),dc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=$u(),i=Nc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return sf(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=$d(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=$u();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sf(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=$d(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return sf(e).put(function(e,t,n){const[r,i,s]=Xd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Cd(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function sf(e){return il(e,"documentOverlays")}class of{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(wl(e.integerValue));else if("doubleValue"in e){const n=wl(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Cc(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Tt(t,20),"string"==typeof n&&(n=vl(n)),t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(bl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Bl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):xa()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Za.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function af(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cf(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=af(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}of.St=new of;class lf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Lt(e),n=cf(t);this.Bt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Lt(e),n=cf(t);this.Bt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Bt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Bt(1),this.buffer[this.position++]=e}$t(e){this.Bt(1),this.buffer[this.position++]=~e}Bt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class uf{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class hf{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class df{constructor(){this.Wt=new lf,this.Gt=new uf(this.Wt),this.zt=new hf(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class ff{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new ff(this.indexId,this.documentKey,this.arrayValue,n)}}function pf(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=mf(e.arrayValue,t.arrayValue),0!==n?n:(n=mf(e.directionalValue,t.directionalValue),0!==n?n:Za.comparator(e.documentKey,t.documentKey)))}function mf(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class gf{constructor(e){this.Jt=new hl(((e,t)=>Xa.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Na(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=tc(e);if(void 0!==t&&!this.tn(t))return!1;const n=nc(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new hl(Xa.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new rc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new rc(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new rc(n.field,"asc"===n.dir?0:1)));return new ec(ec.UNKNOWN_ID,this.collectionId,t,ic.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yf(e){var t,n;if(Na(e instanceof nu||e instanceof ru),e instanceof nu){if(e instanceof yu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>nu.create(e.field,"==",t))))||[];return ru.create(r,"or")}return e}const r=e.filters.map((e=>yf(e)));return ru.create(r,e.op)}function vf(e){if(0===e.getFilters().length)return[];const t=Sf(yf(e));return Na(_f(t)),wf(t)||bf(t)?[t]:t.getFilters()}function wf(e){return e instanceof nu}function bf(e){return e instanceof ru&&ou(e)}function _f(e){return wf(e)||bf(e)||function(e){if(e instanceof ru&&su(e)){for(const t of e.getFilters())if(!wf(t)&&!bf(t))return!1;return!0}return!1}(e)}function Sf(e){if(Na(e instanceof nu||e instanceof ru),e instanceof nu)return e;if(1===e.filters.length)return Sf(e.filters[0]);const t=e.filters.map((e=>Sf(e)));let n=ru.create(t,e.op);return n=Tf(n),_f(n)?n:(Na(n instanceof ru),Na(iu(n)),Na(n.filters.length>1),n.filters.reduce(((e,t)=>Ef(e,t))))}function Ef(e,t){let n;return Na(e instanceof nu||e instanceof ru),Na(t instanceof nu||t instanceof ru),n=e instanceof nu?t instanceof nu?function(e,t){return ru.create([e,t],"and")}(e,t):If(e,t):t instanceof nu?If(t,e):function(e,t){if(Na(e.filters.length>0&&t.filters.length>0),iu(e)&&iu(t))return uu(e,t.getFilters());const n=su(e)?e:t,r=su(e)?t:e,i=n.filters.map((e=>Ef(e,r)));return ru.create(i,"or")}(e,t),Tf(n)}function If(e,t){if(iu(t))return uu(t,e.getFilters());{const n=t.filters.map((t=>Ef(e,t)));return ru.create(n,"or")}}function Tf(e){if(Na(e instanceof nu||e instanceof ru),e instanceof nu)return e;const t=e.getFilters();if(1===t.length)return Tf(t[0]);if(au(e))return e;const n=t.map((e=>Tf(e))),r=[];return n.forEach((t=>{t instanceof nu?r.push(t):t instanceof ru&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ru.create(r,e.op)}class kf{constructor(){this.on=new Cf}addToCollectionParentIndex(e,t){return this.on.add(t),dc.resolve()}getCollectionParents(e,t){return dc.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return dc.resolve()}deleteFieldIndex(e,t){return dc.resolve()}deleteAllFieldIndexes(e){return dc.resolve()}createTargetIndexes(e,t){return dc.resolve()}getDocumentsMatchingTarget(e,t){return dc.resolve(null)}getIndexType(e,t){return dc.resolve(0)}getFieldIndexes(e,t){return dc.resolve([])}getNextCollectionGroupToUpdate(e){return dc.resolve(null)}getMinOffset(e,t){return dc.resolve(ac.min())}getMinOffsetFromCollectionGroup(e,t){return dc.resolve(ac.min())}updateCollectionGroup(e,t,n){return dc.resolve()}updateIndexEntries(e,t){return dc.resolve()}}class Cf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hl(Ya.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new hl(Ya.comparator)).toArray()}}const xf=new Uint8Array(0);class Nf{constructor(e,t){this.databaseId=t,this._n=new Cf,this.an=new Wu((e=>Su(e)),((e,t)=>Eu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Nc(r)};return Af(e).put(i)}return dc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ga(t),""],!1,!0);return Af(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Dc(r.parent))}return n}))}addFieldIndex(e,t){const n=Df(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Pf(e);return i.next((e=>{n.put(Zd(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Df(e),r=Pf(e),i=Rf(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Df(e),n=Rf(e),r=Pf(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return dc.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new gf(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Rf(e);let r=!0;const i=new Map;return dc.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=nh();const r=[];return dc.forEach(i,((i,s)=>{Ia("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Su(t)));const o=function(e,t){const n=tc(t);if(void 0===n)return null;for(const r of Tu(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of nc(t))for(const t of Tu(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of nc(t)){const t=0===i.kind?ku(e,i.fieldPath,e.startAt):Cu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Yl(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of nc(t)){const t=0===i.kind?Cu(e,i.fieldPath,e.endAt):ku(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Yl(n,r)}(s,i),u=this.ln(i,s,c),h=this.ln(i,s,l),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return dc.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Za.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return dc.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:vf(ru.create(e.filters,"and")).map((t=>_u(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/c]):xf,h=this.Tn(e,a,n[u%c],r),d=this.En(e,a,i[u%c],s),f=o.map((t=>this.Tn(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}Tn(e,t,n,r){const i=new ff(e,Za.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new ff(e,Za.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new gf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return dc.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new hl(Xa.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new df;for(const r of nc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);of.St.ht(e,i)}return n.Ut()}In(e){const t=new df;return of.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new df;return of.St.ht(Ll(this.databaseId,t),n.jt(function(e){const t=nc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new df);let i=0;for(const s of nc(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&Fl(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);of.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new df;n.seed(e.Ut()),of.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof nu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Df(e),r=Pf(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return dc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ic(t.sequenceNumber,new ac(Gd(t.readTime),new Za(Dc(t.documentKey)),t.largestBatchId)):ic.empty(),r=e.fields.map((e=>{let[t,n]=e;return new rc(Xa.fromServerFormat(t),n)}));return new ec(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ka(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Df(e),i=Pf(e);return this.fn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>dc.forEach(t,(t=>i.put(Zd(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return dc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?dc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),dc.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?dc.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Rf(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Rf(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Rf(e);let i=new hl(pf);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new ff(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new hl(pf);const r=this.dn(t,e);if(null==r)return n;const i=tc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Fl(s))for(const i of s.arrayValue.values||[])n=n.add(new ff(t.indexId,e.key,this.In(i),r))}else n=n.add(new ff(t.indexId,e.key,xf,r));return n}yn(e,t,n,r,i){Ia("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=fl(s),c=fl(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=fl(o)):t?(i(a),a=fl(s)):(a=fl(s),c=fl(o))}}(r,i,pf,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),dc.waitFor(s)}fn(e){let t=1;return Pf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>pf(e,t))).filter(((e,t,n)=>!t||0!==pf(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=pf(s,e),i=pf(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,xf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,xf,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return pf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Of)}getMinOffset(e,t){return dc.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||xa())))).next(Of)}}function Af(e){return il(e,"collectionParents")}function Rf(e){return il(e,"indexEntries")}function Df(e){return il(e,"indexConfiguration")}function Pf(e){return il(e,"indexState")}function Of(e){Na(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;cc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ac(t.readTime,t.documentKey,n)}const Lf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Mf(e,Mf.DEFAULT_COLLECTION_PERCENTILE,Mf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ff(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Na(1===a)})));const l=[];for(const u of n.mutations){const e=Lc(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return dc.waitFor(s).next((()=>l))}function Uf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xa();t=e.noDocument}return JSON.stringify(t).length}Mf.DEFAULT_COLLECTION_PERCENTILE=10,Mf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mf.DEFAULT=new Mf(41943040,Mf.DEFAULT_COLLECTION_PERCENTILE,Mf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mf.DISABLED=new Mf(-1,0,0);class jf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Na(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new jf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zf(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Bf(e),s=zf(e);return s.add({}).next((o=>{Na("number"==typeof o);const a=new Fh(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Cd(e.ut,t))),i=n.mutations.map((t=>Cd(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new hl(((e,t)=>Ka(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Lc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,Mc))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),dc.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return zf(e).get(t).next((e=>e?(Na(e.userId===this.userId),Hd(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?dc.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return zf(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Na(t.batchId>=n),i=Hd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zf(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zf(e).U("userMutationsIndex",t).next((e=>e.map((e=>Hd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Oc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Bf(e).J({range:r},((n,r,s)=>{const[o,a,c]=n,l=Dc(a);if(o===this.userId&&t.path.isEqual(l))return zf(e).get(c).next((e=>{if(!e)throw xa();Na(e.userId===this.userId),i.push(Hd(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hl(Ka);const r=[];return t.forEach((t=>{const i=Oc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Bf(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,c=Dc(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),dc.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Oc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new hl(Ka);return Bf(e).J({range:s},((e,t,i)=>{const[s,a,c]=e,l=Dc(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(zf(e).get(t).next((e=>{if(null===e)throw xa();Na(e.userId===this.userId),n.push(Hd(this.serializer,e))})))})),dc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Ff(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),dc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return dc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Bf(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Dc(e[1]);r.push(t)}else n.done()})).next((()=>{Na(0===r.length)}))}))}containsKey(e,t){return Vf(e,this.userId,t)}Mn(e){return qf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Vf(e,t,n){const r=Oc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Bf(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function zf(e){return il(e,"mutations")}function Bf(e){return il(e,"documentMutations")}function qf(e){return il(e,"mutationQueues")}class Kf{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Kf(0)}static Nn(){return new Kf(-1)}}class Wf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Kf(t.highestTargetId);return t.highestTargetId=n.next(),this.Bn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Qa.fromTimestamp(new Ha(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Bn(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Bn(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Gf(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(Na(t.targetCount>0),t.targetCount-=1,this.Bn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Gf(e).J(((s,o)=>{const a=Qd(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>dc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Gf(e).J(((e,n)=>{const r=Qd(n);t(r)}))}Ln(e){return Hf(e).get("targetGlobalKey").next((e=>(Na(null!==e),e)))}Bn(e,t){return Hf(e).put("targetGlobalKey",t)}kn(e,t){return Gf(e).put(Jd(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Su(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Gf(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Qd(n);Eu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Qf(e);return t.forEach((t=>{const s=Nc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),dc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Qf(e);return dc.forEach(t,(t=>{const i=Nc(t.path);return dc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Qf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qf(e);let i=nh();return r.J({range:n,H:!0},((e,t,n)=>{const r=Dc(e[1]),s=new Za(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Nc(t.path),r=IDBKeyRange.bound([n],[Ga(n)],!1,!0);let i=0;return Qf(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return Gf(e).get(t).next((e=>e?Qd(e):null))}}function Gf(e){return il(e,"targets")}function Hf(e){return il(e,"targetGlobal")}function Qf(e){return il(e,"targetDocuments")}function Jf(e,t){let[n,r]=e,[i,s]=t;const o=Ka(n,i);return 0===o?Ka(r,s):o}class Yf{constructor(e){this.Qn=e,this.buffer=new hl(Jf),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Jf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $f{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Ia("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){vc(e)?Ia("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await hc(e)}await this.Gn(3e5)}))}}class Xf{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return dc.resolve(Tc.oe);const n=new Yf(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ia("LruGarbageCollector","Garbage collection skipped; disabled"),dc.resolve(Lf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ia("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Lf):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ia("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Ea()<=dt.DEBUG&&Ia("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),dc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Zf(e,t){return new Xf(e,t)}class ep{constructor(e,t){this.db=e,this.garbageCollector=Zf(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return tp(e,n)}removeReference(e,t,n){return tp(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return tp(e,t)}Xn(e,t){return function(e,t){let n=!1;return qf(e).Y((r=>Vf(e,r,t).next((e=>(e&&(n=!0),dc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Qa.min()),Qf(e).delete(function(e){return[0,Nc(e.path)]}(s)))))}));r.push(t)}})).next((()=>dc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return tp(e,t)}Zn(e,t){const n=Qf(e);let r,i=Tc.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Tc.oe&&t(new Za(Dc(r)),i),i=c,r=a):i=Tc.oe})).next((()=>{i!==Tc.oe&&t(new Za(Dc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tp(e,t){return Qf(e).put(function(e,t){return{targetId:0,path:Nc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class np{constructor(){this.changes=new Wu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?dc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ap(e).put(n)}removeEntry(e,t,n){return ap(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Kd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Jl.newInvalidDocument(t);return ap(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cp(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Jl.newInvalidDocument(t)};return ap(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cp(t))},((e,r)=>{n={document:this.tr(t,r),size:Uf(r)}})).next((()=>n))}getEntries(e,t){let n=Hu();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=Hu(),r=new cl(Za.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,Uf(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return dc.resolve();let r=new hl(up);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(cp(r.first()),cp(r.last())),s=r.getIterator();let o=s.getNext();return ap(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Za.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&up(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(cp(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Kd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ap(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Hu();for(const i of e){const e=this.tr(Za.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(zu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Hu();const s=lp(t,n),o=lp(t,ac.max());return ap(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(Za.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new sp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return op(e).get("remoteDocumentGlobalKey").next((e=>(Na(!!e),e)))}er(e,t){return op(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=kd(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Za.fromSegments(t.noDocument.path),r=Gd(t.noDocument.readTime);n=Jl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xa();{const e=Za.fromSegments(t.unknownDocument.path),r=Gd(t.unknownDocument.version);n=Jl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ha(e[0],e[1]);return Qa.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Qa.min()))return e}return Jl.newInvalidDocument(e)}}function ip(e){return new rp(e)}class sp extends np{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Wu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new hl(((e,t)=>Ka(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=qd(this._r.serializer,s);r=r.add(i.path.popLast());const c=Uf(a);n+=c-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=qd(this._r.serializer,s.convertToNoDocument(Qa.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),dc.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function op(e){return il(e,"remoteDocumentGlobal")}function ap(e){return il(e,"remoteDocumentsV14")}function cp(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lp(e,t){const n=t.documentKey.path.toArray();return[e,Kd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function up(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ka(n[s],r[s]),i)return i;return i=Ka(n.length,r.length),i||(i=Ka(n[n.length-2],r[r.length-2]),i||Ka(n[n.length-1],r[r.length-1]))}class hp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class dp{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ch(n.mutation,e,pl.empty(),Ha.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,nh()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nh();const r=$u();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Ju();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=$u();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,nh())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Hu();const s=Zu(),o=Zu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Rh)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ch(o.mutation,t,o.mutation.getFieldMask(),Ha.now())):s.set(t.key,pl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new hp(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Zu();let r=new cl(((e,t)=>e-t)),i=nh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||pl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||nh()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Xu();c.forEach((e=>{if(!i.has(e)){const r=Th(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return dc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Za.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Du(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):dc.resolve($u());let o=-1,a=i;return s.next((t=>dc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?dc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,nh()))).next((e=>({batchId:o,changes:Yu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Za(t)).next((e=>{let t=Ju();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Ju();return this.indexManager.getCollectionParents(e,i).next((o=>dc.forEach(o,(o=>{const a=function(e,t){return new xu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Jl.newInvalidDocument(r)))}));let n=Ju();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Ch(s.mutation,r,pl.empty(),Ha.now()),zu(t,r)&&(n=n.insert(e,r))})),n}))}}class fp{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return dc.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:md(e.createTime)}}(t)),dc.resolve()}getNamedQuery(e,t){return dc.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Yd(e.bundledQuery),readTime:md(e.readTime)}}(t)),dc.resolve()}}class pp{constructor(){this.overlays=new cl(Za.comparator),this.lr=new Map}getOverlay(e,t){return dc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$u();return dc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),dc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),dc.resolve()}getOverlaysForCollection(e,t,n){const r=$u(),i=t.length+1,s=new Za(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return dc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new cl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$u(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=$u(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return dc.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new jh(t,n));let i=this.lr.get(t);void 0===i&&(i=nh(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class mp{constructor(){this.hr=new hl(gp.Pr),this.Ir=new hl(gp.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new gp(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new gp(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Za(new Ya([])),n=new gp(t,e),r=new gp(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Za(new Ya([])),n=new gp(t,e),r=new gp(t,e+1);let i=nh();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new gp(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class gp{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Za.comparator(e.key,t.key)||Ka(e.gr,t.gr)}static Tr(e,t){return Ka(e.gr,t.gr)||Za.comparator(e.key,t.key)}}class yp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new hl(gp.Pr)}checkEmpty(e){return dc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Fh(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new gp(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return dc.resolve(s)}lookupMutationBatch(e,t){return dc.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return dc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return dc.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return dc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new gp(t,0),r=new gp(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),dc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hl(Ka);return t.forEach((e=>{const t=new gp(e,0),r=new gp(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),dc.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Za.isDocumentKey(i)||(i=i.child(""));const s=new gp(new Za(i),0);let o=new hl(Ka);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),dc.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Na(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return dc.forEach(t.mutations,(r=>{const i=new gp(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new gp(t,0),r=this.yr.firstAfterOrEqual(n);return dc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,dc.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class vp{constructor(e){this.Cr=e,this.docs=new cl(Za.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return dc.resolve(n?n.document.mutableCopy():Jl.newInvalidDocument(t))}getEntries(e,t){let n=Hu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Jl.newInvalidDocument(e))})),dc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Hu();const s=t.path,o=new Za(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||cc(oc(o),n)<=0||(r.has(o.key)||zu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return dc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){xa()}vr(e,t){return dc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new wp(this)}getSize(e){return dc.resolve(this.size)}}class wp extends np{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),dc.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class bp{constructor(e){this.persistence=e,this.Fr=new Wu((e=>Su(e)),Eu),this.lastRemoteSnapshotVersion=Qa.min(),this.highestTargetId=0,this.Mr=0,this.Or=new mp,this.targetCount=0,this.Nr=Kf.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),dc.resolve()}getLastRemoteSnapshotVersion(e){return dc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dc.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),dc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),dc.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Kf(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,dc.resolve()}updateTargetData(e,t){return this.kn(t),dc.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,dc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),dc.waitFor(i).next((()=>r))}getTargetCount(e){return dc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return dc.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),dc.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),dc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),dc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return dc.resolve(n)}containsKey(e,t){return dc.resolve(this.Or.containsKey(t))}}class _p{constructor(e,t){this.Lr={},this.overlays={},this.Br=new Tc(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new bp(this),this.indexManager=new kf,this.remoteDocumentCache=function(e){return new vp(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Bd(t),this.Kr=new fp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new yp(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Ia("MemoryPersistence","Starting transaction:",e);const r=new Sp(this.Br.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return dc.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Sp extends uc{constructor(e){super(),this.currentSequenceNumber=e}}class Ep{constructor(e){this.persistence=e,this.Gr=new mp,this.zr=null}static jr(e){return new Ep(e)}get Hr(){if(this.zr)return this.zr;throw xa()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),dc.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),dc.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),dc.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dc.forEach(this.Hr,(n=>{const r=Za.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Qa.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return dc.or([()=>dc.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Ip{constructor(e){this.serializer=e}O(e,t,n,r){const i=new fc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pc,{unique:!0}),e.createObjectStore("documentMutations")}(e),Tp(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=dc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Tp(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Qa.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return dc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Qc});t.createIndex("collectionPathOverlayIndex",Jc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Yc,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Fc});t.createIndex("documentKeyIndex",Uc),t.createIndex("collectionGroupIndex",jc)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Kc}).createIndex("sequenceNumberIndex",Wc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Gc}).createIndex("documentKeyIndex",Hc,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}Xr(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Uf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>dc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>dc.forEach(n,(n=>{Na(n.userId===t.userId);const r=Hd(this.serializer,n);return Ff(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new Ya(n),o=function(e){return[0,Nc(e)]}(s);r.push(t.get(o).next((n=>n?dc.resolve():(n=>t.put({targetId:0,path:Nc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>dc.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:qc});const n=t.store("collectionParents"),r=new Cf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Nc(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new Ya(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Dc(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Qd(n),i=Jd(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Za(Ya.fromString(e.document.name).popFirst(5)):e.noDocument?Za.fromSegments(e.noDocument.path):e.unknownDocument?Za.fromSegments(e.unknownDocument.path):xa()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>dc.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=ip(this.serializer),i=new _p(Ep.jr,this.serializer.ut);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:nh();Hd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),dc.forEach(n,((e,n)=>{const s=new ba(n),o=rf.ct(this.serializer,s),a=i.getIndexManager(s),c=jf.ct(s,this.serializer,a,i.referenceDelegate);return new dp(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new rl(t,Tc.oe),e).next()}))}))}}function Tp(e){e.createObjectStore("targetDocuments",{keyPath:zc}).createIndex("documentTargetsIndex",Bc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vc,{unique:!0}),e.createObjectStore("targetGlobal")}const kp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cp{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=c,this._i=l,this.ai=u,this.Br=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Cp.D())throw new Da(Ra.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ep(this,r),this.Ii=t+"main",this.serializer=new Bd(a),this.Ti=new pc(this.Ii,this.ai,new Ip(this.serializer)),this.qr=new Wf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ip(this.serializer),this.Kr=new ef,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===l&&Ta("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Da(Ra.FAILED_PRECONDITION,kp);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Br=new Tc(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Np(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(vc(e))return Ia("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ia("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return xp(e).get("owner").next((e=>dc.resolve(this.wi(e))))}Si(e){return Np(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=il(e,"clientMetadata");return t.U().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return dc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?dc.resolve(!0):xp(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Da(Ra.FAILED_PRECONDITION,kp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Np(e).U().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ia("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new rl(e,Tc.oe);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Np(e).U().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return jf.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nf(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return rf.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Ia("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?nl:15===e?tl:14===e?el:13===e?Zc:12===e?Xc:11===e?$c:void xa()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new rl(r,this.Br?this.Br.next():Tc.oe),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Ta("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Da(Ra.FAILED_PRECONDITION,lc);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Bi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Bi(e){return xp(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Da(Ra.FAILED_PRECONDITION,kp)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xp(e).put("owner",t)}static D(){return pc.D()}pi(e){const t=xp(e);return t.get("owner").next((e=>this.wi(e)?(Ia("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):dc.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ta("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;Ge()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Ia("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ta("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(iN){Ta("Failed to set zombie client id.",iN)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(iN){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function xp(e){return il(e,"owner")}function Np(e){return il(e,"clientMetadata")}function Ap(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Rp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=nh(),r=nh();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Rp(e,t.fromCache,n,r)}}class Dp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Pp{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=Ge()?8:mc(Ve())>0?6:4}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Dp;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Ea()<=dt.DEBUG&&Ia("QueryEngine","SDK will not create cache indexes for query:",Vu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),dc.resolve()):(Ea()<=dt.DEBUG&&Ia("QueryEngine","Query:",Vu(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Ea()<=dt.DEBUG&&Ia("QueryEngine","The SDK decides to create cache indexes for query:",Vu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ou(t))):dc.resolve())}zi(e,t){if(Ru(t))return dc.resolve(null);let n=Ou(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Fu(t,null,"F"),n=Ou(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=nh(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,Fu(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ru(t)||r.isEqual(Qa.min())?dc.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?dc.resolve(null):(Ea()<=dt.DEBUG&&Ia("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Vu(t)),this.Xi(e,s,t,sc(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new hl(qu(e));return t.forEach(((t,r)=>{zu(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Ea()<=dt.DEBUG&&Ia("QueryEngine","Using full collection scan to execute query:",Vu(t)),this.Gi.getDocumentsMatchingQuery(e,t,ac.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Op{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new cl(Ka),this.ns=new Wu((e=>Su(e)),Eu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dp(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Lp(e,t,n,r){return new Op(e,t,n,r)}async function Mp(e,t){const n=Aa(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=nh();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Fp(e){const t=Aa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function Up(e,t,n){let r=nh(),i=nh();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Hu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Qa.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ia("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function jp(e,t){const n=Aa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Vp(e,t){const n=Aa(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,dc.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new zd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function zp(e,t,n){const r=Aa(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!vc(e))throw e;Ia("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Bp(e,t,n){const r=Aa(e);let i=Qa.min(),s=nh();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Aa(e),i=r.ns.get(n);return void 0!==i?dc.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Ou(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Qa.min(),n?s:nh()))).next((e=>(Wp(r,Bu(t),e),{documents:e,ls:s})))))}function qp(e,t){const n=Aa(e),r=Aa(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function Kp(e,t){const n=Aa(e),r=n.rs.get(t)||Qa.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,sc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Wp(n,t,e),e)))}function Wp(e,t,n){let r=e.rs.get(t)||Qa.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function Gp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nh();const r=await Vp(e,Ou(Yd(t.bundledQuery))),i=Aa(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=md(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(gl.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function Hp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Qp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Yp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Da(r.error.code,r.error.message))),s?new Yp(e,t,r.state,i):(Ta("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $p{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Da(n.error.code,n.error.message))),i?new $p(e,n.state,r):(Ta("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ih();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=xc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Xp(e,i):(Ta("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Zp{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Zp(t.clientId,t.onlineState):(Ta("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class em{constructor(){this.activeTargetIds=ih()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tm{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new cl(Ka),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=Hp(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new em),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(Hp(this.persistenceKey,n));if(e){const t=Xp.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Jp(this.persistenceKey,e));if(n){const r=$p.Ts(e,n);r&&(t=r.state)}}return this.Bs.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Bs.As(e),this.Fs()}isLocalQueryTarget(e){return this.Bs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jp(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ia("SharedClientState","READ",e,t),t}setItem(e,t){Ia("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ia("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Ia("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Ta("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Tc.oe;if(null!=e)try{const n=JSON.parse(e);Na("number"==typeof n),t=n}catch(e){Ta("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Tc.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Bs(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Bs.Es())}Ns(e,t,n){const r=new Yp(this.currentUser,e,t,n),i=Qp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Ls(e){const t=Qp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=Jp(this.persistenceKey,e),i=new $p(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return Xp.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Yp.Ts(new ba(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return $p.Ts(r,t)}Ms(e){return Zp.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Ia("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=ih();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class nm{constructor(){this.eo=new em,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new em,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rm{ro(e){}shutdown(){}}class im{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Ia("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Ia("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sm=null;function om(){return null===sm?sm=268435456+Math.round(2147483648*Math.random()):sm++,"0x"+sm.toString(16)}const am={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cm{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}}const lm="WebChannelConnection";class um extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.yo=t+"://"+e.host,this.wo="projects/".concat(n,"/databases/").concat(r),this.So="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get bo(){return!1}Do(e,t,n,r,i){const s=om(),o=this.Co(e,t.toUriEncodedString());Ia("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(a,r,i),this.Fo(e,o,a,n).then((t=>(Ia("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ka("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Mo(e,t,n,r,i,s){return this.Do(e,t,n,r,i)}vo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_a,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Co(e,t){const n=am[e];return"".concat(this.yo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,t,n,r){const i=om();return new Promise(((s,o)=>{const a=new ga;a.setWithCredentials(!0),a.listenOnce(ha.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ua.NO_ERROR:const t=a.getResponseJson();Ia(lm,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ua.TIMEOUT:Ia(lm,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Da(Ra.DEADLINE_EXCEEDED,"Request time out"));break;case ua.HTTP_ERROR:const n=a.getStatus();if(Ia(lm,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ra).indexOf(t)>=0?t:Ra.UNKNOWN}(t.status);o(new Da(e,t.message))}else o(new Da(Ra.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Da(Ra.UNAVAILABLE,"Connection failed."));break;default:xa()}}finally{Ia(lm,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Ia(lm,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}xo(e,t,n){const r=om(),i=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ca(),o=la(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new pa({})),this.vo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Ia(lm,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new cm({co:t=>{d?Ia(lm,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ia(lm,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ia(lm,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,ma.EventType.OPEN,(()=>{d||(Ia(lm,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.Vo())})),p(u,ma.EventType.CLOSE,(()=>{d||(d=!0,Ia(lm,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.fo())})),p(u,ma.EventType.ERROR,(t=>{d||(d=!0,ka(lm,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.fo(new Da(Ra.UNAVAILABLE,"The operation could not be completed")))})),p(u,ma.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Na(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ia(lm,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=zh[e];if(void 0!==t)return Kh(t)}(t),i=o.message;void 0===n&&(n=Ra.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.fo(new Da(n,i)),u.close()}else Ia(lm,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.po(i)}})),p(o,da.STAT_EVENT,(t=>{t.stat===fa.PROXY?Ia(lm,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===fa.NOPROXY&&Ia(lm,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.mo()}),0),f}}function hm(){return"undefined"!=typeof window?window:null}function dm(){return"undefined"!=typeof document?document:null}function fm(e){return new ud(e,!0)}class pm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Oo=n,this.No=r,this.Lo=i,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();const t=Math.floor(this.Bo+this.$o()),n=Math.max(0,Date.now()-this.qo),r=Math.max(0,t-n);r>0&&Ia("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.ko=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.qo=Date.now(),e()))),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){null!==this.ko&&(this.ko.skipDelay(),this.ko=null)}cancel(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}}class mm{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Wo=n,this.Go=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new pm(e,t)}Yo(){return 1===this.state||5===this.state||this.Zo()}Zo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Xo()}async stop(){this.Yo()&&await this.close(0)}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&null===this.jo&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,(()=>this.n_())))}r_(e){this.i_(),this.stream.send(e)}async n_(){if(this.Zo())return this.close(0)}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}async close(e,t){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,4!==e?this.Jo.reset():t&&t.code===Ra.RESOURCE_EXHAUSTED?(Ta(t.toString()),Ta("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):t&&t.code===Ra.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Eo(t)}o_(){}auth(){this.state=1;const e=this.__(this.zo),t=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.zo===t&&this.a_(n,r)}),(t=>{e((()=>{const e=new Da(Ra.UNKNOWN,"Fetching auth token failed: "+t.message);return this.u_(e)}))}))}a_(e,t){const n=this.__(this.zo);this.stream=this.c_(e,t),this.stream.ho((()=>{n((()=>this.listener.ho()))})),this.stream.Io((()=>{n((()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,(()=>(this.Zo()&&(this.state=3),Promise.resolve()))),this.listener.Io())))})),this.stream.Eo((e=>{n((()=>this.u_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Xo(){this.state=5,this.Jo.Ko((async()=>{this.state=0,this.start()}))}u_(e){return Ia("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}__(e){return t=>{this.si.enqueueAndForget((()=>this.zo===e?t():(Ia("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class gm extends mm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}c_(e,t){return this.connection.xo("Listen",e,t)}onMessage(e){this.Jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xa()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Na(void 0===t||"string"==typeof t),gl.fromBase64String(t||"")):(Na(void 0===t||t instanceof Buffer||t instanceof Uint8Array),gl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ra.UNKNOWN:Kh(e.code);return new Da(t,e.message||"")}(o);n=new nd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=bd(e,r.document.name),s=md(r.document.updateTime),o=r.document.createTime?md(r.document.createTime):Qa.min(),a=new Hl({mapValue:{fields:r.document.fields}}),c=Jl.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new ed(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=bd(e,r.document),s=r.readTime?md(r.readTime):Qa.min(),o=Jl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ed([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=bd(e,r.document),s=r.removedTargetIds||[];n=new ed([],s,i,null)}else{if(!("filter"in t))return xa();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Vh(r,i),o=e.targetId;n=new td(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Qa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Qa.min():t.readTime?md(t.readTime):Qa.min()}(e);return this.listener.l_(t,n)}h_(e){const t={};t.database=Ed(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Iu(r)?{documents:Nd(e,r)}:{query:Ad(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=fd(e,t.resumeToken);const r=hd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Qa.min())>0){n.readTime=dd(e,t.snapshotVersion.toTimestamp());const r=hd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xa()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.r_(t)}P_(e){const t={};t.database=Ed(this.serializer),t.removeTarget=e,this.r_(t)}}class ym extends mm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,t){return this.connection.xo("Write",e,t)}onMessage(e){if(Na(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();const t=function(e,t){return e&&e.length>0?(Na(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?md(e.updateTime):md(t);return n.isEqual(Qa.min())&&(n=md(t)),new _h(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=md(e.commitTime);return this.listener.d_(n,t)}return Na(!e.writeResults||0===e.writeResults.length),this.I_=!0,this.listener.A_()}R_(){const e={};e.database=Ed(this.serializer),this.r_(e)}E_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Cd(this.serializer,e)))};this.r_(t)}}class vm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.V_=!1}m_(){if(this.V_)throw new Da(Ra.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,t,n,r){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Do(e,yd(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ra.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Da(Ra.UNKNOWN,e.toString())}))}Mo(e,t,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Mo(e,yd(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ra.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Da(Ra.UNKNOWN,e.toString())}))}terminate(){this.V_=!0,this.connection.terminate()}}class wm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Ta(t),this.y_=!1):Ia("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class bm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.ro((e=>{n.enqueueAndForget((async()=>{Nm(this)&&(Ia("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Aa(e);t.M_.add(4),await Sm(t),t.N_.set("Unknown"),t.M_.delete(4),await _m(t)}(this))}))})),this.N_=new wm(n,r)}}async function _m(e){if(Nm(e))for(const t of e.x_)await t(!0)}async function Sm(e){for(const t of e.x_)await t(!1)}function Em(e,t){const n=Aa(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),xm(n)?Cm(n):Qm(n).Zo()&&Tm(n,t))}function Im(e,t){const n=Aa(e),r=Qm(n);n.F_.delete(t),r.Zo()&&km(n,t),0===n.F_.size&&(r.Zo()?r.t_():Nm(n)&&n.N_.set("Unknown"))}function Tm(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Qa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Qm(e).h_(t)}function km(e,t){e.L_.xe(t),Qm(e).P_(t)}function Cm(e){e.L_=new id({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Qm(e).start(),e.N_.w_()}function xm(e){return Nm(e)&&!Qm(e).Yo()&&e.F_.size>0}function Nm(e){return 0===Aa(e).M_.size}function Am(e){e.L_=void 0}async function Rm(e){e.N_.set("Online")}async function Dm(e){e.F_.forEach(((t,n)=>{Tm(e,t)}))}async function Pm(e,t){Am(e),xm(e)?(e.N_.D_(t),Cm(e)):e.N_.set("Unknown")}async function Om(e,t,n){if(e.N_.set("Online"),t instanceof nd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Ia("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Lm(e,n)}else if(t instanceof ed?e.L_.Ke(t):t instanceof td?e.L_.He(t):e.L_.We(t),!n.isEqual(Qa.min()))try{const t=await Fp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(gl.EMPTY_BYTE_STRING,r.snapshotVersion)),km(e,t);const i=new zd(r.target,t,n,r.sequenceNumber);Tm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ia("RemoteStore","Failed to raise snapshot:",t),await Lm(e,t)}}async function Lm(e,t,n){if(!vc(t))throw t;e.M_.add(1),await Sm(e),e.N_.set("Offline"),n||(n=()=>Fp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ia("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await _m(e)}))}function Mm(e,t){return t().catch((n=>Lm(e,n,t)))}async function Fm(e){const t=Aa(e),n=Jm(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Um(t);)try{const e=await jp(t.localStore,r);if(null===e){0===t.v_.length&&n.t_();break}r=e.batchId,jm(t,e)}catch(e){await Lm(t,e)}Vm(t)&&zm(t)}function Um(e){return Nm(e)&&e.v_.length<10}function jm(e,t){e.v_.push(t);const n=Jm(e);n.Zo()&&n.T_&&n.E_(t.mutations)}function Vm(e){return Nm(e)&&!Jm(e).Yo()&&e.v_.length>0}function zm(e){Jm(e).start()}async function Bm(e){Jm(e).R_()}async function qm(e){const t=Jm(e);for(const n of e.v_)t.E_(n.mutations)}async function Km(e,t,n){const r=e.v_.shift(),i=Uh.from(r,t,n);await Mm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Fm(e)}async function Wm(e,t){t&&Jm(e).T_&&await async function(e,t){if(function(e){return qh(e)&&e!==Ra.ABORTED}(t.code)){const n=e.v_.shift();Jm(e).e_(),await Mm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Fm(e)}}(e,t),Vm(e)&&zm(e)}async function Gm(e,t){const n=Aa(e);n.asyncQueue.verifyOperationInProgress(),Ia("RemoteStore","RemoteStore received new credentials");const r=Nm(n);n.M_.add(3),await Sm(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await _m(n)}async function Hm(e,t){const n=Aa(e);t?(n.M_.delete(2),await _m(n)):t||(n.M_.add(2),await Sm(n),n.N_.set("Unknown"))}function Qm(e){return e.B_||(e.B_=function(e,t,n){const r=Aa(e);return r.m_(),new gm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Rm.bind(null,e),Io:Dm.bind(null,e),Eo:Pm.bind(null,e),l_:Om.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.e_(),xm(e)?Cm(e):e.N_.set("Unknown")):(await e.B_.stop(),Am(e))}))),e.B_}function Jm(e){return e.k_||(e.k_=function(e,t,n){const r=Aa(e);return r.m_(),new ym(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:()=>Promise.resolve(),Io:Bm.bind(null,e),Eo:Wm.bind(null,e),A_:qm.bind(null,e),d_:Km.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.e_(),await Fm(e)):(await e.k_.stop(),e.v_.length>0&&(Ia("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class Ym{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ym(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Da(Ra.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $m(e,t){if(Ta("AsyncQueue","".concat(t,": ").concat(e)),vc(e))return new Da(Ra.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Xm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Za.comparator(t.key,n.key):(e,t)=>Za.comparator(e.key,t.key),this.keyedMap=Ju(),this.sortedSet=new cl(this.comparator)}static emptySet(e){return new Xm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Xm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Zm{constructor(){this.q_=new cl(Za.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):xa():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class eg{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new eg(e,t,Xm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class tg{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class ng{constructor(){this.queries=new Wu((e=>ju(e)),Uu),this.onlineState="Unknown",this.z_=new Set}}async function rg(e,t){const n=Aa(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new tg,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=$m(e,"Initialization of query '".concat(Vu(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&ag(n)}async function ig(e,t){const n=Aa(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sg(e,t){const n=Aa(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&ag(n)}function og(e,t,n){const r=Aa(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function ag(e){e.z_.forEach((e=>{e.next()}))}var cg,lg;(lg=cg||(cg={})).J_="default",lg.Cache="cache";class ug{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new eg(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=eg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==cg.Cache}}class hg{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class dg{constructor(e){this.serializer=e}hs(e){return bd(this.serializer,e)}Ps(e){return e.metadata.exists?kd(this.serializer,e.document,!1):Jl.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return md(e)}}class fg{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pg(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=Ya.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new dg(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||nh()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Aa(e);let s=nh(),o=Hu();for(const l of n){const e=t.hs(l.metadata.name);l.document&&(s=s.add(e));const n=t.Ps(l);n.setReadTime(t.Is(l.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),c=await Vp(i,function(e){return Ou(Au(Ya.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Up(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new dg(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await Gp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function pg(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class mg{constructor(e){this.key=e}}class gg{constructor(e){this.key=e}}class yg{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=nh(),this.mutatedKeys=nh(),this.Ia=qu(e),this.Ta=new Xm(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new Zm,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=zu(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||c&&this.Ia(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Zi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xa()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,c=a!==this.ha;return this.ha=a,0!==s.length||c?{snapshot:new eg(this.query,e.Ta,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Zm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=nh(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new gg(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new mg(n))})),t}pa(e){this.la=e.ls,this.Pa=nh();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return eg.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class vg{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class wg{constructor(e){this.key=e,this.wa=!1}}class bg{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Wu((e=>ju(e)),Uu),this.Da=new Map,this.Ca=new Set,this.va=new cl(Za.comparator),this.Fa=new Map,this.Ma=new mp,this.xa={},this.Oa=new Map,this.Na=Kf.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function _g(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Yg(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Eg(r,t,n,!0),i}async function Sg(e,t){const n=Yg(e);await Eg(n,t,!0,!1)}async function Eg(e,t,n,r){const i=await Vp(e.localStore,Ou(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Ig(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Em(e.remoteStore,i),a}async function Ig(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Zi&&(i=await Bp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Mg(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await Bp(e.localStore,t,!0),o=new yg(t,s.ls),a=o.da(s.documents),c=Zh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Mg(e,n,l.fa);const u=new vg(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function Tg(e,t,n){const r=Aa(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Uu(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Im(r.remoteStore,i.targetId),Og(r,i.targetId)})).catch(hc)):(Og(r,i.targetId),await zp(r.localStore,i.targetId,!0))}async function kg(e,t){const n=Aa(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Im(n.remoteStore,r.targetId))}async function Cg(e,t){const n=Aa(e);try{const e=await function(e,t){const n=Aa(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(gl.EMPTY_BYTE_STRING,Qa.min()).withLastLimboFreeSnapshotVersion(Qa.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.qr.updateTargetData(e,l))}));let a=Hu(),c=nh();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Up(e,s,t.documentUpdates).next((e=>{a=e.us,c=e.cs}))),!r.isEqual(Qa.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return dc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Na(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Na(r.wa):e.removedDocuments.size>0&&(Na(r.wa),r.wa=!1))})),await jg(n,e,t)}catch(e){await hc(e)}}function xg(e,t,n){const r=Aa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Aa(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&ag(n)}(r.eventManager,t),e.length&&r.Sa.l_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ng(e,t,n){const r=Aa(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new cl(Za.comparator);e=e.insert(s,Jl.newNoDocument(s,Qa.min()));const n=nh().add(s),i=new Xh(Qa.min(),new Map,new cl(Ka),e,n);await Cg(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Ug(r)}else await zp(r.localStore,t,!1).then((()=>Og(r,t,n))).catch(hc)}async function Ag(e,t){const n=Aa(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Aa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=dc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Na(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=nh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Pg(n,r,null),Dg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jg(n,e)}catch(e){await hc(e)}}async function Rg(e,t,n){const r=Aa(e);try{const e=await function(e,t){const n=Aa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Na(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Pg(r,t,n),Dg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await jg(r,e)}catch(n){await hc(n)}}function Dg(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Pg(e,t,n){const r=Aa(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Og(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Rr(t).forEach((t=>{e.Ma.containsKey(t)||Lg(e,t)}))}function Lg(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Im(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Ug(e))}function Mg(e,t,n){for(const r of n)r instanceof mg?(e.Ma.addReference(r.key,t),Fg(e,r)):r instanceof gg?(Ia("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Lg(e,r.key)):xa()}function Fg(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Ia("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Ug(e))}function Ug(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Za(Ya.fromString(t)),r=e.Na.next();e.Fa.set(r,new wg(n)),e.va=e.va.insert(n,r),Em(e.remoteStore,new zd(Ou(Au(n.path)),r,"TargetPurposeLimboResolution",Tc.oe))}}async function jg(e,t,n){const r=Aa(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Rp.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.l_(i),await async function(e,t){const n=Aa(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>dc.forEach(t,(t=>dc.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>dc.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!vc(e))throw e;Ia("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function Vg(e,t){const n=Aa(e);if(!n.currentUser.isEqual(t)){Ia("SyncEngine","User change. New user:",t.toKey());const e=await Mp(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Da(Ra.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jg(n,e._s)}}function zg(e,t){const n=Aa(e),r=n.Fa.get(t);if(r&&r.wa)return nh().add(r.key);{let e=nh();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function Bg(e,t){const n=Aa(e),r=await Bp(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&Mg(n,t.targetId,i.fa),i}async function qg(e,t){const n=Aa(e);return Kp(n.localStore,t).then((e=>jg(n,e)))}async function Kg(e,t,n,r){const i=Aa(e),s=await function(e,t){const n=Aa(e),r=Aa(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):dc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Fm(i.remoteStore):"acknowledged"===n||"rejected"===n?(Pg(i,t,r||null),Dg(i,t),function(e,t){Aa(Aa(e).mutationQueue).Fn(t)}(i.localStore,t)):xa(),await jg(i,s)):Ia("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Wg(e,t,n){const r=Aa(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await Vp(r.localStore,Ou(t[0]));for(const e of t){const t=r.ba.get(e),n=await Bg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await qp(r.localStore,o);e=await Vp(r.localStore,t),await Ig(r,Gg(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.l_(s),i}function Gg(e){return Nu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Hg(e){return function(e){return Aa(Aa(e).persistence).Li()}(Aa(e).localStore)}async function Qg(e,t,n,r){const i=Aa(e);if(i.La)return void Ia("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Kp(i.localStore,Bu(s[0])),r=Xh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,gl.EMPTY_BYTE_STRING);await jg(i,e,r);break}case"rejected":await zp(i.localStore,t,!0),Og(i,t,r);break;default:xa()}}async function Jg(e,t,n){const r=Yg(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Ia("SyncEngine","Adding an already active target "+e);continue}const t=await qp(r.localStore,e),n=await Vp(r.localStore,t);await Ig(r,Gg(t),n.targetId,!1,n.resumeToken),Em(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await zp(r.localStore,e,!1).then((()=>{Im(r.remoteStore,e),Og(r,e)})).catch(hc)}}function Yg(e){const t=Aa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ng.bind(null,t),t.Sa.l_=sg.bind(null,t.eventManager),t.Sa.ka=og.bind(null,t.eventManager),t}function $g(e){const t=Aa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ag.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rg.bind(null,t),t}class Xg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=fm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Lp(this.persistence,new Pp,e.initialUser,this.serializer)}createPersistence(e){return new _p(Ep.jr,this.serializer)}createSharedClientState(e){return new nm}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Zg extends Xg{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await $g(this.Qa.syncEngine),await Fm(this.Qa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Lp(this.persistence,new Pp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new $f(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ic(t,this.persistence);return new Ec(e.asyncQueue,n)}createPersistence(e){const t=Ap(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mf.withCacheSize(this.cacheSizeBytes):Mf.DEFAULT;return new Cp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,hm(),dm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new nm}}class ey extends Zg{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof tm&&(this.sharedClientState.syncEngine={Ys:Kg.bind(null,t),Zs:Qg.bind(null,t),Xs:Jg.bind(null,t),Li:Hg.bind(null,t),Js:qg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Aa(e);if(Yg(n),$g(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Wg(n,e.toArray());n.La=!0,await Hm(n.remoteStore,!0);for(const r of t)Em(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Og(n,i),zp(n.localStore,i,!0)))),Im(n.remoteStore,i)})),await t,await Wg(n,e),function(e){const t=Aa(e);t.Fa.forEach(((e,n)=>{Im(t.remoteStore,n)})),t.Ma.Vr(),t.Fa=new Map,t.va=new cl(Za.comparator)}(n),n.La=!1,await Hm(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=hm();if(!tm.D(t))throw new Da(Ra.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ap(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tm(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ty{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>xg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vg.bind(null,this.syncEngine),await Hm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ng}createDatastore(e){const t=fm(e.databaseInfo.databaseId),n=function(e){return new um(e)}(e.databaseInfo);return function(e,t,n,r){return new vm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new bm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>xg(this.syncEngine,e,0)),im.D()?new im:new rm)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new bg(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Aa(e);Ia("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Sm(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function ny(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ta("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class iy{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Pa,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new hg(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class sy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Da(Ra.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Aa(e),r={documents:t.map((e=>wd(n.serializer,e)))},i=await n.Mo("BatchGetDocuments",n.serializer.databaseId,Ya.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Na(!!t.found),t.found.name,t.found.updateTime;const n=bd(e,t.found.name),r=md(t.found.updateTime),i=t.found.createTime?md(t.found.createTime):Qa.min(),s=new Hl({mapValue:{fields:t.found.fields}});return Jl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Na(!!t.missing),Na(!!t.readTime);const n=bd(e,t.missing),r=md(t.readTime);return Jl.newNoDocument(n,r)}(e,t):xa()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Na(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Lh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Za.fromPath(t);this.mutations.push(new Mh(n,this.precondition(n)))})),await async function(e,t){const n=Aa(e),r={writes:t.map((e=>Cd(n.serializer,e)))};await n.Do("Commit",n.serializer.databaseId,Ya.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xa();t=Qa.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Da(Ra.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Qa.min())?Sh.exists(!1):Sh.updateTime(t):Sh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Qa.min()))throw new Da(Ra.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sh.updateTime(t)}return Sh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oy{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Jo=new pm(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Jo.Ko((async()=>{const e=new sy(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!qh(t)}return!1}}class ay{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ba.UNAUTHENTICATED,this.clientId=qa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ia("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ia("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Da(Ra.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$m(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function cy(e,t){e.asyncQueue.verifyOperationInProgress(),Ia("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Mp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ly(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hy(e);Ia("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Gm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Gm(t.remoteStore,n))),e._onlineComponents=t}function uy(e){return"FirebaseError"===e.name?e.code===Ra.FAILED_PRECONDITION||e.code===Ra.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function hy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ia("FirestoreClient","Using user provided OfflineComponentProvider");try{await cy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!uy(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),await cy(e,new Xg)}}else Ia("FirestoreClient","Using default OfflineComponentProvider"),await cy(e,new Xg);return e._offlineComponents}async function dy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ia("FirestoreClient","Using user provided OnlineComponentProvider"),await ly(e,e._uninitializedComponentsProvider._online)):(Ia("FirestoreClient","Using default OnlineComponentProvider"),await ly(e,new ty))),e._onlineComponents}function fy(e){return hy(e).then((e=>e.persistence))}function py(e){return hy(e).then((e=>e.localStore))}function my(e){return dy(e).then((e=>e.remoteStore))}function gy(e){return dy(e).then((e=>e.syncEngine))}function yy(e){return dy(e).then((e=>e.datastore))}async function vy(e){const t=await dy(e),n=t.eventManager;return n.onListen=_g.bind(null,t.syncEngine),n.onUnlisten=Tg.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Sg.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kg.bind(null,t.syncEngine),n}function wy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Pa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ry({next:s=>{t.enqueueAndForget((()=>ig(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Da(Ra.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Da(Ra.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new ug(Au(n.path),s,{includeMetadataChanges:!0,ra:!0});return rg(e,o)}(await vy(e),e.asyncQueue,t,n,r))),r.promise}function by(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Pa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ry({next:n=>{t.enqueueAndForget((()=>ig(e,o))),n.fromCache&&"server"===r.source?i.reject(new Da(Ra.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ug(n,s,{includeMetadataChanges:!0,ra:!0});return rg(e,o)}(await vy(e),e.asyncQueue,t,n,r))),r.promise}function _y(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Gh().encode(e):e,function(e,t){return new iy(e,t)}(function(e,t){if(e instanceof Uint8Array)return ny(e,t);if(e instanceof ArrayBuffer)return ny(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,fm(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Aa(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Aa(e),r=md(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(pg(r));const i=new fg(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await jg(e,o.ca,void 0),await function(e,t){const n=Aa(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return ka("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await gy(e),i,r)}))}function Sy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ey=new Map;function Iy(e,t,n){if(!n)throw new Da(Ra.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ty(e,t,n,r){if(!0===t&&!0===r)throw new Da(Ra.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ky(e){if(!Za.isDocumentKey(e))throw new Da(Ra.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cy(e){if(Za.isDocumentKey(e))throw new Da(Ra.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function xy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":xa()}function Ny(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Da(Ra.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xy(e);throw new Da(Ra.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ay(e,t){if(t<=0)throw new Da(Ra.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Ry{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Da(Ra.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Da(Ra.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ty("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Da(Ra.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Da(Ra.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Da(Ra.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Da(Ra.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Da(Ra.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new La;switch(e.type){case"firstParty":return new ja(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Da(Ra.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ey.get(e);t&&(Ia("ComponentProvider","Removing Datastore"),Ey.delete(e),t.terminate())}(this),Promise.resolve()}}function Py(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Ny(e,Dy))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ba.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Da(Ra.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ba(s)}e._authCredentials=new Ma(new Oa(t,n))}}class Oy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Oy(this.firestore,e,this._query)}}class Ly{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new My(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ly(this.firestore,e,this._key)}}class My extends Oy{constructor(e,t,n){super(e,t,Au(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ly(this.firestore,null,new Za(e))}withConverter(e){return new My(this.firestore,e,this._path)}}function Fy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ot(e),Iy("collection","path",t),e instanceof Dy){const n=Ya.fromString(t,...r);return Cy(n),new My(e,null,n)}{if(!(e instanceof Ly||e instanceof My))throw new Da(Ra.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ya.fromString(t,...r));return Cy(n),new My(e.firestore,null,n)}}function Uy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ot(e),1===arguments.length&&(t=qa.newId()),Iy("doc","path",t),e instanceof Dy){const n=Ya.fromString(t,...r);return ky(n),new Ly(e,null,new Za(n))}{if(!(e instanceof Ly||e instanceof My))throw new Da(Ra.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ya.fromString(t,...r));return ky(n),new Ly(e.firestore,e instanceof My?e.converter:null,new Za(n))}}function jy(e,t){return e=ot(e),t=ot(t),(e instanceof Ly||e instanceof My)&&(t instanceof Ly||t instanceof My)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Vy(e,t){return e=ot(e),t=ot(t),e instanceof Oy&&t instanceof Oy&&e.firestore===t.firestore&&Uu(e._query,t._query)&&e.converter===t.converter}class zy{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new pm(this,"async_queue_retry"),this.hu=()=>{const e=dm();e&&Ia("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Jo.Uo()};const e=dm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=dm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Pa;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Jo.reset()}catch(iN){if(!vc(iN))throw iN;Ia("AsyncQueue","Operation failed with retryable error: "+iN)}this.su.length>0&&this.Jo.Ko((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ta("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=Ym.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&xa()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function By(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class qy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ky extends Dy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Gy(this),this._firestoreClient.terminate()}}function Wy(e){return e._firestoreClient||Gy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Gy(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Il(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Sy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ay(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Hy(e,t,n){const r=new Pa;return e.asyncQueue.enqueue((async()=>{try{await cy(e,n),await ly(e,t),r.resolve()}catch(e){const n=e;if(!uy(n))throw n;ka("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Qy(e){return function(e){const t=new Pa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Aa(e);Nm(n.remoteStore)||Ia("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Aa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=$m(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await gy(e),t))),t.promise}(Wy(e=Ny(e,Ky)))}function Jy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await fy(e),n=await my(e);return t.setNetworkEnabled(!0),function(e){const t=Aa(e);return t.M_.delete(0),_m(t)}(n)}))}(Wy(e=Ny(e,Ky)))}function Yy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await fy(e),n=await my(e);return t.setNetworkEnabled(!1),async function(e){const t=Aa(e);t.M_.add(0),await Sm(t),t.N_.set("Offline")}(n)}))}(Wy(e=Ny(e,Ky)))}function $y(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Aa(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await py(e),t)))}(Wy(e=Ny(e,Ky)),t).then((t=>t?new Oy(e,null,t.query):null))}function Xy(e){if(e._initialized||e._terminated)throw new Da(Ra.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zy(gl.fromBase64String(e))}catch(e){throw new Da(Ra.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Zy(gl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ev{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Da(Ra.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xa(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tv{constructor(e){this._methodName=e}}class nv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Da(Ra.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Da(Ra.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ka(this._lat,e._lat)||Ka(this._long,e._long)}}const rv=/^__.*__$/;class iv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ah(e,this.data,t,this.fieldTransforms)}}class sv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ov(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xa()}}class av{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new av(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Cv(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(ov(this.fu)&&rv.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class cv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||fm(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new av({fu:e,methodName:t,vu:n,path:Xa.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lv(e){const t=e._freezeSettings(),n=fm(e._databaseId);return new cv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function uv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Ev("Data must be an object, but it was:",o,r);const a=_v(r,o);let c,l;if(s.merge)c=new pl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Iv(t,r,n);if(!o.contains(i))throw new Da(Ra.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));xv(e,i)||e.push(i)}c=new pl(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new iv(new Hl(a),c,l)}class hv extends tv{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hv}}function dv(e,t,n){return new av({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class fv extends tv{_toFieldTransform(e){return new bh(e.path,new dh)}isEqual(e){return e instanceof fv}}class pv extends tv{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=dv(this,e,!0),n=this.Mu.map((e=>bv(e,t))),r=new fh(n);return new bh(e.path,r)}isEqual(e){return e instanceof pv&&Xe(this.Mu,e.Mu)}}class mv extends tv{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=dv(this,e,!0),n=this.Mu.map((e=>bv(e,t))),r=new mh(n);return new bh(e.path,r)}isEqual(e){return e instanceof mv&&Xe(this.Mu,e.Mu)}}class gv extends tv{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new yh(e.serializer,ah(e.serializer,this.xu));return new bh(e.path,t)}isEqual(e){return e instanceof gv&&this.xu===e.xu}}function yv(e,t,n,r){const i=e.Fu(1,t,n);Ev("Data must be an object, but it was:",i,r);const s=[],o=Hl.empty();ol(r,((e,r)=>{const a=kv(t,e,n);r=ot(r);const c=i.Su(a);if(r instanceof hv)s.push(a);else{const e=bv(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new pl(s);return new sv(o,a,i.fieldTransforms)}function vv(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Iv(t,r,n)],c=[i];if(s.length%2!=0)throw new Da(Ra.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Iv(t,s[d])),c.push(s[d+1]);const l=[],u=Hl.empty();for(let d=a.length-1;d>=0;--d)if(!xv(l,a[d])){const e=a[d];let t=c[d];t=ot(t);const n=o.Su(e);if(t instanceof hv)l.push(e);else{const r=bv(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new pl(l);return new sv(u,h,o.fieldTransforms)}function wv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return bv(n,e.Fu(r?4:3,t))}function bv(e,t){if(Sv(e=ot(e)))return Ev("Unsupported field value:",t,e),_v(e,t);if(e instanceof tv)return function(e,t){if(!ov(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=bv(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ot(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ah(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ha.fromDate(e);return{timestampValue:dd(t.serializer,n)}}if(e instanceof Ha){const n=new Ha(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:dd(t.serializer,n)}}if(e instanceof nv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Zy)return{bytesValue:fd(t.serializer,e._byteString)};if(e instanceof Ly){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:gd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(xy(e)))}(e,t)}function _v(e,t){const n={};return al(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ol(e,((e,r)=>{const i=bv(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Sv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ha||e instanceof nv||e instanceof Zy||e instanceof Ly||e instanceof tv)}function Ev(e,t,n){if(!Sv(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=xy(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Iv(e,t,n){if((t=ot(t))instanceof ev)return t._internalPath;if("string"==typeof t)return kv(e,t);throw Cv("Field path arguments must be of type string or ",e,!1,void 0,n)}const Tv=new RegExp("[~\\*/\\[\\]]");function kv(e,t,n){if(t.search(Tv)>=0)throw Cv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new ev(...t.split("."))._internalPath}catch(hr){throw Cv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Da(Ra.INVALID_ARGUMENT,a+e+c)}function xv(e,t){return e.some((e=>e.isEqual(t)))}class Nv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ly(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Av(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Av extends Nv{data(){return super.data()}}function Rv(e,t){return"string"==typeof t?kv(e,t):t instanceof ev?t._internalPath:t._delegate._internalPath}function Dv(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Da(Ra.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pv{}class Ov extends Pv{}function Lv(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Pv&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Fv)).length,n=e.filter((e=>e instanceof Mv)).length;if(t>1||t>0&&n>0)throw new Da(Ra.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Mv extends Ov{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Mv(e,t,n)}_apply(e){const t=this._parse(e);return Wv(e._query,t),new Oy(e.firestore,e.converter,Mu(e._query,t))}_parse(e){const t=lv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Da(Ra.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Kv(o,s);const t=[];for(const n of o)t.push(qv(r,e,n));a={arrayValue:{values:t}}}else a=qv(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Kv(o,s),a=wv(n,t,o,"in"===s||"not-in"===s);return nu.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Fv extends Pv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fv(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ru.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Wv(n,i),n=Mu(n,i)}(e._query,t),new Oy(e.firestore,e.converter,Mu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Uv extends Ov{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uv(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zl(t,n)}(e._query,this._field,this._direction);return new Oy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new xu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class jv extends Ov{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new jv(e,t,n)}_apply(e){return new Oy(e.firestore,e.converter,Fu(e._query,this._limit,this._limitType))}}class Vv extends Ov{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Vv(e,t,n)}_apply(e){const t=Bv(e,this.type,this._docOrFields,this._inclusive);return new Oy(e.firestore,e.converter,function(e,t){return new xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class zv extends Ov{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new zv(e,t,n)}_apply(e){const t=Bv(e,this.type,this._docOrFields,this._inclusive);return new Oy(e.firestore,e.converter,function(e,t){return new xu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Bv(e,t,n,r){if(n[0]=ot(n[0]),n[0]instanceof Nv)return function(e,t,n,r,i){if(!r)throw new Da(Ra.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Pu(e))if(o.field.isKeyField())s.push(Ll(t,r.key));else{const e=r.data.field(o.field);if(_l(e))throw new Da(Ra.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Yl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=lv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Da(Ra.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Du(e)&&-1!==s.indexOf("/"))throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Ya.fromString(s));if(!Za.isDocumentKey(n))throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Za(n);a.push(Ll(t,i))}else{const e=wv(n,r,s);a.push(e)}}return new Yl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function qv(e,t,n){if("string"==typeof(n=ot(n))){if(""===n)throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Du(t)&&-1!==n.indexOf("/"))throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ya.fromString(n));if(!Za.isDocumentKey(r))throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Ll(e,new Za(r))}if(n instanceof Ly)return Ll(e,n._key);throw new Da(Ra.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xy(n),"."))}function Kv(e,t){if(!Array.isArray(e)||0===e.length)throw new Da(Ra.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Wv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Da(Ra.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Da(Ra.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Gv{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xa()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ol(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new nv(wl(e.latitude),wl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=vl(e);return new Ha(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ya.fromString(e);Na(Vd(n));const r=new Tl(n.get(1),n.get(3)),i=new Za(n.popFirst(5));return r.isEqual(t)||Ta("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Hv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Qv extends Gv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ly(this.firestore,null,t)}}class Jv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yv extends Nv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new $v(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Rv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class $v extends Yv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Xv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new $v(this._firestore,this._userDataWriter,n.key,n,new Jv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Da(Ra.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new $v(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new $v(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Zv(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Zv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xa()}}function ew(e,t){return e instanceof Yv&&t instanceof Yv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Xv&&t instanceof Xv&&e._firestore===t._firestore&&Vy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class tw extends Gv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ly(this.firestore,null,t)}}function nw(e){e=Ny(e,Ly);const t=Ny(e.firestore,Ky),n=Wy(t),r=new tw(t);return function(e,t){const n=new Pa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Aa(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Da(Ra.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=$m(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await py(e),t,n))),n.promise}(n,e._key).then((n=>new Yv(t,r,e._key,n,new Jv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function rw(e){e=Ny(e,Oy);const t=Ny(e.firestore,Ky),n=Wy(t),r=new tw(t);return function(e,t){const n=new Pa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Bp(e,t,!0),i=new yg(t,r.ls),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=$m(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await py(e),t,n))),n.promise}(n,e._query).then((n=>new Xv(t,r,e,n)))}function iw(e,t,n){e=Ny(e,Ly);const r=Ny(e.firestore,Ky),i=Hv(e.converter,t,n);return cw(r,[uv(lv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Sh.none())])}function sw(e,t,n){e=Ny(e,Ly);const r=Ny(e.firestore,Ky),i=lv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=ot(t))||t instanceof ev?vv(i,"updateDoc",e._key,t,n,a):yv(i,"updateDoc",e._key,t),cw(r,[s.toMutation(e._key,Sh.exists(!0))])}function ow(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=ot(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||By(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(By(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Ly)h=Ny(e.firestore,Ky),d=Au(e._key.path),u={next:t=>{n[c]&&n[c](lw(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Ny(e,Oy);h=Ny(t.firestore,Ky),d=t._query;const r=new tw(h);u={next:e=>{n[c]&&n[c](new Xv(h,r,t,e))},error:n[c+1],complete:n[c+2]},Dv(e._query)}return function(e,t,n,r){const i=new ry(r),s=new ug(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>rg(await vy(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>ig(await vy(e),s)))}}(Wy(h),d,l,u)}function aw(e,t){return function(e,t){const n=new ry(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Aa(e).z_.add(t),t.next()}(await vy(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Aa(e).z_.delete(t)}(await vy(e),n)))}}(Wy(e=Ny(e,Ky)),By(t)?t:{next:t})}function cw(e,t){return function(e,t){const n=new Pa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=$g(e);try{const e=await function(e,t){const n=Aa(e),r=Ha.now(),i=t.reduce(((e,t)=>e.add(t.key)),nh());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Hu(),c=nh();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=xh(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Rh(e.key,t,Ql(t.value.mapValue),Sh.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Yu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new cl(Ka)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await jg(r,e.changes),await Fm(r.remoteStore)}catch(e){const t=$m(e,"Failed to persist write");n.reject(t)}}(await gy(e),t,n))),n.promise}(Wy(e),t)}function lw(e,t,n){const r=n.docs.get(t._key),i=new tw(e);return new Yv(e,i,t._key,r,new Jv(n.hasPendingWrites,n.fromCache),t.converter)}const uw={maxAttempts:5};class hw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lv(e)}set(e,t,n){this._verifyNotCommitted();const r=dw(e,this._firestore),i=Hv(r.converter,t,n),s=uv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Sh.none())),this}update(e,t,n){this._verifyNotCommitted();const r=dw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ot(t))||t instanceof ev?vv(this._dataReader,"WriteBatch.update",r._key,t,n,o):yv(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Sh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dw(e,this._firestore);return this._mutations=this._mutations.concat(new Lh(t._key,Sh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Da(Ra.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dw(e,t){if((e=ot(e)).firestore!==t)throw new Da(Ra.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class fw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lv(e)}get(e){const t=dw(e,this._firestore),n=new Qv(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return xa();const r=e[0];if(r.isFoundDocument())return new Nv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Nv(this._firestore,n,t._key,null,t.converter);throw xa()}))}set(e,t,n){const r=dw(e,this._firestore),i=Hv(r.converter,t,n),s=uv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=dw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ot(t))||t instanceof ev?vv(this._dataReader,"Transaction.update",r._key,t,n,o):yv(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=dw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dw(e,this._firestore),n=new tw(this._firestore);return super.get(e).then((e=>new Yv(this._firestore,n,t._key,e._document,new Jv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_a=e}(kn),yn(new at("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ky(new Fa(e.getProvider("auth-internal")),new za(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Da(Ra.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Dn(wa,"4.6.1",e),Dn(wa,"4.6.1","esm2017")}();function pw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Da("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function mw(){if("undefined"===typeof Uint8Array)throw new Da("unimplemented","Uint8Arrays are not available in this environment.")}function gw(){if("undefined"==typeof atob)throw new Da("unimplemented","Blobs are unavailable in Firestore in this environment.")}class yw{constructor(e){this._delegate=e}static fromBase64String(e){return gw(),new yw(Zy.fromBase64String(e))}static fromUint8Array(e){return mw(),new yw(Zy.fromUint8Array(e))}toBase64(){return gw(),this._delegate.toBase64()}toUint8Array(){return mw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ww{enableIndexedDbPersistence(e,t){return function(e,t){Xy(e=Ny(e,Ky));const n=Wy(e);if(n._uninitializedComponentsProvider)throw new Da(Ra.FAILED_PRECONDITION,"SDK cache is already specified.");ka("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ty;return Hy(n,i,new Zg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Xy(e=Ny(e,Ky));const t=Wy(e);if(t._uninitializedComponentsProvider)throw new Da(Ra.FAILED_PRECONDITION,"SDK cache is already specified.");ka("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ty;return Hy(t,r,new ey(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Da(Ra.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Pa;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!pc.D())return Promise.resolve();const t=e+"main";await pc.delete(t)}(Ap(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class bw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ka("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Py(this._delegate,e,t,n)}enableNetwork(){return Jy(this._delegate)}disableNetwork(){return Yy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ty("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Qy(this._delegate)}onSnapshotsInSync(e){return aw(this._delegate,e)}get app(){if(!this._appCompat)throw new Da("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ow(this,Fy(this._delegate,e))}catch(iN){throw kw(iN,"collection()","Firestore.collection()")}}doc(e){try{return new Tw(this,Uy(this._delegate,e))}catch(iN){throw kw(iN,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rw(this,function(e,t){if(e=Ny(e,Dy),Iy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Da(Ra.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Oy(e,null,function(e){return new xu(Ya.emptyPath(),e)}(t))}(this._delegate,e))}catch(iN){throw kw(iN,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Ny(e,Ky);const r=Object.assign(Object.assign({},uw),n);return function(e){if(e.maxAttempts<1)throw new Da(Ra.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Pa;return e.asyncQueue.enqueueAndForget((async()=>{const i=await yy(e);new oy(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(Wy(e),(n=>t(new fw(e,n))),r)}(this._delegate,(t=>e(new Sw(this,t))))}batch(){return Wy(this._delegate),new Ew(new hw(this._delegate,(e=>cw(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Wy(e=Ny(e,Ky)),r=new qy;return _y(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return $y(this._delegate,e).then((e=>e?new Rw(this,e):null))}}class _w extends Gv{constructor(e){super(),this.firestore=e}convertBytes(e){return new yw(new Zy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Tw.forKey(t,this.firestore,null)}}class Sw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new _w(e)}get(e){const t=Lw(e);return this._delegate.get(t).then((e=>new Nw(this._firestore,new Yv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Lw(e);return n?(pw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Lw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Lw(e);return this._delegate.delete(t),this}}class Ew{constructor(e){this._delegate=e}set(e,t,n){const r=Lw(e);return n?(pw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Lw(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Lw(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Iw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new $v(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Aw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Iw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Iw(e,new _w(e),t),r.set(t,i)),i}}Iw.INSTANCES=new WeakMap;class Tw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _w(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Da("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Tw(t,new Ly(t._delegate,n,new Za(e)))}static forKey(e,t,n){return new Tw(t,new Ly(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Ow(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ow(this.firestore,Fy(this._delegate,e))}catch(iN){throw kw(iN,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ot(e))instanceof Ly&&jy(this._delegate,e)}set(e,t){t=pw("DocumentReference.set",t);try{return t?iw(this._delegate,e,t):iw(this._delegate,e)}catch(iN){throw kw(iN,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?sw(this._delegate,e):sw(this._delegate,e,t,...r)}catch(iN){throw kw(iN,"updateDoc()","DocumentReference.update()")}}delete(){return cw(Ny((e=this._delegate).firestore,Ky),[new Lh(e._key,Sh.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Cw(t),i=xw(t,(e=>new Nw(this.firestore,new Yv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return ow(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?nw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ny(e,Ly);const t=Ny(e.firestore,Ky);return wy(Wy(t),e._key,{source:"server"}).then((n=>lw(t,e,n)))}(this._delegate):function(e){e=Ny(e,Ly);const t=Ny(e.firestore,Ky);return wy(Wy(t),e._key).then((n=>lw(t,e,n)))}(this._delegate),t.then((e=>new Nw(this.firestore,new Yv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Tw(this.firestore,e?this._delegate.withConverter(Iw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function kw(e,t,n){return e.message=e.message.replace(t,n),e}function Cw(e){for(const t of e)if("object"===typeof t&&!vw(t))return t;return{}}function xw(e,t){var n,r;let i;return i=vw(e[0])?e[0]:vw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Nw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Tw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ew(this._delegate,e._delegate)}}class Aw extends Nw{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||xa(),t}}class Rw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new _w(e)}where(e,t,n){try{return new Rw(this.firestore,Lv(this._delegate,function(e,t,n){const r=t,i=Rv("where",e);return Mv._create(i,r,n)}(e,t,n)))}catch(iN){throw kw(iN,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rw(this.firestore,Lv(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Rv("orderBy",e);return Uv._create(n,t)}(e,t)))}catch(iN){throw kw(iN,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rw(this.firestore,Lv(this._delegate,(Ay("limit",t=e),jv._create("limit",t,"F"))))}catch(t){throw kw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Rw(this.firestore,Lv(this._delegate,(Ay("limitToLast",t=e),jv._create("limitToLast",t,"L"))))}catch(t){throw kw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Rw(this.firestore,Lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vv._create("startAt",t,!0)}(...arguments)))}catch(iN){throw kw(iN,"startAt()","Query.startAt()")}}startAfter(){try{return new Rw(this.firestore,Lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vv._create("startAfter",t,!1)}(...arguments)))}catch(iN){throw kw(iN,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Rw(this.firestore,Lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zv._create("endBefore",t,!1)}(...arguments)))}catch(iN){throw kw(iN,"endBefore()","Query.endBefore()")}}endAt(){try{return new Rw(this.firestore,Lv(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zv._create("endAt",t,!0)}(...arguments)))}catch(iN){throw kw(iN,"endAt()","Query.endAt()")}}isEqual(e){return Vy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?rw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ny(e,Oy);const t=Ny(e.firestore,Ky),n=Wy(t),r=new tw(t);return by(n,e._query,{source:"server"}).then((n=>new Xv(t,r,e,n)))}(this._delegate):function(e){e=Ny(e,Oy);const t=Ny(e.firestore,Ky),n=Wy(t),r=new tw(t);return Dv(e._query),by(n,e._query).then((n=>new Xv(t,r,e,n)))}(this._delegate),t.then((e=>new Pw(this.firestore,new Xv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Cw(t),i=xw(t,(e=>new Pw(this.firestore,new Xv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return ow(this._delegate,r,i)}withConverter(e){return new Rw(this.firestore,e?this._delegate.withConverter(Iw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Dw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Aw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Aw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Dw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Aw(this._firestore,n))}))}isEqual(e){return ew(this._delegate,e._delegate)}}class Ow extends Rw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Tw(this.firestore,e):null}doc(e){try{return new Tw(this.firestore,void 0===e?Uy(this._delegate):Uy(this._delegate,e))}catch(iN){throw kw(iN,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Ny(e.firestore,Ky),r=Uy(e),i=Hv(e.converter,t);return cw(n,[uv(lv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Sh.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Tw(this.firestore,e)))}isEqual(e){return jy(this._delegate,e._delegate)}withConverter(e){return new Ow(this.firestore,e?this._delegate.withConverter(Iw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Lw(e){return Ny(e,Ly)}class Mw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new ev(...t)}static documentId(){return new Mw(Xa.keyField().canonicalString())}isEqual(e){return(e=ot(e))instanceof ev&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fw{constructor(e){this._delegate=e}static serverTimestamp(){const e=new fv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Fw(e)}static delete(){const e=new hv("deleteField");return e._methodName="FieldValue.delete",new Fw(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new pv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Fw(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Fw(e)}static increment(e){const t=new gv("increment",e);return t._methodName="FieldValue.increment",new Fw(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Uw={Firestore:bw,GeoPoint:nv,Timestamp:Ha,Blob:yw,Transaction:Sw,WriteBatch:Ew,DocumentReference:Tw,DocumentSnapshot:Nw,Query:Rw,QueryDocumentSnapshot:Aw,QuerySnapshot:Pw,CollectionReference:Ow,FieldPath:Mw,FieldValue:Fw,setLogLevel:function(e){var t;t=e,Sa.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var jw;(function(e,t){e.INTERNAL.registerComponent(new at("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Uw)))})(jw=$n,((e,t)=>new bw(e,t,new ww))),jw.registerVersion("@firebase/firestore-compat","0.3.30");function Vw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const zw={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Bw="EMAIL_SIGNIN",qw="PASSWORD_RESET",Kw="RECOVER_EMAIL",Ww="REVERT_SECOND_FACTOR_ADDITION",Gw="VERIFY_AND_CHANGE_EMAIL",Hw="VERIFY_EMAIL";function Qw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jw=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Yw=Qw,$w=new Je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xw=new yt("@firebase/auth");function Zw(e){if(Xw.logLevel<=dt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xw.error("Auth (".concat(kn,"): ").concat(e),...n)}}function eb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw sb(e,...n)}function tb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sb(e,...n)}function nb(e,t,n){const r=Object.assign(Object.assign({},Yw()),{[t]:n});return new Je("auth","Firebase",r).create(t,{appName:e.name})}function rb(e){return nb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ib(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&eb(e,"argument-error"),nb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function sb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return $w.create(e,...n)}function ob(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw sb(t,...r)}}function ab(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Zw(t),new Error(t)}function cb(e,t){e||ab(t)}function lb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ub(){return"http:"===hb()||"https:"===hb()}function hb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class db{constructor(e,t){this.shortDelay=e,this.longDelay=t,cb(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())||Ke()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ub()||qe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function fb(e,t){cb(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class pb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ab("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ab("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ab("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gb=new db(3e4,6e4);function yb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function vb(e,t,n,r){return wb(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=et(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),pb.fetch()(_b(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function wb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},mb),t);try{const t=new Eb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Ib(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ib(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Ib(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Ib(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw nb(e,a,o);eb(e,a)}}catch(iN){if(iN instanceof Qe)throw iN;eb(e,"network-request-failed",{message:String(iN)})}}async function bb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await vb(e,t,n,r,i);return"mfaPendingCredential"in s&&eb(e,"multi-factor-auth-required",{_serverResponse:s}),s}function _b(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Sb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Eb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(tb(this.auth,"network-request-failed"))),gb.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ib(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tb(e,t,r);return i.customData._tokenResponse=n,i}function Tb(e){return void 0!==e&&void 0!==e.getResponse}function kb(e){return void 0!==e&&void 0!==e.enterprise}class Cb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Sb(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function xb(e,t){return vb(e,"GET","/v2/recaptchaConfig",yb(e,t))}async function Nb(e,t){return vb(e,"POST","/v1/accounts:lookup",t)}function Ab(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(iN){}}function Rb(e){return 1e3*Number(e)}function Db(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Zw("JWT malformed, contained fewer than 3 sections"),null;try{const e=Oe(n);return e?JSON.parse(e):(Zw("Failed to decode base64 JWT payload"),null)}catch(iN){return Zw("Caught error parsing JWT payload as JSON",null===iN||void 0===iN?void 0:iN.toString()),null}}function Pb(e){const t=Db(e);return ob(t,"internal-error"),ob("undefined"!==typeof t.exp,"internal-error"),ob("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ob(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(iN){throw iN instanceof Qe&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(iN)&&e.auth.currentUser===e&&await e.auth.signOut(),iN}}class Lb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(iN){return void((null===iN||void 0===iN?void 0:iN.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Mb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ab(this.lastLoginAt),this.creationTime=Ab(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fb(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ob(e,Nb(n,{idToken:r}));ob(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Ub(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),c=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!c&&l,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function Ub(e){return e.map((e=>{var{providerId:t}=e,n=Vw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class jb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ob(e.idToken,"internal-error"),ob("undefined"!==typeof e.idToken,"internal-error"),ob("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ob(0!==e.length,"internal-error");const t=Pb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ob(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await wb(e,{},(async()=>{const n=et({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=_b(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",pb.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new jb;return n&&(ob("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ob("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ob("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jb,this.toJSON())}_performRefresh(){return ab("not implemented")}}function Vb(e,t){ob("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class zb{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Vw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Mb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ob(this,this.stsTokenManager.getToken(this.auth,e));return ob(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ot(e),r=await n.getIdToken(t),i=Db(r);ob(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ab(Rb(i.auth_time)),issuedAtTime:Ab(Rb(i.iat)),expirationTime:Ab(Rb(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ot(e);await Fb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ob(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zb(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ob(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(rb(this.auth));const e=await this.getIdToken();return await Ob(this,async function(e,t){return vb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;ob(v&&S,e,"internal-error");const E=jb.fromJSON(this.name,S);ob("string"===typeof v,e,"internal-error"),Vb(u,e.name),Vb(h,e.name),ob("boolean"===typeof w,e,"internal-error"),ob("boolean"===typeof b,e,"internal-error"),Vb(d,e.name),Vb(f,e.name),Vb(p,e.name),Vb(m,e.name),Vb(g,e.name),Vb(y,e.name);const I=new zb({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new jb;r.updateFromServerResponse(t);const i=new zb({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fb(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ob(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ub(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new jb;o.updateFromIdToken(n);const a=new zb({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Mb(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,c),a}}const Bb=new Map;function qb(e){cb(e instanceof Function,"Expected a class definition");let t=Bb.get(e);return t?(cb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bb.set(e,t),t)}class Kb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Kb.type="NONE";const Wb=Kb;function Gb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Hb{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Gb(this.userKey,r.apiKey,i),this.fullPersistenceKey=Gb("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zb._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Hb(qb(Wb),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||qb(Wb);const s=Gb(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=zb._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new Hb(i,e,n)):new Hb(i,e,n)}}function Qb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xb(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Jb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(e_(t))return"Blackberry";if(t_(t))return"Webos";if(Yb(t))return"Safari";if((t.includes("chrome/")||$b(t))&&!t.includes("edge/"))return"Chrome";if(Zb(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Jb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/firefox\//i.test(e)}function Yb(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/crios\//i.test(e)}function Xb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iemobile/i.test(e)}function Zb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/android/i.test(e)}function e_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/blackberry/i.test(e)}function t_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/webos/i.test(e)}function n_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function r_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return n_(e)||Zb(e)||t_(e)||e_(e)||/windows phone/i.test(e)||Xb(e)}function i_(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Qb(Ve());break;case"Worker":t="".concat(Qb(Ve()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(kn,"/").concat(r)}class s_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(iN){r(iN)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(iN){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===iN||void 0===iN?void 0:iN.message})}}}class o_{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class a_{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l_(this),this.idTokenSubscription=new l_(this),this.beforeStateQueue=new s_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$w,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qb(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Hb.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(iN){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Nb(this,{idToken:e}),n=await zb._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_n(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(iN){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(iN)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ob(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(iN){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fb(e)}catch(iN){if((null===iN||void 0===iN?void 0:iN.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(rb(this));const t=e?ot(e):null;return t&&ob(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ob(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return _n(this.app)?Promise.reject(rb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(rb(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(qb(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return vb(e,"GET","/v2/passwordPolicy",yb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new o_(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return vb(e,"POST","/v2/accounts:revokeToken",yb(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qb(e)||this._popupRedirectResolver;ob(t,this,"argument-error"),this.redirectPersistenceManager=await Hb.create(this,[qb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ob(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ob(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xw.logLevel<=dt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xw.warn("Auth (".concat(kn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function c_(e){return ot(e)}class l_{constructor(e){this.auth=e,this.observer=null,this.addObserver=rt((e=>this.observer=e))}get next(){return ob(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let u_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function h_(e){return u_.loadJS(e)}function d_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class f_{constructor(e){this.type="recaptcha-enterprise",this.auth=c_(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;kb(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{xb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Cb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&kb(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=u_.recaptchaEnterpriseScript;0!==t.length&&(t+=i),h_(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function p_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new f_(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function m_(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await p_(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await p_(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function g_(e,t,n){const r=c_(e);ob(r._canInitEmulator,r,"emulator-config-failed"),ob(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=y_(t),{host:o,port:a}=function(e){const t=y_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:v_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:v_(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function y_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function v_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class w_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ab("not implemented")}_getIdTokenResponse(e){return ab("not implemented")}_linkToIdToken(e,t){return ab("not implemented")}_getReauthenticationResolver(e){return ab("not implemented")}}async function b_(e,t){return vb(e,"POST","/v1/accounts:resetPassword",yb(e,t))}async function __(e,t){return vb(e,"POST","/v1/accounts:signUp",t)}async function S_(e,t){return bb(e,"POST","/v1/accounts:signInWithPassword",yb(e,t))}async function E_(e,t){return vb(e,"POST","/v1/accounts:sendOobCode",yb(e,t))}async function I_(e,t){return E_(e,t)}async function T_(e,t){return E_(e,t)}class k_ extends w_{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new k_(e,t,"password")}static _fromEmailAndCode(e,t){return new k_(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return m_(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",S_);case"emailLink":return async function(e,t){return bb(e,"POST","/v1/accounts:signInWithEmailLink",yb(e,t))}(e,{email:this._email,oobCode:this._password});default:eb(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return m_(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",__);case"emailLink":return async function(e,t){return bb(e,"POST","/v1/accounts:signInWithEmailLink",yb(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:eb(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function C_(e,t){return bb(e,"POST","/v1/accounts:signInWithIdp",yb(e,t))}class x_ extends w_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new x_(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):eb("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Vw(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new x_(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return C_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,C_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,C_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=et(t)}return e}}const N_={USER_NOT_FOUND:"user-not-found"};class A_ extends w_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new A_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new A_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return bb(e,"POST","/v1/accounts:signInWithPhoneNumber",yb(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await bb(e,"POST","/v1/accounts:signInWithPhoneNumber",yb(e,t));if(n.temporaryProof)throw Ib(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return bb(e,"POST","/v1/accounts:signInWithPhoneNumber",yb(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),N_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new A_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class R_{constructor(e){var t,n,r,i,s,o;const a=tt(nt(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ob(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=tt(nt(e)).link,n=t?tt(nt(t)).deep_link_id:null,r=tt(nt(e)).deep_link_id;return(r?tt(nt(r)).link:null)||r||n||t||e}(e);try{return new R_(t)}catch(n){return null}}}class D_{constructor(){this.providerId=D_.PROVIDER_ID}static credential(e,t){return k_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=R_.parseLink(t);return ob(n,"argument-error"),k_._fromEmailAndCode(e,n.code,n.tenantId)}}D_.PROVIDER_ID="password",D_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class P_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class O_ extends P_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class L_ extends O_{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ob("providerId"in t&&"signInMethod"in t,"argument-error"),x_._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ob(e.idToken||e.accessToken,"argument-error"),x_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return L_.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return L_.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new L_(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(iN){return null}}}class M_ extends O_{constructor(){super("facebook.com")}static credential(e){return x_._fromParams({providerId:M_.PROVIDER_ID,signInMethod:M_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return M_.credentialFromTaggedObject(e)}static credentialFromError(e){return M_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return M_.credential(t.oauthAccessToken)}catch(n){return null}}}M_.FACEBOOK_SIGN_IN_METHOD="facebook.com",M_.PROVIDER_ID="facebook.com";class F_ extends O_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return x_._fromParams({providerId:F_.PROVIDER_ID,signInMethod:F_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return F_.credentialFromTaggedObject(e)}static credentialFromError(e){return F_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return F_.credential(n,r)}catch(i){return null}}}F_.GOOGLE_SIGN_IN_METHOD="google.com",F_.PROVIDER_ID="google.com";class U_ extends O_{constructor(){super("github.com")}static credential(e){return x_._fromParams({providerId:U_.PROVIDER_ID,signInMethod:U_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return U_.credentialFromTaggedObject(e)}static credentialFromError(e){return U_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return U_.credential(t.oauthAccessToken)}catch(n){return null}}}U_.GITHUB_SIGN_IN_METHOD="github.com",U_.PROVIDER_ID="github.com";class j_ extends w_{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return C_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,C_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,C_(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new j_(n,i):null}static _create(e,t){return new j_(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class V_ extends P_{constructor(e){ob(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return V_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return V_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=j_.fromJSON(e);return ob(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return j_._create(r,n)}catch(iN){return null}}}class z_ extends O_{constructor(){super("twitter.com")}static credential(e,t){return x_._fromParams({providerId:z_.PROVIDER_ID,signInMethod:z_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return z_.credentialFromTaggedObject(e)}static credentialFromError(e){return z_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return z_.credential(n,r)}catch(i){return null}}}async function B_(e,t){return bb(e,"POST","/v1/accounts:signUp",yb(e,t))}z_.TWITTER_SIGN_IN_METHOD="twitter.com",z_.PROVIDER_ID="twitter.com";class q_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await zb._fromIdTokenResponse(e,n,r),s=K_(n);return new q_({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=K_(n);return new q_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function K_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class W_ extends Qe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,W_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new W_(e,t,n,r)}}function G_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw W_._fromErrorAndOperation(e,n,t,r);throw n}))}function H_(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Q_(e,t){const n=ot(e);await Y_(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return vb(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=H_(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function J_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ob(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return q_._forOperation(e,"link",r)}async function Y_(e,t,n){await Fb(t);const r=!1===e?"provider-already-linked":"no-such-provider";ob(H_(t.providerData).has(n)===e,t.auth,r)}async function $_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(_n(r.app))return Promise.reject(rb(r));const i="reauthenticate";try{const s=await Ob(e,G_(r,i,t,e),n);ob(s.idToken,r,"internal-error");const o=Db(s.idToken);ob(o,r,"internal-error");const{sub:a}=o;return ob(e.uid===a,r,"user-mismatch"),q_._forOperation(e,i,s)}catch(iN){throw(null===iN||void 0===iN?void 0:iN.code)==="auth/".concat("user-not-found")&&eb(r,"user-mismatch"),iN}}async function X_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_n(e.app))return Promise.reject(rb(e));const r="signIn",i=await G_(e,r,t),s=await q_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Z_(e,t){return X_(c_(e),t)}async function eS(e,t){const n=ot(e);return await Y_(!1,n,t.providerId),J_(n,t)}async function tS(e,t){return $_(ot(e),t)}async function nS(e,t){if(_n(e.app))return Promise.reject(rb(e));const n=c_(e),r=await async function(e,t){return bb(e,"POST","/v1/accounts:signInWithCustomToken",yb(e,t))}(n,{token:t,returnSecureToken:!0}),i=await q_._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class rS{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?iS._fromServerResponse(e,t):"totpInfo"in t?sS._fromServerResponse(e,t):eb(e,"internal-error")}}class iS extends rS{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new iS(t)}}class sS extends rS{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new sS(t)}}function oS(e,t,n){var r;ob((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ob("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ob(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ob(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function aS(e){const t=c_(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function cS(e,t){await async function(e,t){return vb(e,"POST","/v1/accounts:update",yb(e,t))}(ot(e),{oobCode:t})}async function lS(e,t){const n=ot(e),r=await b_(n,{oobCode:t}),i=r.requestType;switch(ob(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ob(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ob(r.mfaInfo,n,"internal-error");default:ob(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=rS._fromServerResponse(c_(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function uS(e,t){const n={identifier:t,continueUri:ub()?lb():"http://localhost"},{signinMethods:r}=await async function(e,t){return vb(e,"POST","/v1/accounts:createAuthUri",yb(e,t))}(ot(e),n);return r||[]}async function hS(e,t){const n=ot(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&oS(n.auth,r,t);const{email:i}=await async function(e,t){return E_(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function dS(e,t,n){const r=ot(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&oS(r.auth,i,n);const{email:s}=await async function(e,t){return E_(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function fS(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ot(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Ob(i,async function(e,t){return vb(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function pS(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Ob(e,async function(e,t){return vb(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class mS{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class gS extends mS{constructor(e,t,n,r){super(e,t,n),this.username=r}}class yS extends mS{constructor(e,t){super(e,"facebook.com",t)}}class vS extends gS{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class wS extends mS{constructor(e,t){super(e,"google.com",t)}}class bS extends gS{constructor(e,t,n){super(e,"twitter.com",t,n)}}function _S(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Db(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new mS(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new yS(s,i);case"github.com":return new vS(s,i);case"google.com":return new wS(s,i);case"twitter.com":return new bS(s,i,e.screenName||null);case"custom":case"anonymous":return new mS(s,null);default:return new mS(s,r,i)}}(n)}class SS{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new SS("enroll",e,t)}static _fromMfaPendingCredential(e){return new SS("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return SS._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return SS._fromIdtoken(e.multiFactorSession.idToken)}return null}}class ES{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=c_(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>rS._fromServerResponse(n,e)));ob(r.mfaPendingCredential,n,"internal-error");const s=SS._fromMfaPendingCredential(r.mfaPendingCredential);return new ES(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await q_._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ob(t.user,n,"internal-error"),q_._forOperation(t.user,t.operationType,o);default:eb(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class IS{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>rS._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new IS(e)}async getSession(){return SS._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Ob(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Ob(this.user,function(e,t){return vb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",yb(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(iN){throw iN}}}const TS=new WeakMap;const kS="__sak";class CS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(kS,"1"),this.storage.removeItem(kS),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xS extends CS{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Ve();return Yb(e)||n_(e)}()&&function(){try{return!(!window||window===window.top)}catch(iN){return!1}}(),this.fallbackToPolling=r_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);We()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xS.type="LOCAL";const NS=xS;class AS extends CS{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AS.type="SESSION";const RS=AS;class DS{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new DS(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function PS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}DS.receivers=[];class OS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=PS("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function LS(){return window}function MS(){return"undefined"!==typeof LS().WorkerGlobalScope&&"function"===typeof LS().importScripts}const FS="firebaseLocalStorageDb",US="firebaseLocalStorage",jS="fbase_key";class VS{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zS(e,t){return e.transaction([US],t?"readwrite":"readonly").objectStore(US)}function BS(){const e=indexedDB.open(FS,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(US,{keyPath:jS})}catch(iN){n(iN)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(US)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(FS);return new VS(e).toPromise()}(),t(await BS()))}))}))}async function qS(e,t,n){const r=zS(e,!0).put({[jS]:t,value:n});return new VS(r).toPromise()}function KS(e,t){const n=zS(e,!0).delete(t);return new VS(n).toPromise()}class WS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await BS()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(iN){if(t++>3)throw iN;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=DS._getInstance(MS()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new OS(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await BS();return await qS(e,kS,"1"),await KS(e,kS),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>qS(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zS(e,!1).get(t),r=await new VS(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>KS(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zS(e,!1).getAll();return new VS(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}WS.type="LOCAL";const GS=WS;const HS=1e12;class QS{constructor(e){this.auth=e,this.counter=HS,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new JS(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||HS;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||HS;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||HS;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class JS{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ob(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(iN){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(iN){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const YS=d_("rcb"),$S=new db(3e4,6e4);class XS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=LS().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ob(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Tb(LS().grecaptcha)?Promise.resolve(LS().grecaptcha):new Promise(((n,r)=>{const i=LS().setTimeout((()=>{r(tb(e,"network-request-failed"))}),$S.get());LS()[YS]=()=>{LS().clearTimeout(i),delete LS()[YS];const s=LS().grecaptcha;if(!s||!Tb(s))return void r(tb(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};h_("".concat(u_.recaptchaV2Script,"?").concat(et({onload:YS,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(tb(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=LS().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ZS{async load(e){return new QS(e)}clearedOneInstance(){}}const eE="recaptcha",tE={theme:"light",type:"image"};class nE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},tE);this.parameters=n,this.type=eE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=c_(e),this.isInvisible="invisible"===this.parameters.size,ob("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;ob(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ZS:new XS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(iN){return Promise.reject(iN)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ob(!this.parameters.sitekey,this.auth,"argument-error"),ob(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ob("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=LS()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ob(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ob(ub()&&!MS(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await vb(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ob(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ob(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=A_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function iE(e,t,n){var r;const i=await n.verify();try{let s;if(ob("string"===typeof i,e,"argument-error"),ob(n.type===eE,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ob("enroll"===t.type,e,"internal-error");const n=await function(e,t){return vb(e,"POST","/v2/accounts/mfaEnrollment:start",yb(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ob("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ob(n,e,"missing-multi-factor-info");const o=await function(e,t){return vb(e,"POST","/v2/accounts/mfaSignIn:start",yb(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return vb(e,"POST","/v1/accounts:sendVerificationCode",yb(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class sE{constructor(e){this.providerId=sE.PROVIDER_ID,this.auth=c_(e)}verifyPhoneNumber(e,t){return iE(this.auth,e,ot(t))}static credential(e,t){return A_._fromVerification(e,t)}static credentialFromResult(e){const t=e;return sE.credentialFromTaggedObject(t)}static credentialFromError(e){return sE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?A_._fromTokenResponse(n,r):null}}function oE(e,t){return t?qb(t):(ob(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}sE.PROVIDER_ID="phone",sE.PHONE_SIGN_IN_METHOD="phone";class aE extends w_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return C_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return C_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return C_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cE(e){return X_(e.auth,new aE(e),e.bypassAuthState)}function lE(e){const{auth:t,user:n}=e;return ob(n,t,"internal-error"),$_(n,new aE(e),e.bypassAuthState)}async function uE(e){const{auth:t,user:n}=e;return ob(n,t,"internal-error"),J_(n,new aE(e),e.bypassAuthState)}class hE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(iN){this.reject(iN)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(iN){this.reject(iN)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cE;case"linkViaPopup":case"linkViaRedirect":return uE;case"reauthViaPopup":case"reauthViaRedirect":return lE;default:eb(this.auth,"internal-error")}}resolve(e){cb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dE=new db(2e3,1e4);class fE extends hE{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,fE.currentPopupAction&&fE.currentPopupAction.cancel(),fE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ob(e,this.auth,"internal-error"),e}async onExecution(){cb(1===this.filter.length,"Popup operations only handle one event");const e=PS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(tb(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tb(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fE.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(tb(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,dE.get())};e()}}fE.currentPopupAction=null;const pE="pendingRedirect",mE=new Map;class gE extends hE{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=mE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=bE(t),r=wE(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(iN){e=()=>Promise.reject(iN)}mE.set(this.auth._key(),e)}return this.bypassAuthState||mE.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function yE(e,t){return wE(e)._set(bE(t),"true")}function vE(e,t){mE.set(e._key(),t)}function wE(e){return qb(e._redirectPersistence)}function bE(e){return Gb(pE,e.config.apiKey,e.name)}function _E(e,t,n){return async function(e,t,n){if(_n(e.app))return Promise.reject(rb(e));const r=c_(e);ib(e,t,P_),await r._initializationPromise;const i=oE(r,n);return await yE(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function SE(e,t,n){return async function(e,t,n){const r=ot(e);if(ib(r.auth,t,P_),_n(r.auth.app))return Promise.reject(rb(r.auth));await r.auth._initializationPromise;const i=oE(r.auth,n);await yE(i,r.auth);const s=await TE(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function EE(e,t,n){return async function(e,t,n){const r=ot(e);ib(r.auth,t,P_),await r.auth._initializationPromise;const i=oE(r.auth,n);await Y_(!1,r,t.providerId),await yE(i,r.auth);const s=await TE(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function IE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(_n(e.app))return Promise.reject(rb(e));const r=c_(e),i=oE(r,t),s=new gE(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function TE(e){const t=PS("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class kE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xE(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tb(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(CE(e))}saveEventToCache(e){this.cachedEventUids.add(CE(e)),this.lastProcessedEventTime=Date.now()}}function CE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xE(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function NE(e){return vb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const AE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RE=/^https?/;function DE(e){const t=lb(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!RE.test(n))return!1;if(AE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const PE=new db(3e4,6e4);function OE(){const e=LS().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function LE(e){return new Promise(((t,n)=>{var r,i,s;function o(){OE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{OE(),n(tb(e,"network-request-failed"))},timeout:PE.get()})}if(null===(i=null===(r=LS().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=LS().gapi)||void 0===s?void 0:s.load)){const t=d_("iframefcb");return LS()[t]=()=>{gapi.load?o():n(tb(e,"network-request-failed"))},h_("".concat(u_.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw ME=null,e}))}let ME=null;const FE=new db(5e3,15e3),UE="__/auth/iframe",jE="emulator/auth/iframe",VE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BE(e){const t=e.config;ob(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fb(t,jE):"https://".concat(e.config.authDomain,"/").concat(UE),r={apiKey:t.apiKey,appName:e.name,v:kn},i=zE.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(et(r).slice(1))}async function qE(e){const t=await function(e){return ME=ME||LE(e),ME}(e),n=LS().gapi;return ob(n,e,"internal-error"),t.open({where:document.body,url:BE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VE,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=tb(e,"network-request-failed"),s=LS().setTimeout((()=>{r(i)}),FE.get());function o(){LS().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const KE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class WE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(iN){}}}function GE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},KE),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ve().toLowerCase();n&&(a=$b(l)?"_blank":n),Jb(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return n_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new WE(null);const h=window.open(t||"",a,u);ob(h,e,"popup-blocked");try{h.focus()}catch(iN){}return new WE(h)}const HE="__/auth/handler",QE="emulator/auth/handler",JE=encodeURIComponent("fac");async function YE(e,t,n,r,i,s){ob(e.config.authDomain,e,"auth-domain-config-required"),ob(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kn,eventId:i};if(t instanceof P_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof O_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(JE,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(HE);return fb(t,QE)}(e),"?").concat(et(a).slice(1)).concat(l)}const $E="webStorageSupport";const XE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RS,this._completeRedirectFn=IE,this._overrideRedirectResult=vE}async _openPopup(e,t,n,r){var i;cb(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return GE(e,await YE(e,t,n,lb(),r),PS())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){LS().location.href=e}(await YE(e,t,n,lb(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(cb(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await qE(e),n=new kE(e);return t.register("authEvent",(t=>{ob(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($E,{type:$E},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$E];void 0!==i&&t(!!i),eb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await NE(e);for(const r of t)try{if(DE(r))return}catch(n){}eb(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return r_()||Yb()||n_()}};class ZE{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ab("unexpected MultiFactorSessionType")}}}class eI extends ZE{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new eI(e)}_finalizeEnroll(e,t,n){return function(e,t){return vb(e,"POST","/v2/accounts/mfaEnrollment:finalize",yb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return vb(e,"POST","/v2/accounts/mfaSignIn:finalize",yb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class tI{constructor(){}static assertion(e){return eI._fromCredential(e)}}tI.FACTOR_ID="phone";var nI="@firebase/auth",rI="1.7.2";class iI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ob(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Fe())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var sI;function oI(){return window}!function(e){u_=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=tb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),sI="Browser",yn(new at("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ob(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:sI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i_(sI)},l=new a_(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),yn(new at("auth-internal",(e=>(e=>new iI(e))(c_(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(nI,rI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(sI)),Dn(nI,rI,"esm2017");async function aI(e,t,n){var r;const{BuildInfo:i}=oI();cb(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(cb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return n_()?o.ibi=i.packageName:Zb()?o.apn=i.packageName:eb(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,YE(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function cI(e){const{cordova:t}=oI();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const lI=20;class uI extends kE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function hI(e){const t=await pI()._get(mI(e));return t&&await pI()._remove(mI(e)),t}function dI(e,t){var n,r;const i=function(e){const t=gI(e),n=t.link?decodeURIComponent(t.link):void 0,r=gI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return gI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=gI(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(iN){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?tb(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function fI(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<lI;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function pI(){return qb(NS)}function mI(e){return Gb("authEvent",e.config.apiKey,e.name)}function gI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return tt(n.join("?"))}const yI=class{constructor(){this._redirectPersistence=RS,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=IE,this._overrideRedirectResult=vE}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new uI(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){eb(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=oI();ob("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ob("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ob("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ob("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ob("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),mE.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:fI(),postBody:null,tenantId:e.tenantId,error:tb(e,"no-auth-event")}}(e,n,r);await function(e,t){return pI()._set(mI(e),t)}(e,s);const o=await aI(e,s,t);return async function(e,t,n){const{cordova:r}=oI();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(tb(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),Zb()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await cI(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=oI(),n={};n_()?n.iosBundleId=t.packageName:Zb()?n.androidPackageName=t.packageName:eb(e,"operation-not-supported-in-this-environment"),await NE(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=oI(),s=setTimeout((async()=>{await hI(e),t.onEvent(vI())}),500),o=async n=>{clearTimeout(s);const r=await hI(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=dI(r,n.url)),t.onEvent(i||vI())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");oI().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(iN){console.error(iN)}}}};function vI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tb("no-auth-event")}}function wI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function bI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return!("file:"!==wI()&&"ionic:"!==wI()&&"capacitor:"!==wI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function _I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return We()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve();return/Edge\/\d+/.test(e)}(e)}function SI(){try{const e=self.localStorage,t=PS();if(e)return e.setItem(t,"1"),e.removeItem(t),!_I()||He()}catch(iN){return EI()&&He()}return!1}function EI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function II(){return("http:"===wI()||"https:"===wI()||qe()||bI())&&!(Ke()||ze())&&SI()&&!EI()}function TI(){return bI()&&"undefined"!==typeof document}const kI={LOCAL:"local",NONE:"none",SESSION:"session"},CI=ob,xI="persistence";async function NI(e){await e._initializationPromise;const t=AI(),n=Gb(xI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function AI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(iN){return null}}const RI=ob;class DI{constructor(){this.browserResolver=qb(XE),this.cordovaResolver=qb(yI),this.underlyingResolver=null,this._redirectPersistence=RS,this._completeRedirectFn=IE,this._overrideRedirectResult=vE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return TI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return RI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!TI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function PI(e){return e.unwrap()}function OI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new UI(e,function(e,t){var n;const r=ot(e),i=t;return ob(t.customData.operationType,r,"argument-error"),ob(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ES._fromError(r,i)}(e,t))}else if(r){const e=LI(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function LI(e){const{_tokenResponse:t}=e instanceof Qe?e.customData:e;if(!t)return null;if(!(e instanceof Qe)&&"temporaryProof"in t&&"phoneNumber"in t)return sE.credentialFromResult(e);const n=t.providerId;if(!n||n===zw.PASSWORD)return null;let r;switch(n){case zw.GOOGLE:r=F_;break;case zw.FACEBOOK:r=M_;break;case zw.GITHUB:r=U_;break;case zw.TWITTER:r=z_;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?j_._create(n,o):x_._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new L_(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Qe?r.credentialFromError(e):r.credentialFromResult(e)}function MI(e,t){return t.catch((t=>{throw t instanceof Qe&&OI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,LI(r)),additionalUserInfo:_S(e),user:jI.getOrCreate(n)};var r}))}async function FI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>MI(e,n.confirm(t))}}class UI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return MI(PI(this.auth),this.resolver.resolveSignIn(e))}}class jI{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=ot(e);return TS.has(t)||TS.set(t,IS._fromUser(t)),TS.get(t)}(e)}static getOrCreate(e){return jI.USER_MAP.has(e)||jI.USER_MAP.set(e,new jI(e)),jI.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return MI(this.auth,eS(this._delegate,e))}async linkWithPhoneNumber(e,t){return FI(this.auth,async function(e,t,n){const r=ot(e);await Y_(!1,r,"phone");const i=await iE(r.auth,t,ot(n));return new rE(i,(e=>eS(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return MI(this.auth,async function(e,t,n){const r=ot(e);ib(r.auth,t,P_);const i=oE(r.auth,n);return new fE(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,DI))}async linkWithRedirect(e){return await NI(c_(this.auth)),EE(this._delegate,e,DI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return MI(this.auth,tS(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return FI(this.auth,async function(e,t,n){const r=ot(e);if(_n(r.auth.app))return Promise.reject(rb(r.auth));const i=await iE(r.auth,t,ot(n));return new rE(i,(e=>tS(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return MI(this.auth,async function(e,t,n){const r=ot(e);if(_n(r.auth.app))return Promise.reject(tb(r.auth,"operation-not-supported-in-this-environment"));ib(r.auth,t,P_);const i=oE(r.auth,n);return new fE(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,DI))}async reauthenticateWithRedirect(e){return await NI(c_(this.auth)),SE(this._delegate,e,DI)}sendEmailVerification(e){return hS(this._delegate,e)}async unlink(e){return await Q_(this._delegate,e),this}updateEmail(e){return function(e,t){const n=ot(e);return _n(n.auth.app)?Promise.reject(rb(n.auth)):pS(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return pS(ot(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=ot(e);if(_n(n.auth.app))return Promise.reject(rb(n.auth));await J_(n,t)}(this._delegate,e)}updateProfile(e){return fS(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return dS(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jI.USER_MAP=new WeakMap;const VI=ob;class zI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;VI(n,"invalid-api-key",{appName:e.name}),VI(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?DI:void 0;this._delegate=t.initialize({options:{persistence:qI(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Jw),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){g_(this._delegate,e,t)}applyActionCode(e){return cS(this._delegate,e)}checkActionCode(e){return lS(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await b_(ot(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&aS(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return MI(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(rb(e));const r=c_(e),i=m_(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B_),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&aS(e),t})),o=await q_._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return uS(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=R_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){VI(II(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await c_(e)._initializationPromise,IE(e,t,!1)}(this._delegate,DI);return e?MI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){c_(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=BI(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=BI(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=c_(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ob(t.handleCodeInApp,r,"argument-error"),t&&oS(r,e,t)}(i,n),await m_(r,i,"getOobCode",T_)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=c_(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&oS(r,i,n),await m_(r,i,"getOobCode",I_)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){CI(Object.values(kI).includes(t),e,"invalid-persistence-type"),Ke()?CI(t!==kI.SESSION,e,"unsupported-persistence-type"):ze()?CI(t===kI.NONE,e,"unsupported-persistence-type"):EI()?CI(t===kI.NONE||t===kI.LOCAL&&He(),e,"unsupported-persistence-type"):CI(t===kI.NONE||SI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case kI.SESSION:t=RS;break;case kI.LOCAL:t=await qb(GS)._isAvailable()?GS:NS;break;case kI.NONE:t=Wb;break;default:return eb("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return MI(this._delegate,async function(e){var t;if(_n(e.app))return Promise.reject(rb(e));const n=c_(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new q_({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await B_(n,{returnSecureToken:!0}),i=await q_._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return MI(this._delegate,Z_(this._delegate,e))}signInWithCustomToken(e){return MI(this._delegate,nS(this._delegate,e))}signInWithEmailAndPassword(e,t){return MI(this._delegate,function(e,t,n){return _n(e.app)?Promise.reject(rb(e)):Z_(ot(e),D_.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&aS(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return MI(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(rb(e));const r=ot(e),i=D_.credentialWithLink(t,n||lb());return ob(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Z_(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return FI(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(rb(e));const r=c_(e),i=await iE(r,t,ot(n));return new rE(i,(e=>Z_(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return VI(II(),this._delegate,"operation-not-supported-in-this-environment"),MI(this._delegate,async function(e,t,n){if(_n(e.app))return Promise.reject(tb(e,"operation-not-supported-in-this-environment"));const r=c_(e);ib(e,t,P_);const i=oE(r,n);return new fE(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,DI))}async signInWithRedirect(e){return VI(II(),this._delegate,"operation-not-supported-in-this-environment"),await NI(this._delegate),_E(this._delegate,e,DI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await lS(ot(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function BI(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&jI.getOrCreate(e)),error:t,complete:n}}function qI(e,t){const n=function(e,t){const n=AI();if(!n)return[];const r=Gb(xI,e,t);switch(n.getItem(r)){case kI.NONE:return[Wb];case kI.LOCAL:return[GS,RS];case kI.SESSION:return[RS];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(GS)||n.push(GS),"undefined"!==typeof window)for(const r of[NS,RS])n.includes(r)||n.push(r);return n.includes(Wb)||n.push(Wb),n}zI.Persistence=kI;class KI{constructor(){this.providerId="phone",this._delegate=new sE(PI($n.auth()))}static credential(e,t){return sE.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}KI.PHONE_SIGN_IN_METHOD=sE.PHONE_SIGN_IN_METHOD,KI.PROVIDER_ID=sE.PROVIDER_ID;const WI=ob;class GI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$n.app();var r;WI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new nE(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new at("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new zI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bw,PASSWORD_RESET:qw,RECOVER_EMAIL:Kw,REVERT_SECOND_FACTOR_ADDITION:Ww,VERIFY_AND_CHANGE_EMAIL:Gw,VERIFY_EMAIL:Hw}},EmailAuthProvider:D_,FacebookAuthProvider:M_,GithubAuthProvider:U_,GoogleAuthProvider:F_,OAuthProvider:L_,SAMLAuthProvider:V_,PhoneAuthProvider:KI,PhoneMultiFactorGenerator:tI,RecaptchaVerifier:GI,TwitterAuthProvider:z_,Auth:zI,AuthCredential:w_,Error:Qe}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.7")}($n);const HI=$n.initializeApp({apiKey:"AIzaSyDngC7JhWARGmuHm8iFH2YRZCiWLAAsQqc",authDomain:"netflix-clone-project-2ba73.firebaseapp.com",projectId:"netflix-clone-project-2ba73",storageBucket:"netflix-clone-project-2ba73.appspot.com",messagingSenderId:"320473384964",appId:"1:320473384964:web:587a1309969e443b040d51",measurementId:"G-TDVGF7PFQP"}),QI=(HI.firestore(),HI.auth());var JI=n(579);const YI=function(){const e=(0,i.useRef)(null),t=(0,i.useRef)(null),n=te();return(0,JI.jsxs)("div",{className:"signupScreen",children:[(0,JI.jsx)("h1",{children:"Sign in"}),(0,JI.jsxs)("form",{children:[(0,JI.jsx)("input",{ref:e,type:"email",placeholder:"Email Address"}),(0,JI.jsx)("input",{ref:t,type:"Password",placeholder:"Password"}),(0,JI.jsx)("button",{type:"submit",onClick:r=>{r.preventDefault(),QI.createUserWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e),n("/homescreen")})).catch((e=>{alert(e.message)}))},children:"Sign in"}),(0,JI.jsxs)("h4",{children:[(0,JI.jsx)("span",{className:"signupScreen__gray",children:"New to Netlflix? "}),(0,JI.jsx)("span",{className:"signupScreen__link",onClick:n=>{n.preventDefault(),QI.createUserWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>{alert(e.message)}))},children:" Sign Up Now"})," "]})]})]})};const $I=function(){const[e,t]=(0,i.useState)(!1);return(0,JI.jsx)("div",{className:"loginScreen",children:(0,JI.jsxs)("div",{className:"loginScreen__background",children:[(0,JI.jsx)("img",{className:"loginScreen__logo",src:Ne,alt:"Netflix Logo"}),(0,JI.jsx)("button",{onClick:()=>t(!0),className:"loginScreen__button",children:"Sign Up"}),(0,JI.jsx)("div",{className:"loginScreen__gradient"}),(0,JI.jsx)("div",{className:"loginScreen__body",children:e?(0,JI.jsxs)(JI.Fragment,{children:[(0,JI.jsx)("h1",{children:"Unlimited files, TV Programs, and more."}),(0,JI.jsx)("h2",{children:"Watch Anywhere. Cancel at any time"}),(0,JI.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership"}),(0,JI.jsx)("div",{className:"loginScreen__input",children:(0,JI.jsxs)("form",{children:[(0,JI.jsx)("input",{type:"email",placeholder:"Email Address"}),(0,JI.jsx)("button",{className:"loginScreen__getStarted",children:"GET STARTED"})]})})]}):(0,JI.jsx)(YI,{})})]})})};var XI=n(237),ZI=i,eT=Symbol.for("react-redux-context"),tT="undefined"!==typeof globalThis?globalThis:{};function nT(){var e;if(!ZI.createContext)return{};const t=null!==(e=tT[eT])&&void 0!==e?e:tT[eT]=new Map;let n=t.get(ZI.createContext);return n||(n=ZI.createContext(null),t.set(ZI.createContext,n)),n}var rT=nT(),iT=()=>{throw new Error("uSES not initialized!")};function sT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rT;return function(){return ZI.useContext(e)}}var oT=sT(),aT=iT,cT=(e,t)=>e===t;function lT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rT;const t=e===rT?oT:sT(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=cT,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:c,identityFunctionCheck:l}=t(),u=(ZI.useRef(!0),ZI.useCallback({[e.name]:t=>e(t)}[e.name],[e,c,i.stabilityCheck])),h=aT(o.addNestedSub,s.getState,a||s.getState,u,r);return ZI.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var uT=lT();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function hT(e){e()}var dT={notify(){},get:()=>[]};function fT(e,t){let n,r=dT,i=0,s=!1;function o(){l.onStateChange&&l.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){hT((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function c(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=dT)}const l={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),c())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,c())},getListeners:()=>r};return l}var pT=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),mT="undefined"!==typeof navigator&&"ReactNative"===navigator.product,gT=pT||mT?ZI.useLayoutEffect:ZI.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var yT=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=ZI.useMemo((()=>{const e=fT(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,i,s,o]),c=ZI.useMemo((()=>t.getState()),[t]);gT((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,c]);const l=n||rT;return ZI.createElement(l.Provider,{value:a},r)};function vT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rT;const t=e===rT?oT:sT(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var wT=vT();function bT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rT;const t=e===rT?wT:vT(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var _T,ST=bT();_T=XI.useSyncExternalStoreWithSelector,aT=_T,(e=>{e})(i.useSyncExternalStore);var ET=Symbol.for("immer-nothing"),IT=Symbol.for("immer-draftable"),TT=Symbol.for("immer-state");function kT(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var CT=Object.getPrototypeOf;function xT(e){return!!e&&!!e[TT]}function NT(e){var t;return!!e&&(RT(e)||Array.isArray(e)||!!e[IT]||!(null===(t=e.constructor)||void 0===t||!t[IT])||MT(e)||FT(e))}var AT=Object.prototype.constructor.toString();function RT(e){if(!e||"object"!==typeof e)return!1;const t=CT(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===AT}function DT(e,t){0===PT(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function PT(e){const t=e[TT];return t?t.type_:Array.isArray(e)?1:MT(e)?2:FT(e)?3:0}function OT(e,t){return 2===PT(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function LT(e,t,n){const r=PT(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function MT(e){return e instanceof Map}function FT(e){return e instanceof Set}function UT(e){return e.copy_||e.base_}function jT(e,t){if(MT(e))return new Map(e);if(FT(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=RT(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[TT];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(CT(e),t)}{const t=CT(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function VT(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return BT(e)||xT(e)||!NT(e)||(PT(e)>1&&(e.set=e.add=e.clear=e.delete=zT),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return VT(n,!0)}))),e}function zT(){kT(2)}function BT(e){return Object.isFrozen(e)}var qT,KT={};function WT(e){const t=KT[e];return t||kT(0),t}function GT(){return qT}function HT(e,t){t&&(WT("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function QT(e){JT(e),e.drafts_.forEach($T),e.drafts_=null}function JT(e){e===qT&&(qT=e.parent_)}function YT(e){return qT={drafts_:[],parent_:qT,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $T(e){const t=e[TT];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function XT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[TT].modified_&&(QT(t),kT(4)),NT(e)&&(e=ZT(t,e),t.parent_||tk(t,e)),t.patches_&&WT("Patches").generateReplacementPatches_(n[TT].base_,e,t.patches_,t.inversePatches_)):e=ZT(t,n,[]),QT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ET?e:void 0}function ZT(e,t,n){if(BT(t))return t;const r=t[TT];if(!r)return DT(t,((i,s)=>ek(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return tk(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),DT(i,((i,o)=>ek(e,r,t,i,o,n,s))),tk(e,t,!1),n&&e.patches_&&WT("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ek(e,t,n,r,i,s,o){if(xT(i)){const o=ZT(e,i,s&&t&&3!==t.type_&&!OT(t.assigned_,r)?s.concat(r):void 0);if(LT(n,r,o),!xT(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(NT(i)&&!BT(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ZT(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||tk(e,i)}}function tk(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&VT(t,n)}var nk={get(e,t){if(t===TT)return e;const n=UT(e);if(!OT(n,t))return function(e,t,n){var r;const i=sk(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!NT(r)?r:r===ik(e.base_,t)?(ak(e),e.copy_[t]=ck(r,e)):r},has:(e,t)=>t in UT(e),ownKeys:e=>Reflect.ownKeys(UT(e)),set(e,t,n){const r=sk(UT(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=ik(UT(e),t),i=null===r||void 0===r?void 0:r[TT];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||OT(e.base_,t)))return!0;ak(e),ok(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ik(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ak(e),ok(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=UT(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){kT(11)},getPrototypeOf:e=>CT(e.base_),setPrototypeOf(){kT(12)}},rk={};function ik(e,t){const n=e[TT];return(n?UT(n):e)[t]}function sk(e,t){if(!(t in e))return;let n=CT(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=CT(n)}}function ok(e){e.modified_||(e.modified_=!0,e.parent_&&ok(e.parent_))}function ak(e){e.copy_||(e.copy_=jT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}DT(nk,((e,t)=>{rk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),rk.deleteProperty=function(e,t){return rk.set.call(this,e,t,void 0)},rk.set=function(e,t,n){return nk.set.call(this,e[0],t,n,e[0])};function ck(e,t){const n=MT(e)?WT("MapSet").proxyMap_(e,t):FT(e)?WT("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:GT(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=nk;n&&(i=[r],s=rk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:GT()).drafts_.push(n),n}function lk(e){return xT(e)||kT(10),uk(e)}function uk(e){if(!NT(e)||BT(e))return e;const t=e[TT];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=jT(e,t.scope_.immer_.useStrictShallowCopy_)}else n=jT(e,!0);return DT(n,((e,t)=>{LT(n,e,uk(t))})),t&&(t.finalized_=!1),n}var hk=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&kT(6),void 0!==n&&"function"!==typeof n&&kT(7),NT(e)){const i=YT(this),s=ck(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?QT(i):JT(i)}return HT(i,n),XT(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===ET&&(r=void 0),this.autoFreeze_&&VT(r,!0),n){const t=[],i=[];WT("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}kT(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){NT(e)||kT(8),xT(e)&&(e=lk(e));const t=YT(this),n=ck(e,void 0);return n[TT].isManual_=!0,JT(t),n}finishDraft(e,t){const n=e&&e[TT];n&&n.isManual_||kT(9);const{scope_:r}=n;return HT(r,t),XT(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=WT("Patches").applyPatches_;return xT(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},dk=hk.produce;hk.produceWithPatches.bind(hk),hk.setAutoFreeze.bind(hk),hk.setUseStrictShallowCopy.bind(hk),hk.applyPatches.bind(hk),hk.createDraft.bind(hk),hk.finishDraft.bind(hk);function fk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var pk=e=>Array.isArray(e)?e:[e];function mk(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var gk="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},yk=0,vk=1;function wk(){return{s:yk,v:void 0,o:null,p:null}}function bk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wk();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=wk(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=wk(),e.set(n,t)):t=r}}const a=t;let c;if(t.s===vk?c=t.v:(c=e.apply(null,arguments),s++),a.s=vk,r){var l,u,h;const e=null!==(l=null===(u=i)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==l?l:i;null!=e&&r(e,c)&&(c=e,0!==s&&s--);i="object"===typeof c&&null!==c||"function"===typeof c?new gk(c):c}return a.v=c,c}return o.clearCache=()=>{n=wk(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function _k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},c=t.pop();"object"===typeof c&&(a=c,c=t.pop()),fk(c,"createSelector expects an output function after the inputs, but received: [".concat(typeof c,"]"));const l={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=bk,argsMemoizeOptions:f=[],devModeChecks:p={}}=l,m=pk(h),g=pk(f),y=mk(t),v=u((function(){return s++,c.apply(null,arguments)}),...m);const w=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...g);return Object.assign(w,{resultFunc:c,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var Sk=_k(bk),Ek=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sk;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>Ek});function Ik(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var Tk=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),kk=()=>Math.random().toString(36).substring(7).split("").join("."),Ck={INIT:"@@redux/INIT".concat(kk()),REPLACE:"@@redux/REPLACE".concat(kk()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(kk())};function xk(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Nk(e,t,n){if("function"!==typeof e)throw new Error(Ik(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Ik(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Ik(1));return n(Nk)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,c=!1;function l(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(c)throw new Error(Ik(3));return i}function h(e){if("function"!==typeof e)throw new Error(Ik(4));if(c)throw new Error(Ik(5));let t=!0;l();const n=a++;return o.set(n,e),function(){if(t){if(c)throw new Error(Ik(6));t=!1,l(),o.delete(n),s=null}}}function d(e){if(!xk(e))throw new Error(Ik(7));if("undefined"===typeof e.type)throw new Error(Ik(8));if("string"!==typeof e.type)throw new Error(Ik(17));if(c)throw new Error(Ik(9));try{c=!0,i=r(i,e)}finally{c=!1}return(s=o).forEach((e=>{e()})),e}d({type:Ck.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Ik(10));r=e,d({type:Ck.REPLACE})},[Tk]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(Ik(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Tk](){return this}}}}}function Ak(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}(function(){const e=_k(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(xT(e)?lk(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})})(bk),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Rk(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Zk(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return xk(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}Symbol.species;function Dk(e){return NT(e)?dk(e,(()=>{})):e}function Pk(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Zk(10));const r=n.insert(t,e);return e.set(t,r),r}var Ok=e=>t=>{setTimeout(t,e)};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ok(10);function Lk(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Zk(28));if(r in t)throw new Error(Zk(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var Mk=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Fk=Symbol.for("rtk-slice-createasyncthunk");function Uk(e,t){return"".concat(e,"/").concat(t)}function jk(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Fk];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Zk(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Zk(12));if(n in o.sliceCaseReducersByType)throw new Error(Zk(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function c(){const[t={},n=[],r]="function"===typeof e.extraReducers?Lk(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=Lk(t);if(function(e){return"function"===typeof e}(e))n=()=>Dk(e());else{const t=Dk(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(xT(e)){const r=n(e,t);return void 0===r?e:r}if(NT(e))return dk(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Zk(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:Uk(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Zk(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?Rk(s,i):Rk(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(Zk(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:l,settled:u,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);c&&n.addCase(d.pending,c);l&&n.addCase(d.rejected,l);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(s,{fulfilled:a||Bk,pending:c||Bk,rejected:l||Bk,settled:u||Bk})}(o,s,a,n)}));const l=e=>e,u=new Map;let h;function d(e,t){return h||(h=c()),h(e,t)}function f(){return h||(h=c()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;const r=Pk(u,n,{insert:()=>new WeakMap});return Pk(r,t,{insert:()=>{const r={};for(const[s,o]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=Vk(o,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:t,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...m,...p(i,!0)}}};return m}}function Vk(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return e(s,...a)}return i.unwrapped=e,i}var zk=jk();function Bk(){}var qk="listener",Kk="completed",Wk="cancelled",Gk=("task-".concat(Wk),"task-".concat(Kk),"".concat(qk,"-").concat(Wk),"".concat(qk,"-").concat(Kk),(e,t)=>{if("function"!==typeof e)throw new Error(Zk(32))});var{assign:Hk}=Object,Qk="listenerMiddleware",Jk=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Rk(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Zk(21));return Gk(s),{predicate:i,type:t,effect:s}},Yk=Object.assign((e=>{const{type:t,predicate:n,effect:r}=Jk(e);return{id:Mk(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Zk(22))}}}),{withTypes:()=>Yk}),$k=Object.assign(Rk("".concat(Qk,"/add")),{withTypes:()=>$k}),Xk=(Rk("".concat(Qk,"/removeAll")),Object.assign(Rk("".concat(Qk,"/remove")),{withTypes:()=>Xk}));Symbol.for("rtk-state-proxy-original");function Zk(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const eC=zk({name:"user",initialState:{user:null},reducers:{login:(e,t)=>{e.user=t.payload},logout:e=>{e.user=null}}}),{login:tC,logout:nC}=eC.actions,rC=e=>e.user,iC=eC.reducer;const sC=function(){const e=uT(rC),t=ST();return(0,i.useEffect)((()=>{const e=QI.onAuthStateChanged((e=>{t(e?tC({uid:e.uid,email:e.email}):nC())}));return()=>{e()}}),[t]),(0,JI.jsx)("div",{className:"app",children:e?(0,JI.jsxs)(JI.Fragment,{children:[(0,JI.jsx)(ke,{to:"/"}),(0,JI.jsx)(ke,{to:"/homescreen/profile"}),(0,JI.jsx)(ke,{to:"/profile"})]}):(0,JI.jsx)($I,{})})};const oC=function(){const[e,t]=(0,i.useState)(!1),n=te(),r=()=>{window.scrollY>100?t(!0):t(!1)};return(0,i.useEffect)((()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r))),[]),(0,JI.jsx)("div",{className:"nav ".concat(e&&"nav__black"),children:(0,JI.jsxs)("div",{className:"nav__contents",children:[(0,JI.jsx)("img",{className:"nav__logo",src:Ne,alt:""}),(0,JI.jsx)("img",{onClick:()=>n("./profile"),className:"nav__avatar",src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:""})]})})};const aC=function(){const e=uT(rC),t=te();return(0,JI.jsxs)("div",{className:"profileScreen",children:[(0,JI.jsx)(oC,{}),(0,JI.jsxs)("div",{className:"profileScreen__body",children:[(0,JI.jsx)("h1",{children:"Edit Profile"}),(0,JI.jsxs)("div",{className:"profileScreen__info",children:[(0,JI.jsx)("img",{className:"profileScreen__avatar",src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:"Avatar"}),(0,JI.jsxs)("div",{className:"profileScreen__details",children:[(0,JI.jsx)("h2",{children:null===e||void 0===e?void 0:e.email}),(0,JI.jsxs)("div",{className:"profileScreen__plans",children:[(0,JI.jsx)("h3",{children:"Plans:"}),(0,JI.jsxs)("ul",{children:[(0,JI.jsx)("li",{children:"Basic Plan - $9.99/month"}),(0,JI.jsx)("li",{children:"Premium Plan - $15.99/month"})]}),(0,JI.jsx)("button",{onClick:()=>{alert("Subscribed successfully!")},className:"profileScreen__subscribe",children:"Subscribe"}),(0,JI.jsx)("button",{onClick:()=>{QI.signOut().then((()=>{t("/loginScreen")})).catch((e=>{console.log(e.message)}))},className:"profileScreen__signOut",children:"Sign out"})]})]})]})]})]})};function cC(e,t){return function(){return e.apply(t,arguments)}}const{toString:lC}=Object.prototype,{getPrototypeOf:uC}=Object,hC=(dC=Object.create(null),e=>{const t=lC.call(e);return dC[t]||(dC[t]=t.slice(8,-1).toLowerCase())});var dC;const fC=e=>(e=e.toLowerCase(),t=>hC(t)===e),pC=e=>t=>typeof t===e,{isArray:mC}=Array,gC=pC("undefined");const yC=fC("ArrayBuffer");const vC=pC("string"),wC=pC("function"),bC=pC("number"),_C=e=>null!==e&&"object"===typeof e,SC=e=>{if("object"!==hC(e))return!1;const t=uC(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},EC=fC("Date"),IC=fC("File"),TC=fC("Blob"),kC=fC("FileList"),CC=fC("URLSearchParams");function xC(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mC(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function NC(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const AC="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,RC=e=>!gC(e)&&e!==AC;const DC=(PC="undefined"!==typeof Uint8Array&&uC(Uint8Array),e=>PC&&e instanceof PC);var PC;const OC=fC("HTMLFormElement"),LC=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),MC=fC("RegExp"),FC=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};xC(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},UC="abcdefghijklmnopqrstuvwxyz",jC="0123456789",VC={DIGIT:jC,ALPHA:UC,ALPHA_DIGIT:UC+UC.toUpperCase()+jC};const zC=fC("AsyncFunction"),BC={isArray:mC,isArrayBuffer:yC,isBuffer:function(e){return null!==e&&!gC(e)&&null!==e.constructor&&!gC(e.constructor)&&wC(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||wC(e.append)&&("formdata"===(t=hC(e))||"object"===t&&wC(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&yC(e.buffer),t},isString:vC,isNumber:bC,isBoolean:e=>!0===e||!1===e,isObject:_C,isPlainObject:SC,isUndefined:gC,isDate:EC,isFile:IC,isBlob:TC,isRegExp:MC,isFunction:wC,isStream:e=>_C(e)&&wC(e.pipe),isURLSearchParams:CC,isTypedArray:DC,isFileList:kC,forEach:xC,merge:function e(){const{caseless:t}=RC(this)&&this||{},n={},r=(r,i)=>{const s=t&&NC(n,i)||i;SC(n[s])&&SC(r)?n[s]=e(n[s],r):SC(r)?n[s]=e({},r):mC(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&xC(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return xC(t,((t,r)=>{n&&wC(t)?e[r]=cC(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&uC(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:hC,kindOfTest:fC,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(mC(e))return e;let t=e.length;if(!bC(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:OC,hasOwnProperty:LC,hasOwnProp:LC,reduceDescriptors:FC,freezeMethods:e=>{FC(e,((t,n)=>{if(wC(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];wC(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return mC(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:NC,global:AC,isContextDefined:RC,ALPHABET:VC,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VC.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&wC(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(_C(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=mC(e)?[]:{};return xC(e,((e,t)=>{const s=n(e,r+1);!gC(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:zC,isThenable:e=>e&&(_C(e)||wC(e))&&wC(e.then)&&wC(e.catch)};function qC(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}BC.inherits(qC,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:BC.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const KC=qC.prototype,WC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{WC[e]={value:e}})),Object.defineProperties(qC,WC),Object.defineProperty(KC,"isAxiosError",{value:!0}),qC.from=(e,t,n,r,i,s)=>{const o=Object.create(KC);return BC.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),qC.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const GC=qC;function HC(e){return BC.isPlainObject(e)||BC.isArray(e)}function QC(e){return BC.endsWith(e,"[]")?e.slice(0,-2):e}function JC(e,t,n){return e?e.concat(t).map((function(e,t){return e=QC(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const YC=BC.toFlatObject(BC,{},null,(function(e){return/^is[A-Z]/.test(e)}));const $C=function(e,t,n){if(!BC.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=BC.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!BC.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&BC.isSpecCompliantForm(t);if(!BC.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(BC.isDate(e))return e.toISOString();if(!a&&BC.isBlob(e))throw new GC("Blob is not supported. Use a Buffer instead.");return BC.isArrayBuffer(e)||BC.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(BC.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(BC.isArray(e)&&function(e){return BC.isArray(e)&&!e.some(HC)}(e)||(BC.isFileList(e)||BC.endsWith(n,"[]"))&&(a=BC.toArray(e)))return n=QC(n),a.forEach((function(e,r){!BC.isUndefined(e)&&null!==e&&t.append(!0===o?JC([n],r,s):null===o?n:n+"[]",c(e))})),!1;return!!HC(e)||(t.append(JC(i,n,s),c(e)),!1)}const u=[],h=Object.assign(YC,{defaultVisitor:l,convertValue:c,isVisitable:HC});if(!BC.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!BC.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),BC.forEach(n,(function(n,s){!0===(!(BC.isUndefined(n)||null===n)&&i.call(t,n,BC.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function XC(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ZC(e,t){this._pairs=[],e&&$C(e,this,t)}const ex=ZC.prototype;ex.append=function(e,t){this._pairs.push([e,t])},ex.toString=function(e){const t=e?function(t){return e.call(this,t,XC)}:XC;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const tx=ZC;function nx(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rx(e,t,n){if(!t)return e;const r=n&&n.encode||nx,i=n&&n.serialize;let s;if(s=i?i(t,n):BC.isURLSearchParams(t)?t.toString():new tx(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ix=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){BC.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},sx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ox={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:tx,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ax="undefined"!==typeof window&&"undefined"!==typeof document,cx=(lx="undefined"!==typeof navigator&&navigator.product,ax&&["ReactNative","NativeScript","NS"].indexOf(lx)<0);var lx;const ux="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,hx={...t,...ox};const dx=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&BC.isArray(r)?r.length:s,a)return BC.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&BC.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&BC.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(BC.isFormData(e)&&BC.isFunction(e.entries)){const n={};return BC.forEachEntry(e,((e,r)=>{t(function(e){return BC.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const fx={transitional:sx,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=BC.isObject(e);i&&BC.isHTMLForm(e)&&(e=new FormData(e));if(BC.isFormData(e))return r?JSON.stringify(dx(e)):e;if(BC.isArrayBuffer(e)||BC.isBuffer(e)||BC.isStream(e)||BC.isFile(e)||BC.isBlob(e))return e;if(BC.isArrayBufferView(e))return e.buffer;if(BC.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $C(e,new hx.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return hx.isNode&&BC.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=BC.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $C(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(BC.isString(e))try{return(t||JSON.parse)(e),BC.trim(e)}catch(iN){if("SyntaxError"!==iN.name)throw iN}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||fx.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&BC.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(iN){if(n){if("SyntaxError"===iN.name)throw GC.from(iN,GC.ERR_BAD_RESPONSE,this,null,this.response);throw iN}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hx.classes.FormData,Blob:hx.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};BC.forEach(["delete","get","head","post","put","patch"],(e=>{fx.headers[e]={}}));const px=fx,mx=BC.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gx=Symbol("internals");function yx(e){return e&&String(e).trim().toLowerCase()}function vx(e){return!1===e||null==e?e:BC.isArray(e)?e.map(vx):String(e)}function wx(e,t,n,r,i){return BC.isFunction(r)?r.call(this,t,n):(i&&(t=n),BC.isString(t)?BC.isString(r)?-1!==t.indexOf(r):BC.isRegExp(r)?r.test(t):void 0:void 0)}class bx{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=yx(t);if(!i)throw new Error("header name must be a non-empty string");const s=BC.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=vx(e))}const s=(e,t)=>BC.forEach(e,((e,n)=>i(e,n,t)));return BC.isPlainObject(e)||e instanceof this.constructor?s(e,t):BC.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&mx[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=yx(e)){const n=BC.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(BC.isFunction(t))return t.call(this,e,n);if(BC.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yx(e)){const n=BC.findKey(this,e);return!(!n||void 0===this[n]||t&&!wx(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=yx(e)){const i=BC.findKey(n,e);!i||t&&!wx(0,n[i],i,t)||(delete n[i],r=!0)}}return BC.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!wx(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return BC.forEach(this,((r,i)=>{const s=BC.findKey(n,i);if(s)return t[s]=vx(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=vx(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return BC.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&BC.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[gx]=this[gx]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=yx(e);t[r]||(!function(e,t){const n=BC.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return BC.isArray(e)?e.forEach(r):r(e),this}}bx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),BC.reduceDescriptors(bx.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),BC.freezeMethods(bx);const _x=bx;function Sx(e,t){const n=this||px,r=t||n,i=_x.from(r.headers);let s=r.data;return BC.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Ex(e){return!(!e||!e.__CANCEL__)}function Ix(e,t,n){GC.call(this,null==e?"canceled":e,GC.ERR_CANCELED,t,n),this.name="CanceledError"}BC.inherits(Ix,GC,{__CANCEL__:!0});const Tx=Ix;const kx=hx.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];BC.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),BC.isString(r)&&o.push("path="+r),BC.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Cx(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const xx=hx.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=BC.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Nx=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];i||(i=c),n[s]=a,r[s]=c;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}};function Ax(e,t){let n=0;const r=Nx(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,c=r(a);n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const Rx={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=_x.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(BC.isFormData(r))if(hx.hasStandardBrowserEnv||hx.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=Cx(e.baseURL,e.url);function d(){if(!u)return;const r=_x.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new GC("Request failed with status code "+n.status,[GC.ERR_BAD_REQUEST,GC.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),rx(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new GC("Request aborted",GC.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new GC("Network Error",GC.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||sx;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new GC(t,r.clarifyTimeoutError?GC.ETIMEDOUT:GC.ECONNABORTED,e,u)),u=null},hx.hasStandardBrowserEnv&&(c&&BC.isFunction(c)&&(c=c(e)),c||!1!==c&&xx(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&kx.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&BC.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),BC.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",Ax(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Ax(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(n(!t||t.type?new Tx(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===hx.protocols.indexOf(f)?n(new GC("Unsupported protocol "+f+":",GC.ERR_BAD_REQUEST,e)):u.send(r||null)}))}};BC.forEach(Rx,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(iN){}Object.defineProperty(e,"adapterName",{value:t})}}));const Dx=e=>"- ".concat(e),Px=e=>BC.isFunction(e)||null===e||!1===e,Ox=e=>{e=BC.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!Px(n)&&(r=Rx[(t=String(n)).toLowerCase()],void 0===r))throw new GC("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Dx).join("\n"):" "+Dx(e[0]):"as no adapter specified";throw new GC("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Lx(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Tx(null,e)}function Mx(e){Lx(e),e.headers=_x.from(e.headers),e.data=Sx.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ox(e.adapter||px.adapter)(e).then((function(t){return Lx(e),t.data=Sx.call(e,e.transformResponse,t),t.headers=_x.from(t.headers),t}),(function(t){return Ex(t)||(Lx(e),t&&t.response&&(t.response.data=Sx.call(e,e.transformResponse,t.response),t.response.headers=_x.from(t.response.headers))),Promise.reject(t)}))}const Fx=e=>e instanceof _x?{...e}:e;function Ux(e,t){t=t||{};const n={};function r(e,t,n){return BC.isPlainObject(e)&&BC.isPlainObject(t)?BC.merge.call({caseless:n},e,t):BC.isPlainObject(t)?BC.merge({},t):BC.isArray(t)?t.slice():t}function i(e,t,n){return BC.isUndefined(t)?BC.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!BC.isUndefined(t))return r(void 0,t)}function o(e,t){return BC.isUndefined(t)?BC.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(Fx(e),Fx(t),!0)};return BC.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=c[r]||i,o=s(e[r],t[r],r);BC.isUndefined(o)&&s!==a||(n[r]=o)})),n}const jx="1.6.8",Vx={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Vx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const zx={};Vx.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.8] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new GC(r(i," has been removed"+(t?" in "+t:"")),GC.ERR_DEPRECATED);return t&&!zx[i]&&(zx[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const Bx={assertOptions:function(e,t,n){if("object"!==typeof e)throw new GC("options must be an object",GC.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new GC("option "+s+" must be "+n,GC.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new GC("Unknown option "+s,GC.ERR_BAD_OPTION)}},validators:Vx},qx=Bx.validators;class Kx{constructor(e){this.defaults=e,this.interceptors={request:new ix,response:new ix}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ux(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Bx.assertOptions(n,{silentJSONParsing:qx.transitional(qx.boolean),forcedJSONParsing:qx.transitional(qx.boolean),clarifyTimeoutError:qx.transitional(qx.boolean)},!1),null!=r&&(BC.isFunction(r)?t.paramsSerializer={serialize:r}:Bx.assertOptions(r,{encode:qx.function,serialize:qx.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&BC.merge(i.common,i[t.method]);i&&BC.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=_x.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[Mx.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{l=Mx.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return rx(Cx((e=Ux(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}BC.forEach(["delete","get","head","options"],(function(e){Kx.prototype[e]=function(t,n){return this.request(Ux(n||{},{method:e,url:t,data:(n||{}).data}))}})),BC.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ux(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Kx.prototype[e]=t(),Kx.prototype[e+"Form"]=t(!0)}));const Wx=Kx;class Gx{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Tx(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Gx((function(t){e=t})),cancel:e}}}const Hx=Gx;const Qx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qx).forEach((e=>{let[t,n]=e;Qx[n]=t}));const Jx=Qx;const Yx=function e(t){const n=new Wx(t),r=cC(Wx.prototype.request,n);return BC.extend(r,Wx.prototype,n,{allOwnKeys:!0}),BC.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ux(t,n))},r}(px);Yx.Axios=Wx,Yx.CanceledError=Tx,Yx.CancelToken=Hx,Yx.isCancel=Ex,Yx.VERSION=jx,Yx.toFormData=$C,Yx.AxiosError=GC,Yx.Cancel=Yx.CanceledError,Yx.all=function(e){return Promise.all(e)},Yx.spread=function(e){return function(t){return e.apply(null,t)}},Yx.isAxiosError=function(e){return BC.isObject(e)&&!0===e.isAxiosError},Yx.mergeConfig=Ux,Yx.AxiosHeaders=_x,Yx.formToJSON=e=>dx(BC.isHTMLForm(e)?new FormData(e):e),Yx.getAdapter=Ox,Yx.HttpStatusCode=Jx,Yx.default=Yx;const $x=Yx,Xx="ca06176383156cfaf011130fdff2083e",Zx={fetchTrending:"https://api.themoviedb.org/3/trending/all/week?api_key=".concat(Xx,"&language=en-US"),fetchNetflixOriginals:"https://api.themoviedb.org/3/discover/tv?api_key=".concat(Xx,"&with_networks=213"),fetchTopRated:"https://api.themoviedb.org/3/movie/top_rated?api_key=".concat(Xx,"&language=en-US"),fetchActionMovies:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(Xx,"&with_genres=28"),fetchComedyMovies:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(Xx,"&with_genres=35"),fetchHorrorMovies:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(Xx,"&with_genres=27"),fetchRomanceMovies:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(Xx,"&with_genres=10749"),fetchDocumentaries:"https://api.themoviedb.org/3/discover/movie?api_key=".concat(Xx,"&with_genres=99")};const eN=function(){const[e,t]=(0,i.useState)(null);return(0,i.useEffect)((()=>{!async function(){try{const e=await $x.get(Zx.fetchNetflixOriginals);t(e.data.results[Math.floor(Math.random()*e.data.results.length)])}catch(e){console.error("Request failed with status code",e.response.status)}}()}),[]),(0,JI.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:e?'url("https://image.tmdb.org/t/p/original/'.concat(e.backdrop_path,'")'):null,backgroundPosition:"center center"},children:[(0,JI.jsxs)("div",{className:"banner__contents",children:[(0,JI.jsx)("h1",{className:"banner__title",children:e?e.title||e.name||e.original_name:""}),(0,JI.jsxs)("div",{className:"banner__buttons",children:[(0,JI.jsx)("button",{className:"banner__button",children:"Play"}),(0,JI.jsx)("button",{className:"banner__button",children:"My List"})]}),(0,JI.jsx)("h1",{className:"banner__description",children:e&&(n=e.overview,r=150,(null===n||void 0===n?void 0:n.length)>r?n.substr(0,r-1)+"...":n)})]}),(0,JI.jsx)("div",{className:"banner__fadeBottom"})]});var n,r};const tN=function(e){let{title:t,fetchUrl:n,isLargeRow:r=!1}=e;const[s,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{!async function(){try{const e=await $x.get(n);o(e.data.results)}catch(e){console.error("Error fetching movies:",e)}}()}),[n]),(0,JI.jsxs)("div",{className:"row",children:[(0,JI.jsx)("h2",{children:t}),(0,JI.jsx)("div",{className:"row__posters",children:s.map((e=>(r&&e.poster_path||!r&&e.backdrop_path)&&(0,JI.jsx)("img",{className:"row__poster ".concat(r?"row__posterLarge":""),src:"".concat("https://image.tmdb.org/t/p/original").concat(r?e.poster_path:e.backdrop_path),alt:e.name||e.title},e.id)))})]})};const nN=function(){return(0,JI.jsxs)("div",{className:"homeScreen",children:[(0,JI.jsx)(oC,{}),(0,JI.jsx)(eN,{}),(0,JI.jsx)(tN,{title:"NETFLIX ORIGINALS",fetchUrl:Zx.fetchNetflixOriginals,isLargeRow:!0}),(0,JI.jsx)(tN,{title:"Trending Now",fetchUrl:Zx.fetchTrending}),(0,JI.jsx)(tN,{title:"Top Rated",fetchUrl:Zx.fetchTopRated}),(0,JI.jsx)(tN,{title:"Action Movies",fetchUrl:Zx.fetchActionMovies}),(0,JI.jsx)(tN,{title:"Comedy Movies",fetchUrl:Zx.fetchComedyMovies}),(0,JI.jsx)(tN,{title:"Horror Movies",fetchUrl:Zx.fetchHorrorMovies}),(0,JI.jsx)(tN,{title:"Romance Movies",fetchUrl:Zx.fetchRomanceMovies})," ",(0,JI.jsx)(tN,{title:"Documentaries",fetchUrl:Zx.fetchDocumentaries})," "]})},rN=Nk(iC);o.createRoot(document.getElementById("root")).render((0,JI.jsx)(yT,{store:rN,children:(0,JI.jsx)(Ee,{children:(0,JI.jsxs)(ye,{children:[(0,JI.jsx)(me,{path:"/",element:(0,JI.jsx)(sC,{})}),(0,JI.jsx)(me,{path:"/homescreen/profile",element:(0,JI.jsx)(aC,{})}),(0,JI.jsx)(me,{path:"/homescreen/profile/:id",element:(0,JI.jsx)(aC,{})}),(0,JI.jsx)(me,{path:"/profile",element:(0,JI.jsx)(aC,{})}),(0,JI.jsx)(me,{exact:!0,path:"/loginScreen",element:(0,JI.jsx)($I,{})}),(0,JI.jsx)(me,{path:"/homescreen",element:(0,JI.jsx)(nN,{})})]})})}))})()})();
//# sourceMappingURL=main.915b3fb6.js.map